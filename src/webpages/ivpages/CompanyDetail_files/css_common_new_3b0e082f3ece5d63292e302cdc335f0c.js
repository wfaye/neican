/*
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(window,undefined){var jQuery=function(selector,context){return new jQuery.fn.init(selector,context);
},_jQuery=window.jQuery,_$=window.$,document=window.document,rootjQuery,quickExpr=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,isSimple=/^.[^:#\[\.,]*$/,rnotwhite=/\S/,rtrim=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,userAgent=navigator.userAgent,browserMatch,readyBound=false,readyList=[],DOMContentLoaded,toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,indexOf=Array.prototype.indexOf;
jQuery.fn=jQuery.prototype={init:function(selector,context){var match,elem,ret,doc;if(!selector){return this;}if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}if(selector==="body"&&!context){this.context=document;this[0]=document.body;this.selector="body";this.length=1;return this;
}if(typeof selector==="string"){match=quickExpr.exec(selector);if(match&&(match[1]||!context)){if(match[1]){doc=(context?context.ownerDocument||context:document);ret=rsingleTag.exec(selector);if(ret){if(jQuery.isPlainObject(context)){selector=[document.createElement(ret[1])];jQuery.fn.attr.call(selector,context,true);
}else{selector=[doc.createElement(ret[1])];}}else{ret=buildFragment([match[1]],[doc]);selector=(ret.cacheable?ret.fragment.cloneNode(true):ret.fragment).childNodes;}return jQuery.merge(this,selector);}else{elem=document.getElementById(match[2]);if(elem){if(elem.id!==match[2]){return rootjQuery.find(selector);
}this.length=1;this[0]=elem;}this.context=document;this.selector=selector;return this;}}else{if(!context&&/^\w+$/.test(selector)){this.selector=selector;this.context=document;selector=document.getElementsByTagName(selector);return jQuery.merge(this,selector);}else{if(!context||context.jquery){return(context||rootjQuery).find(selector);
}else{return jQuery(context).find(selector);}}}}else{if(jQuery.isFunction(selector)){return rootjQuery.ready(selector);}}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}return jQuery.makeArray(selector,this);},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length;
},toArray:function(){return slice.call(this,0);},get:function(num){return num==null?this.toArray():(num<0?this.slice(num)[0]:this[num]);},pushStack:function(elems,name,selector){var ret=jQuery();if(jQuery.isArray(elems)){push.apply(ret,elems);}else{jQuery.merge(ret,elems);}ret.prevObject=this;ret.context=this.context;
if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector;}else{if(name){ret.selector=this.selector+"."+name+"("+selector+")";}}return ret;},each:function(callback,args){return jQuery.each(this,callback,args);},ready:function(fn){jQuery.bindReady();if(jQuery.isReady){fn.call(document,jQuery);
}else{if(readyList){readyList.push(fn);}}return this;},eq:function(i){return i===-1?this.slice(i):this.slice(i,+i+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","));
},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},end:function(){return this.prevObject||jQuery(null);},push:push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var target=arguments[0]||{},i=1,length=arguments.length,deep=false,options,name,src,copy;
if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}if(length===i){target=this;--i;}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;
}if(deep&&copy&&(jQuery.isPlainObject(copy)||jQuery.isArray(copy))){var clone=src&&(jQuery.isPlainObject(src)||jQuery.isArray(src))?src:jQuery.isArray(copy)?[]:{};target[name]=jQuery.extend(deep,clone,copy);}else{if(copy!==undefined){target[name]=copy;}}}}}return target;};jQuery.extend({noConflict:function(deep){window.$=_$;
if(deep){window.jQuery=_jQuery;}return jQuery;},isReady:false,ready:function(){if(!jQuery.isReady){if(!document.body){return setTimeout(jQuery.ready,13);}jQuery.isReady=true;if(readyList){var fn,i=0;while((fn=readyList[i++])){fn.call(document,jQuery);}readyList=null;}if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");
}}},bindReady:function(){if(readyBound){return;}readyBound=true;if(document.readyState==="complete"){return jQuery.ready();}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false);}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);
window.attachEvent("onload",jQuery.ready);var toplevel=false;try{toplevel=window.frameElement==null;}catch(e){}if(document.documentElement.doScroll&&toplevel){doScrollCheck();}}}},isFunction:function(obj){return toString.call(obj)==="[object Function]";},isArray:function(obj){return toString.call(obj)==="[object Array]";
},isPlainObject:function(obj){if(!obj||toString.call(obj)!=="[object Object]"||obj.nodeType||obj.setInterval){return false;}if(obj.constructor&&!hasOwnProperty.call(obj,"constructor")&&!hasOwnProperty.call(obj.constructor.prototype,"isPrototypeOf")){return false;}var key;for(key in obj){}return key===undefined||hasOwnProperty.call(obj,key);
},isEmptyObject:function(obj){for(var name in obj){return false;}return true;},error:function(msg){throw msg;},parseJSON:function(data){if(typeof data!=="string"||!data){return null;}data=jQuery.trim(data);if(/^[\],:{}\s]*$/.test(data.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return window.JSON&&window.JSON.parse?window.JSON.parse(data):(new Function("return "+data))();
}else{jQuery.error("Invalid JSON: "+data);}},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data)){var head=document.getElementsByTagName("head")[0]||document.documentElement,script=document.createElement("script");script.type="text/javascript";if(jQuery.support.scriptEval){script.appendChild(document.createTextNode(data));
}else{script.text=data;}head.insertBefore(script,head.firstChild);head.removeChild(script);}},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase();},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);
if(args){if(isObj){for(name in object){if(callback.apply(object[name],args)===false){break;}}}else{for(;i<length;){if(callback.apply(object[i++],args)===false){break;}}}}else{if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break;}}}else{for(var value=object[0];
i<length&&callback.call(value,i,value)!==false;value=object[++i]){}}}return object;},trim:function(text){return(text||"").replace(rtrim,"");},makeArray:function(array,results){var ret=results||[];if(array!=null){if(array.length==null||typeof array==="string"||jQuery.isFunction(array)||(typeof array!=="function"&&array.setInterval)){push.call(ret,array);
}else{jQuery.merge(ret,array);}}return ret;},inArray:function(elem,array){if(array.indexOf){return array.indexOf(elem);}for(var i=0,length=array.length;i<length;i++){if(array[i]===elem){return i;}}return -1;},merge:function(first,second){var i=first.length,j=0;if(typeof second.length==="number"){for(var l=second.length;
j<l;j++){first[i++]=second[j];}}else{while(second[j]!==undefined){first[i++]=second[j++];}}first.length=i;return first;},grep:function(elems,callback,inv){var ret=[];for(var i=0,length=elems.length;i<length;i++){if(!inv!==!callback(elems[i],i)){ret.push(elems[i]);}}return ret;},map:function(elems,callback,arg){var ret=[],value;
for(var i=0,length=elems.length;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}return ret.concat.apply([],ret);},guid:1,proxy:function(fn,proxy,thisObject){if(arguments.length===2){if(typeof proxy==="string"){thisObject=fn;fn=thisObject[proxy];proxy=undefined;}else{if(proxy&&!jQuery.isFunction(proxy)){thisObject=proxy;
proxy=undefined;}}}if(!proxy&&fn){proxy=function(){return fn.apply(thisObject||this,arguments);};}if(fn){proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++;}return proxy;},uaMatch:function(ua){ua=ua.toLowerCase();var match=/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||!/compatible/.test(ua)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(ua)||[];
return{browser:match[1]||"",version:match[2]||"0"};},browser:{}});browserMatch=jQuery.uaMatch(userAgent);if(browserMatch.browser){jQuery.browser[browserMatch.browser]=true;jQuery.browser.version=browserMatch.version;}if(jQuery.browser.webkit){jQuery.browser.safari=true;}if(indexOf){jQuery.inArray=function(elem,array){return indexOf.call(array,elem);
};}rootjQuery=jQuery(document);if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready();};}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);
jQuery.ready();}};}}function doScrollCheck(){if(jQuery.isReady){return;}try{document.documentElement.doScroll("left");}catch(error){setTimeout(doScrollCheck,1);return;}jQuery.ready();}function evalScript(i,elem){if(elem.src){jQuery.ajax({url:elem.src,async:false,dataType:"script"});}else{jQuery.globalEval(elem.text||elem.textContent||elem.innerHTML||"");
}if(elem.parentNode){elem.parentNode.removeChild(elem);}}function access(elems,key,value,exec,fn,pass){var length=elems.length;if(typeof key==="object"){for(var k in key){access(elems,k,key[k],exec,fn,value);}return elems;}if(value!==undefined){exec=!pass&&exec&&jQuery.isFunction(value);for(var i=0;i<length;
i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);}return elems;}return length?fn(elems[0],key):undefined;}function now(){return(new Date).getTime();}(function(){jQuery.support={};var root=document.documentElement,script=document.createElement("script"),div=document.createElement("div"),id="script"+now();
div.style.display="none";div.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0];if(!all||!all.length||!a){return;}jQuery.support={leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/red/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",opacity:/^0.55$/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:div.getElementsByTagName("input")[0].value==="on",optSelected:document.createElement("select").appendChild(document.createElement("option")).selected,parentNode:div.removeChild(div.appendChild(document.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};
script.type="text/javascript";try{script.appendChild(document.createTextNode("window."+id+"=1;"));}catch(e){}root.insertBefore(script,root.firstChild);if(window[id]){jQuery.support.scriptEval=true;delete window[id];}try{delete script.test;}catch(e){jQuery.support.deleteExpando=false;}root.removeChild(script);
if(div.attachEvent&&div.fireEvent){div.attachEvent("onclick",function click(){jQuery.support.noCloneEvent=false;div.detachEvent("onclick",click);});div.cloneNode(true).fireEvent("onclick");}div=document.createElement("div");div.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var fragment=document.createDocumentFragment();
fragment.appendChild(div.firstChild);jQuery.support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;jQuery(function(){var div=document.createElement("div");div.style.width=div.style.paddingLeft="1px";document.body.appendChild(div);jQuery.boxModel=jQuery.support.boxModel=div.offsetWidth===2;
document.body.removeChild(div).style.display="none";div=null;});var eventSupported=function(eventName){var el=document.createElement("div");eventName="on"+eventName;var isSupported=(eventName in el);if(!isSupported){el.setAttribute(eventName,"return;");isSupported=typeof el[eventName]==="function";}el=null;
return isSupported;};jQuery.support.submitBubbles=eventSupported("submit");jQuery.support.changeBubbles=eventSupported("change");root=script=div=all=a=null;})();jQuery.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};
var expando="jQuery"+now(),uuid=0,windowData={};jQuery.extend({cache:{},expando:expando,noData:{"embed":true,"object":true,"applet":true},data:function(elem,name,data){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){return;}elem=elem==window?windowData:elem;var id=elem[expando],cache=jQuery.cache,thisCache;
if(!id&&typeof name==="string"&&data===undefined){return null;}if(!id){id=++uuid;}if(typeof name==="object"){elem[expando]=id;thisCache=cache[id]=jQuery.extend(true,{},name);}else{if(!cache[id]){elem[expando]=id;cache[id]={};}}thisCache=cache[id];if(data!==undefined){thisCache[name]=data;}return typeof name==="string"?thisCache[name]:thisCache;
},removeData:function(elem,name){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){return;}elem=elem==window?windowData:elem;var id=elem[expando],cache=jQuery.cache,thisCache=cache[id];if(name){if(thisCache){delete thisCache[name];if(jQuery.isEmptyObject(thisCache)){jQuery.removeData(elem);
}}}else{if(jQuery.support.deleteExpando){delete elem[jQuery.expando];}else{if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);}}delete cache[id];}}});jQuery.fn.extend({data:function(key,value){if(typeof key==="undefined"&&this.length){return jQuery.data(this[0]);}else{if(typeof key==="object"){return this.each(function(){jQuery.data(this,key);
});}}var parts=key.split(".");parts[1]=parts[1]?"."+parts[1]:"";if(value===undefined){var data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]);if(data===undefined&&this.length){data=jQuery.data(this[0],key);}return data===undefined&&parts[1]?this.data(parts[0]):data;}else{return this.trigger("setData"+parts[1]+"!",[parts[0],value]).each(function(){jQuery.data(this,key,value);
});}},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});}});jQuery.extend({queue:function(elem,type,data){if(!elem){return;}type=(type||"fx")+"queue";var q=jQuery.data(elem,type);if(!data){return q||[];}if(!q||jQuery.isArray(data)){q=jQuery.data(elem,type,jQuery.makeArray(data));
}else{q.push(data);}return q;},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift();if(fn==="inprogress"){fn=queue.shift();}if(fn){if(type==="fx"){queue.unshift("inprogress");}fn.call(elem,function(){jQuery.dequeue(elem,type);});}}});jQuery.fn.extend({queue:function(type,data){if(typeof type!=="string"){data=type;
type="fx";}if(data===undefined){return jQuery.queue(this[0],type);}return this.each(function(i,elem){var queue=jQuery.queue(this,type,data);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;
type=type||"fx";return this.queue(type,function(){var elem=this;setTimeout(function(){jQuery.dequeue(elem,type);},time);});},clearQueue:function(type){return this.queue(type||"fx",[]);}});var rclass=/[\n\t]/g,rspace=/\s+/,rreturn=/\r/g,rspecialurl=/href|src|style/,rtype=/(button|input)/i,rfocusable=/(button|input|object|select|textarea)/i,rclickable=/^(a|area)$/i,rradiocheck=/radio|checkbox/;
jQuery.fn.extend({attr:function(name,value){return access(this,name,value,true,jQuery.attr);},removeAttr:function(name,fn){return this.each(function(){jQuery.attr(this,name,"");if(this.nodeType===1){this.removeAttribute(name);}});},addClass:function(value){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);
self.addClass(value.call(this,i,self.attr("class")));});}if(value&&typeof value==="string"){var classNames=(value||"").split(rspace);for(var i=0,l=this.length;i<l;i++){var elem=this[i];if(elem.nodeType===1){if(!elem.className){elem.className=value;}else{var className=" "+elem.className+" ",setClass=elem.className;
for(var c=0,cl=classNames.length;c<cl;c++){if(className.indexOf(" "+classNames[c]+" ")<0){setClass+=" "+classNames[c];}}elem.className=jQuery.trim(setClass);}}}}return this;},removeClass:function(value){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.removeClass(value.call(this,i,self.attr("class")));
});}if((value&&typeof value==="string")||value===undefined){var classNames=(value||"").split(rspace);for(var i=0,l=this.length;i<l;i++){var elem=this[i];if(elem.nodeType===1&&elem.className){if(value){var className=(" "+elem.className+" ").replace(rclass," ");for(var c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");
}elem.className=jQuery.trim(className);}else{elem.className="";}}}}return this;},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.toggleClass(value.call(this,i,self.attr("class"),stateVal),stateVal);
});}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className);}}else{if(type==="undefined"||type==="boolean"){if(this.className){jQuery.data(this,"__className__",this.className);
}this.className=this.className||value===false?"":jQuery.data(this,"__className__")||"";}}});},hasClass:function(selector){var className=" "+selector+" ";for(var i=0,l=this.length;i<l;i++){if((" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1){return true;}}return false;},val:function(value){if(value===undefined){var elem=this[0];
if(elem){if(jQuery.nodeName(elem,"option")){return(elem.attributes.value||{}).specified?elem.value:elem.text;}if(jQuery.nodeName(elem,"select")){var index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null;}for(var i=one?index:0,max=one?index+1:options.length;
i<max;i++){var option=options[i];if(option.selected){value=jQuery(option).val();if(one){return value;}values.push(value);}}return values;}if(rradiocheck.test(elem.type)&&!jQuery.support.checkOn){return elem.getAttribute("value")===null?"on":elem.value;}return(elem.value||"").replace(rreturn,"");}return undefined;
}var isFunction=jQuery.isFunction(value);return this.each(function(i){var self=jQuery(this),val=value;if(this.nodeType!==1){return;}if(isFunction){val=value.call(this,i,self.val());}if(typeof val==="number"){val+="";}if(jQuery.isArray(val)&&rradiocheck.test(this.type)){this.checked=jQuery.inArray(self.val(),val)>=0;
}else{if(jQuery.nodeName(this,"select")){var values=jQuery.makeArray(val);jQuery("option",this).each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0;});if(!values.length){this.selectedIndex=-1;}}else{this.value=val;}}});}});jQuery.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(elem,name,value,pass){if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined;
}if(pass&&name in jQuery.attrFn){return jQuery(elem)[name](value);}var notxml=elem.nodeType!==1||!jQuery.isXMLDoc(elem),set=value!==undefined;name=notxml&&jQuery.props[name]||name;if(elem.nodeType===1){var special=rspecialurl.test(name);if(name==="selected"&&!jQuery.support.optSelected){var parent=elem.parentNode;
if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}}if(name in elem&&notxml&&!special){if(set){if(name==="type"&&rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed");}elem[name]=value;}if(jQuery.nodeName(elem,"form")&&elem.getAttributeNode(name)){return elem.getAttributeNode(name).nodeValue;
}if(name==="tabIndex"){var attributeNode=elem.getAttributeNode("tabIndex");return attributeNode&&attributeNode.specified?attributeNode.value:rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined;}return elem[name];}if(!jQuery.support.style&&notxml&&name==="style"){if(set){elem.style.cssText=""+value;
}return elem.style.cssText;}if(set){elem.setAttribute(name,""+value);}var attr=!jQuery.support.hrefNormalized&&notxml&&special?elem.getAttribute(name,2):elem.getAttribute(name);return attr===null?undefined:attr;}return jQuery.style(elem,name,value);}});var rnamespaces=/\.(.*)$/,fcleanup=function(nm){return nm.replace(/[^\w\s\.\|`]/g,function(ch){return"\\"+ch;
});};jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType===3||elem.nodeType===8){return;}if(elem.setInterval&&(elem!==window&&!elem.frameElement)){elem=window;}var handleObjIn,handleObj;if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;}if(!handler.guid){handler.guid=jQuery.guid++;
}var elemData=jQuery.data(elem);if(!elemData){return;}var events=elemData.events=elemData.events||{},eventHandle=elemData.handle,eventHandle;if(!eventHandle){elemData.handle=eventHandle=function(){return typeof jQuery!=="undefined"&&!jQuery.event.triggered?jQuery.event.handle.apply(eventHandle.elem,arguments):undefined;
};}eventHandle.elem=elem;types=types.split(" ");var type,i=0,namespaces;while((type=types[i++])){handleObj=handleObjIn?jQuery.extend({},handleObjIn):{handler:handler,data:data};if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();handleObj.namespace=namespaces.slice(0).sort().join(".");
}else{namespaces=[];handleObj.namespace="";}handleObj.type=type;handleObj.guid=handler.guid;var handlers=events[type],special=jQuery.event.special[type]||{};if(!handlers){handlers=events[type]=[];if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);
}else{if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle);}}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}handlers.push(handleObj);jQuery.event.global[type]=true;}elem=null;},global:{},remove:function(elem,types,handler,pos){if(elem.nodeType===3||elem.nodeType===8){return;
}var ret,type,fn,i=0,all,namespaces,namespace,special,eventType,handleObj,origType,elemData=jQuery.data(elem),events=elemData&&elemData.events;if(!elemData||!events){return;}if(types&&types.type){handler=types.handler;types=types.type;}if(!types||typeof types==="string"&&types.charAt(0)==="."){types=types||"";
for(type in events){jQuery.event.remove(elem,type+types);}return;}types=types.split(" ");while((type=types[i++])){origType=type;handleObj=null;all=type.indexOf(".")<0;namespaces=[];if(!all){namespaces=type.split(".");type=namespaces.shift();namespace=new RegExp("(^|\\.)"+jQuery.map(namespaces.slice(0).sort(),fcleanup).join("\\.(?:.*\\.)?")+"(\\.|$)");
}eventType=events[type];if(!eventType){continue;}if(!handler){for(var j=0;j<eventType.length;j++){handleObj=eventType[j];if(all||namespace.test(handleObj.namespace)){jQuery.event.remove(elem,origType,handleObj.handler,j);eventType.splice(j--,1);}}continue;}special=jQuery.event.special[type]||{};for(var j=pos||0;
j<eventType.length;j++){handleObj=eventType[j];if(handler.guid===handleObj.guid){if(all||namespace.test(handleObj.namespace)){if(pos==null){eventType.splice(j--,1);}if(special.remove){special.remove.call(elem,handleObj);}}if(pos!=null){break;}}}if(eventType.length===0||pos!=null&&eventType.length===1){if(!special.teardown||special.teardown.call(elem,namespaces)===false){removeEvent(elem,type,elemData.handle);
}ret=null;delete events[type];}}if(jQuery.isEmptyObject(events)){var handle=elemData.handle;if(handle){handle.elem=null;}delete elemData.events;delete elemData.handle;if(jQuery.isEmptyObject(elemData)){jQuery.removeData(elem);}}},trigger:function(event,data,elem){var type=event.type||event,bubbling=arguments[3];
if(!bubbling){event=typeof event==="object"?event[expando]?event:jQuery.extend(jQuery.Event(type),event):jQuery.Event(type);if(type.indexOf("!")>=0){event.type=type=type.slice(0,-1);event.exclusive=true;}if(!elem){event.stopPropagation();if(jQuery.event.global[type]){jQuery.each(jQuery.cache,function(){if(this.events&&this.events[type]){jQuery.event.trigger(event,data,this.handle.elem);
}});}}if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined;}event.result=undefined;event.target=elem;data=jQuery.makeArray(data);data.unshift(event);}event.currentTarget=elem;var handle=jQuery.data(elem,"handle");if(handle){handle.apply(elem,data);}var parent=elem.parentNode||elem.ownerDocument;
try{if(!(elem&&elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()])){if(elem["on"+type]&&elem["on"+type].apply(elem,data)===false){event.result=false;}}}catch(e){}if(!event.isPropagationStopped()&&parent){jQuery.event.trigger(event,data,parent,true);}else{if(!event.isDefaultPrevented()){var target=event.target,old,isClick=jQuery.nodeName(target,"a")&&type==="click",special=jQuery.event.special[type]||{};
if((!special._default||special._default.call(elem,event)===false)&&!isClick&&!(target&&target.nodeName&&jQuery.noData[target.nodeName.toLowerCase()])){try{if(target[type]){old=target["on"+type];if(old){target["on"+type]=null;}jQuery.event.triggered=true;target[type]();}}catch(e){}if(old){target["on"+type]=old;
}jQuery.event.triggered=false;}}}},handle:function(event){var all,handlers,namespaces,namespace,events;event=arguments[0]=jQuery.event.fix(event||window.event);event.currentTarget=this;all=event.type.indexOf(".")<0&&!event.exclusive;if(!all){namespaces=event.type.split(".");event.type=namespaces.shift();
namespace=new RegExp("(^|\\.)"+namespaces.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)");}var events=jQuery.data(this,"events"),handlers=events[event.type];if(events&&handlers){handlers=handlers.slice(0);for(var j=0,l=handlers.length;j<l;j++){var handleObj=handlers[j];if(all||namespace.test(handleObj.namespace)){event.handler=handleObj.handler;
event.data=handleObj.data;event.handleObj=handleObj;var ret=handleObj.handler.apply(this,arguments);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}if(event.isImmediatePropagationStopped()){break;}}}}return event.result;},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(event){if(event[expando]){return event;
}var originalEvent=event;event=jQuery.Event(originalEvent);for(var i=this.props.length,prop;i;){prop=this.props[--i];event[prop]=originalEvent[prop];}if(!event.target){event.target=event.srcElement||document;}if(event.target.nodeType===3){event.target=event.target.parentNode;}if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;
}if(event.pageX==null&&event.clientX!=null){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);
}if(!event.which&&((event.charCode||event.charCode===0)?event.charCode:event.keyCode)){event.which=event.charCode||event.keyCode;}if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey;}if(!event.which&&event.button!==undefined){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)));
}return event;},guid:100000000,proxy:jQuery.proxy,special:{ready:{setup:jQuery.bindReady,teardown:jQuery.noop},live:{add:function(handleObj){jQuery.event.add(this,handleObj.origType,jQuery.extend({},handleObj,{handler:liveHandler}));},remove:function(handleObj){var remove=true,type=handleObj.origType.replace(rnamespaces,"");
jQuery.each(jQuery.data(this,"events").live||[],function(){if(type===this.origType.replace(rnamespaces,"")){remove=false;return false;}});if(remove){jQuery.event.remove(this,handleObj.origType,liveHandler);}}},beforeunload:{setup:function(data,namespaces,eventHandle){if(this.setInterval){this.onbeforeunload=eventHandle;
}return false;},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null;}}}}};var removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener(type,handle,false);}:function(elem,type,handle){elem.detachEvent("on"+type,handle);
};jQuery.Event=function(src){if(!this.preventDefault){return new jQuery.Event(src);}if(src&&src.type){this.originalEvent=src;this.type=src.type;}else{this.type=src;}this.timeStamp=now();this[expando]=true;};function returnFalse(){return false;}function returnTrue(){return true;}jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;
var e=this.originalEvent;if(!e){return;}if(e.preventDefault){e.preventDefault();}e.returnValue=false;},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return;}if(e.stopPropagation){e.stopPropagation();}e.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;
this.stopPropagation();},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var withinElement=function(event){var parent=event.relatedTarget;try{while(parent&&parent!==this){parent=parent.parentNode;}if(parent!==this){event.type=event.data;jQuery.event.handle.apply(this,arguments);
}}catch(e){}},delegate=function(event){event.type=event.data;jQuery.event.handle.apply(this,arguments);};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={setup:function(data){jQuery.event.add(this,fix,data&&data.selector?delegate:withinElement,orig);
},teardown:function(data){jQuery.event.remove(this,fix,data&&data.selector?delegate:withinElement);}};});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(data,namespaces){if(this.nodeName.toLowerCase()!=="form"){jQuery.event.add(this,"click.specialSubmit",function(e){var elem=e.target,type=elem.type;
if((type==="submit"||type==="image")&&jQuery(elem).closest("form").length){return trigger("submit",this,arguments);}});jQuery.event.add(this,"keypress.specialSubmit",function(e){var elem=e.target,type=elem.type;if((type==="text"||type==="password")&&jQuery(elem).closest("form").length&&e.keyCode===13){return trigger("submit",this,arguments);
}});}else{return false;}},teardown:function(namespaces){jQuery.event.remove(this,".specialSubmit");}};}if(!jQuery.support.changeBubbles){var formElems=/textarea|input|select/i,changeFilters,getVal=function(elem){var type=elem.type,val=elem.value;if(type==="radio"||type==="checkbox"){val=elem.checked;
}else{if(type==="select-multiple"){val=elem.selectedIndex>-1?jQuery.map(elem.options,function(elem){return elem.selected;}).join("-"):"";}else{if(elem.nodeName.toLowerCase()==="select"){val=elem.selectedIndex;}}}return val;},testChange=function testChange(e){var elem=e.target,data,val;if(!formElems.test(elem.nodeName)||elem.readOnly){return;
}data=jQuery.data(elem,"_change_data");val=getVal(elem);if(e.type!=="focusout"||elem.type!=="radio"){jQuery.data(elem,"_change_data",val);}if(data===undefined||val===data){return;}if(data!=null||val){e.type="change";return jQuery.event.trigger(e,arguments[1],elem);}};jQuery.event.special.change={filters:{focusout:testChange,click:function(e){var elem=e.target,type=elem.type;
if(type==="radio"||type==="checkbox"||elem.nodeName.toLowerCase()==="select"){return testChange.call(this,e);}},keydown:function(e){var elem=e.target,type=elem.type;if((e.keyCode===13&&elem.nodeName.toLowerCase()!=="textarea")||(e.keyCode===32&&(type==="checkbox"||type==="radio"))||type==="select-multiple"){return testChange.call(this,e);
}},beforeactivate:function(e){var elem=e.target;jQuery.data(elem,"_change_data",getVal(elem));}},setup:function(data,namespaces){if(this.type==="file"){return false;}for(var type in changeFilters){jQuery.event.add(this,type+".specialChange",changeFilters[type]);}return formElems.test(this.nodeName);},teardown:function(namespaces){jQuery.event.remove(this,".specialChange");
return formElems.test(this.nodeName);}};changeFilters=jQuery.event.special.change.filters;}function trigger(type,elem,args){args[0].type=type;return jQuery.event.handle.apply(elem,args);}if(document.addEventListener){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){jQuery.event.special[fix]={setup:function(){this.addEventListener(orig,handler,true);
},teardown:function(){this.removeEventListener(orig,handler,true);}};function handler(e){e=jQuery.event.fix(e);e.type=fix;return jQuery.event.handle.call(this,e);}});}jQuery.each(["bind","one"],function(i,name){jQuery.fn[name]=function(type,data,fn){if(typeof type==="object"){for(var key in type){this[name](key,data,type[key],fn);
}return this;}if(jQuery.isFunction(data)){fn=data;data=undefined;}var handler=name==="one"?jQuery.proxy(fn,function(event){jQuery(this).unbind(event,handler);return fn.apply(this,arguments);}):fn;if(type==="unload"&&name!=="one"){this.one(type,data,fn);}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.add(this[i],type,handler,data);
}}return this;};});jQuery.fn.extend({unbind:function(type,fn){if(typeof type==="object"&&!type.preventDefault){for(var key in type){this.unbind(key,type[key]);}}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.remove(this[i],type,fn);}}return this;},delegate:function(selector,types,data,fn){return this.live(types,data,fn,selector);
},undelegate:function(selector,types,fn){if(arguments.length===0){return this.unbind("live");}else{return this.die(types,null,fn,selector);}},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){if(this[0]){var event=jQuery.Event(type);
event.preventDefault();event.stopPropagation();jQuery.event.trigger(event,data,this[0]);return event.result;}},toggle:function(fn){var args=arguments,i=1;while(i<args.length){jQuery.proxy(fn,args[i++]);}return this.click(jQuery.proxy(fn,function(event){var lastToggle=(jQuery.data(this,"lastToggle"+fn.guid)||0)%i;
jQuery.data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false;}));},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});var liveMap={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};
jQuery.each(["live","die"],function(i,name){jQuery.fn[name]=function(types,data,fn,origSelector){var type,i=0,match,namespaces,preType,selector=origSelector||this.selector,context=origSelector?this:jQuery(this.context);if(jQuery.isFunction(data)){fn=data;data=undefined;}types=(types||"").split(" ");while((type=types[i++])!=null){match=rnamespaces.exec(type);
namespaces="";if(match){namespaces=match[0];type=type.replace(rnamespaces,"");}if(type==="hover"){types.push("mouseenter"+namespaces,"mouseleave"+namespaces);continue;}preType=type;if(type==="focus"||type==="blur"){types.push(liveMap[type]+namespaces);type=type+namespaces;}else{type=(liveMap[type]||type)+namespaces;
}if(name==="live"){context.each(function(){jQuery.event.add(this,liveConvert(type,selector),{data:data,selector:selector,handler:fn,origType:type,origHandler:fn,preType:preType});});}else{context.unbind(liveConvert(type,selector),fn);}}return this;};});function liveHandler(event){var stop,elems=[],selectors=[],args=arguments,related,match,handleObj,elem,j,i,l,data,events=jQuery.data(this,"events");
if(event.liveFired===this||!events||!events.live||event.button&&event.type==="click"){return;}event.liveFired=this;var live=events.live.slice(0);for(j=0;j<live.length;j++){handleObj=live[j];if(handleObj.origType.replace(rnamespaces,"")===event.type){selectors.push(handleObj.selector);}else{live.splice(j--,1);
}}match=jQuery(event.target).closest(selectors,event.currentTarget);for(i=0,l=match.length;i<l;i++){for(j=0;j<live.length;j++){handleObj=live[j];if(match[i].selector===handleObj.selector){elem=match[i].elem;related=null;if(handleObj.preType==="mouseenter"||handleObj.preType==="mouseleave"){related=jQuery(event.relatedTarget).closest(handleObj.selector)[0];
}if(!related||related!==elem){elems.push({elem:elem,handleObj:handleObj});}}}}for(i=0,l=elems.length;i<l;i++){match=elems[i];event.currentTarget=match.elem;event.data=match.handleObj.data;event.handleObj=match.handleObj;if(match.handleObj.origHandler.apply(match.elem,args)===false){stop=false;break;}}return stop;
}function liveConvert(type,selector){return"live."+(type&&type!=="*"?type+".":"")+selector.replace(/\./g,"`").replace(/ /g,"&");}jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error").split(" "),function(i,name){jQuery.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name);
};if(jQuery.attrFn){jQuery.attrFn[name]=true;}});if(window.attachEvent&&!window.addEventListener){window.attachEvent("onunload",function(){for(var id in jQuery.cache){if(jQuery.cache[id].handle){try{jQuery.event.remove(jQuery.cache[id].handle.elem);}catch(e){}}}});
/*
 * Sizzle CSS Selector Engine - v1.0
 *  Copyright 2009, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
}(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true;
[0,0].sort(function(){baseHasDuplicate=false;return 0;});var Sizzle=function(selector,context,results,seed){results=results||[];var origContext=context=context||document;if(context.nodeType!==1&&context.nodeType!==9){return[];}if(!selector||typeof selector!=="string"){return results;}var parts=[],m,set,checkSet,extra,prune=true,contextXML=isXML(context),soFar=selector;
while((chunker.exec(""),m=chunker.exec(soFar))!==null){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break;}}if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context);}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);
while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift();}set=posProcess(selector,set);}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){var ret=Sizzle.find(parts.shift(),context,contextXML);
context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0];}if(context){var ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;
if(parts.length>0){checkSet=makeArray(set);}else{prune=false;}while(parts.length){var cur=parts.pop(),pop=cur;if(!Expr.relative[cur]){cur="";}else{pop=parts.pop();}if(pop==null){pop=context;}Expr.relative[cur](checkSet,pop,contextXML);}}else{checkSet=parts=[];}}if(!checkSet){checkSet=set;}if(!checkSet){Sizzle.error(cur||selector);
}if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet);}else{if(context&&context.nodeType===1){for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&contains(context,checkSet[i]))){results.push(set[i]);}}}else{for(var i=0;
checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i]);}}}}}else{makeArray(checkSet,results);}if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results);}return results;};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);
if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1);}}}}return results;};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set);};Sizzle.find=function(expr,context,isXML){var set,match;if(!expr){return[];}for(var i=0,l=Expr.order.length;
i<l;i++){var type=Expr.order[i],match;if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(/\\/g,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break;}}}}if(!set){set=context.getElementsByTagName("*");
}return{set:set,expr:expr};};Sizzle.filter=function(expr,set,inplace,not){var old=expr,result=[],curLoop=set,match,anyFound,isXMLFilter=set&&set[0]&&isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){var filter=Expr.filter[type],found,item,left=match[1];
anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue;}if(curLoop===result){result=[];}if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true;}else{if(match===true){continue;}}}if(match){for(var i=0;(item=curLoop[i])!=null;
i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true;}else{curLoop[i]=false;}}else{if(pass){result.push(item);anyFound=true;}}}}}if(found!==undefined){if(!inplace){curLoop=result;}expr=expr.replace(Expr.match[type],"");if(!anyFound){return[];
}break;}}}if(expr===old){if(anyFound==null){Sizzle.error(expr);}else{break;}}old=expr;}return curLoop;};Sizzle.error=function(msg){throw"Syntax error, unrecognized expression: "+msg;};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href");
}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase();}for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part;
}}if(isPartStrNotTag){Sizzle.filter(part,checkSet,true);}},">":function(checkSet,part){var isPartStr=typeof part==="string";if(isPartStr&&!/\W/.test(part)){part=part.toLowerCase();for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false;
}}}else{for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part;}}if(isPartStr){Sizzle.filter(part,checkSet,true);}}},"":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();
checkFn=dirNodeCheck;}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML);},"~":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck;}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML);
}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?[m]:[];}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;
i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i]);}}return ret.length===0?null:ret;}},TAG:function(match,context){return context.getElementsByTagName(match[1]);}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(/\\/g,"")+" ";if(isXML){return match;
}for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem);}}else{if(inplace){curLoop[i]=false;}}}}return false;},ID:function(match){return match[1].replace(/\\/g,"");},TAG:function(match,curLoop){return match[1].toLowerCase();
},CHILD:function(match){if(match[1]==="nth"){var test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0;}match[0]=done++;return match;},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");
if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name];}if(match[2]==="~="){match[4]=" "+match[4]+" ";}return match;},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop);
}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret);}return false;}}else{if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true;}}return match;},POS:function(match){match.unshift(true);return match;}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden";
},disabled:function(elem){return elem.disabled===true;},checked:function(elem){return elem.checked===true;},selected:function(elem){elem.parentNode.selectedIndex;return elem.selected===true;},parent:function(elem){return !!elem.firstChild;},empty:function(elem){return !elem.firstChild;},has:function(elem,i,match){return !!Sizzle(match[3],elem).length;
},header:function(elem){return/h\d/i.test(elem.nodeName);},text:function(elem){return"text"===elem.type;},radio:function(elem){return"radio"===elem.type;},checkbox:function(elem){return"checkbox"===elem.type;},file:function(elem){return"file"===elem.type;},password:function(elem){return"password"===elem.type;
},submit:function(elem){return"submit"===elem.type;},image:function(elem){return"image"===elem.type;},reset:function(elem){return"reset"===elem.type;},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button";},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName);
}},setFilters:{first:function(elem,i){return i===0;},last:function(elem,i,match,array){return i===array.length-1;},even:function(elem,i){return i%2===0;},odd:function(elem,i){return i%2===1;},lt:function(elem,i,match){return i<match[3]-0;},gt:function(elem,i,match){return i>match[3]-0;},nth:function(elem,i,match){return match[3]-0===i;
},eq:function(elem,i,match){return match[3]-0===i;}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array);}else{if(name==="contains"){return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;}else{if(name==="not"){var not=match[3];
for(var i=0,l=not.length;i<l;i++){if(not[i]===elem){return false;}}return true;}else{Sizzle.error("Syntax error, unrecognized expression: "+name);}}}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false;
}}if(type==="first"){return true;}node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false;}}return true;case"nth":var first=match[2],last=match[3];if(first===1&&last===0){return true;}var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;
for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count;}}parent.sizcache=doneName;}var diff=elem.nodeIndex-last;if(first===0){return diff===0;}else{return(diff%first===0&&diff/first>=0);}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match;
},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match;},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1;},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];
return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false;
},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array);}}}};var origPOS=Expr.match.POS;for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source);Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,function(all,num){return"\\"+(num-0+1);
}));}var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results;}return array;};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType;}catch(e){makeArray=function(array,results){var ret=results||[];
if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array);}else{if(typeof array.length==="number"){for(var i=0,l=array.length;i<l;i++){ret.push(array[i]);}}else{for(var i=0;array[i];i++){ret.push(array[i]);}}}return ret;};}var sortOrder;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b){hasDuplicate=true;
}return a.compareDocumentPosition?-1:1;}var ret=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(ret===0){hasDuplicate=true;}return ret;};}else{if("sourceIndex" in document.documentElement){sortOrder=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b){hasDuplicate=true;}return a.sourceIndex?-1:1;
}var ret=a.sourceIndex-b.sourceIndex;if(ret===0){hasDuplicate=true;}return ret;};}else{if(document.createRange){sortOrder=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b){hasDuplicate=true;}return a.ownerDocument?-1:1;}var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();
aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);var ret=aRange.compareBoundaryPoints(Range.START_TO_END,bRange);if(ret===0){hasDuplicate=true;}return ret;};}}}function getText(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue;
}else{if(elem.nodeType!==8){ret+=getText(elem.childNodes);}}}return ret;}(function(){var form=document.createElement("div"),id="script"+(new Date).getTime();form.innerHTML="<a name='"+id+"'/>";var root=document.documentElement;root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);
return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[];}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match;
};}root.removeChild(form);root=form=null;})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];
for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i]);}}results=tmp;}return results;};}div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2);
};}div=null;})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div");div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return;}Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&context.nodeType===9&&!isXML(context)){try{return makeArray(context.querySelectorAll(query),extra);
}catch(e){}}return oldSizzle(query,context,extra,seed);};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop];}div=null;})();}(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return;
}div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return;}Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1]);}};div=null;})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;
i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break;}if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i;}if(elem.nodeName.toLowerCase()===cur){match=elem;break;}elem=elem[dir];}checkSet[i]=match;
}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break;}if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i;
}if(typeof cur!=="string"){if(elem===cur){match=true;break;}}else{if(Sizzle.filter(cur,[elem]).length>0){match=elem;break;}}}elem=elem[dir];}checkSet[i]=match;}}}var contains=document.compareDocumentPosition?function(a,b){return !!(a.compareDocumentPosition(b)&16);}:function(a,b){return a!==b&&(a.contains?a.contains(b):true);
};var isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};var posProcess=function(selector,context){var tmpSet=[],later="",match,root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];
selector=selector.replace(Expr.match.PSEUDO,"");}selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet);}return Sizzle.filter(later,tmpSet);};jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.filters;jQuery.unique=Sizzle.uniqueSort;
jQuery.text=getText;jQuery.isXMLDoc=isXML;jQuery.contains=contains;return;window.Sizzle=Sizzle;})();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,slice=Array.prototype.slice;var winnow=function(elements,qualifier,keep){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return !!qualifier.call(elem,i,elem)===keep;
});}else{if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep;});}else{if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1;});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep);
}else{qualifier=jQuery.filter(qualifier,filtered);}}}}return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep;});};jQuery.fn.extend({find:function(selector){var ret=this.pushStack("","find",selector),length=0;for(var i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);
if(i>0){for(var n=length;n<ret.length;n++){for(var r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break;}}}}}return ret;},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});
},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector);},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector);},is:function(selector){return !!selector&&jQuery.filter(selector,this).length>0;},closest:function(selectors,context){if(jQuery.isArray(selectors)){var ret=[],cur=this[0],match,matches={},selector;
if(cur&&selectors.length){for(var i=0,l=selectors.length;i<l;i++){selector=selectors[i];if(!matches[selector]){matches[selector]=jQuery.expr.match.POS.test(selector)?jQuery(selector,context||this.context):selector;}}while(cur&&cur.ownerDocument&&cur!==context){for(selector in matches){match=matches[selector];
if(match.jquery?match.index(cur)>-1:jQuery(cur).is(match)){ret.push({selector:selector,elem:cur});delete matches[selector];}}cur=cur.parentNode;}}return ret;}var pos=jQuery.expr.match.POS.test(selectors)?jQuery(selectors,context||this.context):null;return this.map(function(i,cur){while(cur&&cur.ownerDocument&&cur!==context){if(pos?pos.index(cur)>-1:jQuery(cur).is(selectors)){return cur;
}cur=cur.parentNode;}return null;});},index:function(elem){if(!elem||typeof elem==="string"){return jQuery.inArray(this[0],elem?jQuery(elem):this.parent().children());}return jQuery.inArray(elem.jquery?elem[0]:elem,this);},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context||this.context):jQuery.makeArray(selector),all=jQuery.merge(this.get(),set);
return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all));},andSelf:function(){return this.add(this.prevObject);}});function isDisconnected(node){return !node||!node.parentNode||node.parentNode.nodeType===11;}jQuery.each({parent:function(elem){var parent=elem.parentNode;
return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return jQuery.dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until);},next:function(elem){return jQuery.nth(elem,2,"nextSibling");},prev:function(elem){return jQuery.nth(elem,2,"previousSibling");
},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until);},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem);
},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);
if(!runtil.test(name)){selector=until;}if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret);}ret=this.length>1?jQuery.unique(ret):ret;if((this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)){ret=ret.reverse();}return this.pushStack(ret,name,slice.call(arguments).join(","));
};});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")";}return jQuery.find.matches(expr,elems);},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur);
}cur=cur[dir];}return matched;},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType===1&&++num===result){break;}}return cur;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n);}}return r;}});var rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/(<([\w:]+)[^>]*?)\/>/g,rselfClosing=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnocache=/<script|<object|<embed|<option|<style/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,fcloseTag=function(all,front,tag){return rselfClosing.test(tag)?all:front+"></"+tag+">";
},wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};
wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"div<div>","</div>"];}jQuery.fn.extend({text:function(text){if(jQuery.isFunction(text)){return this.each(function(i){var self=jQuery(this);
self.text(text.call(this,i,self.text()));});}if(typeof text!=="object"&&text!==undefined){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text));}return jQuery.text(this);},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));
});}if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild;}return elem;}).append(this);}return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));
});}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);
}}).end();},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.insertBefore(elem,this.firstChild);}});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this);
});}else{if(arguments.length){var set=jQuery(arguments[0]);set.push.apply(set,this.toArray());return this.pushStack(set,"before",arguments);}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});}else{if(arguments.length){var set=this.pushStack(this,"after",arguments);
set.push.apply(set,jQuery(arguments[0]).toArray());return set;}}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem]);
}if(elem.parentNode){elem.parentNode.removeChild(elem);}}}return this;},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));}while(elem.firstChild){elem.removeChild(elem.firstChild);}}return this;},clone:function(events){var ret=this.map(function(){if(!jQuery.support.noCloneEvent&&!jQuery.isXMLDoc(this)){var html=this.outerHTML,ownerDocument=this.ownerDocument;
if(!html){var div=ownerDocument.createElement("div");div.appendChild(this.cloneNode(true));html=div.innerHTML;}return jQuery.clean([html.replace(rinlinejQuery,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(rleadingWhitespace,"")],ownerDocument)[0];}else{return this.cloneNode(true);}});if(events===true){cloneCopyEvent(this,ret);
cloneCopyEvent(this.find("*"),ret.find("*"));}return ret;},html:function(value){if(value===undefined){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(rinlinejQuery,""):null;}else{if(typeof value==="string"&&!rnocache.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,fcloseTag);
try{for(var i=0,l=this.length;i<l;i++){if(this[i].nodeType===1){jQuery.cleanData(this[i].getElementsByTagName("*"));this[i].innerHTML=value;}}}catch(e){this.empty().append(value);}}else{if(jQuery.isFunction(value)){this.each(function(i){var self=jQuery(this),old=self.html();self.empty().append(function(){return value.call(this,i,old);
});});}else{this.empty().append(value);}}}return this;},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old));});}if(typeof value!=="string"){value=jQuery(value).detach();
}return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value);}else{jQuery(parent).append(value);}});}else{return this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value);}},detach:function(selector){return this.remove(selector,true);
},domManip:function(args,table,callback){var results,first,value=args[0],scripts=[],fragment,parent;if(!jQuery.support.checkClone&&arguments.length===3&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback,true);});}if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);
args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback);});}if(this[0]){parent=value&&value.parentNode;if(jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length){results={fragment:parent};}else{results=buildFragment(args,this,scripts);
}fragment=results.fragment;if(fragment.childNodes.length===1){first=fragment=fragment.firstChild;}else{first=fragment.firstChild;}if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length;i<l;i++){callback.call(table?root(this[i],first):this[i],i>0||results.cacheable||this.length>1?fragment.cloneNode(true):fragment);
}}if(scripts.length){jQuery.each(scripts,evalScript);}}return this;function root(elem,cur){return jQuery.nodeName(elem,"table")?(elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody"))):elem;}}});function cloneCopyEvent(orig,ret){var i=0;ret.each(function(){if(this.nodeName!==(orig[i]&&orig[i].nodeName)){return;
}var oldData=jQuery.data(orig[i++]),curData=jQuery.data(this,oldData),events=oldData&&oldData.events;if(events){delete curData.handle;curData.events={};for(var type in events){for(var handler in events[type]){jQuery.event.add(this,type,events[type][handler],events[type][handler].data);}}}});}function buildFragment(args,nodes,scripts){var fragment,cacheable,cacheresults,doc=(nodes&&nodes[0]?nodes[0].ownerDocument||nodes[0]:document);
if(args.length===1&&typeof args[0]==="string"&&args[0].length<512&&doc===document&&!rnocache.test(args[0])&&(jQuery.support.checkClone||!rchecked.test(args[0]))){cacheable=true;cacheresults=jQuery.fragments[args[0]];if(cacheresults){if(cacheresults!==1){fragment=cacheresults;}}}if(!fragment){fragment=doc.createDocumentFragment();
jQuery.clean(args,doc,fragment,scripts);}if(cacheable){jQuery.fragments[args[0]]=cacheresults?fragment:1;}return{fragment:fragment,cacheable:cacheable};}jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;
if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);return this;}else{for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(true):this).get();jQuery.fn[original].apply(jQuery(insert[i]),elems);ret=ret.concat(elems);}return this.pushStack(ret,name,insert.selector);
}};});jQuery.extend({clean:function(elems,context,fragment,scripts){context=context||document;if(typeof context.createElement==="undefined"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;}var ret=[];for(var i=0,elem;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+="";
}if(!elem){continue;}if(typeof elem==="string"&&!rhtml.test(elem)){elem=context.createTextNode(elem);}else{if(typeof elem==="string"){elem=elem.replace(rxhtmlTag,fcloseTag);var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div");
div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild;}if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(var j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j]);
}}}if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);}elem=div.childNodes;}}if(elem.nodeType){ret.push(elem);}else{ret=jQuery.merge(ret,elem);}}if(fragment){for(var i=0;ret[i];i++){if(scripts&&jQuery.nodeName(ret[i],"script")&&(!ret[i].type||ret[i].type.toLowerCase()==="text/javascript")){scripts.push(ret[i].parentNode?ret[i].parentNode.removeChild(ret[i]):ret[i]);
}else{if(ret[i].nodeType===1){ret.splice.apply(ret,[i+1,0].concat(jQuery.makeArray(ret[i].getElementsByTagName("script"))));}fragment.appendChild(ret[i]);}}}return ret;},cleanData:function(elems){var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;
(elem=elems[i])!=null;i++){id=elem[jQuery.expando];if(id){data=cache[id];if(data.events){for(var type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{removeEvent(elem,type,data.handle);}}}if(deleteExpando){delete elem[jQuery.expando];}else{if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);
}}delete cache[id];}}}});var rexclude=/z-?index|font-?weight|opacity|zoom|line-?height/i,ralpha=/alpha\([^)]*\)/,ropacity=/opacity=([^)]*)/,rfloat=/float/i,rdashAlpha=/-([a-z])/ig,rupper=/([A-Z])/g,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssWidth=["Left","Right"],cssHeight=["Top","Bottom"],getComputedStyle=document.defaultView&&document.defaultView.getComputedStyle,styleFloat=jQuery.support.cssFloat?"cssFloat":"styleFloat",fcamelCase=function(all,letter){return letter.toUpperCase();
};jQuery.fn.css=function(name,value){return access(this,name,value,true,function(elem,name,value){if(value===undefined){return jQuery.curCSS(elem,name);}if(typeof value==="number"&&!rexclude.test(name)){value+="px";}jQuery.style(elem,name,value);});};jQuery.extend({style:function(elem,name,value){if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined;
}if((name==="width"||name==="height")&&parseFloat(value)<0){value=undefined;}var style=elem.style||elem,set=value!==undefined;if(!jQuery.support.opacity&&name==="opacity"){if(set){style.zoom=1;var opacity=parseInt(value,10)+""==="NaN"?"":"alpha(opacity="+value*100+")";var filter=style.filter||jQuery.curCSS(elem,"filter")||"";
style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):opacity;}return style.filter&&style.filter.indexOf("opacity=")>=0?(parseFloat(ropacity.exec(style.filter)[1])/100)+"":"";}if(rfloat.test(name)){name=styleFloat;}name=name.replace(rdashAlpha,fcamelCase);if(set){style[name]=value;}return style[name];
},css:function(elem,name,force,extra){if(name==="width"||name==="height"){var val,props=cssShow,which=name==="width"?cssWidth:cssHeight;function getWH(){val=name==="width"?elem.offsetWidth:elem.offsetHeight;if(extra==="border"){return;}jQuery.each(which,function(){if(!extra){val-=parseFloat(jQuery.curCSS(elem,"padding"+this,true))||0;
}if(extra==="margin"){val+=parseFloat(jQuery.curCSS(elem,"margin"+this,true))||0;}else{val-=parseFloat(jQuery.curCSS(elem,"border"+this+"Width",true))||0;}});}if(elem.offsetWidth!==0){getWH();}else{jQuery.swap(elem,props,getWH);}return Math.max(0,Math.round(val));}return jQuery.curCSS(elem,name,force);
},curCSS:function(elem,name,force){var ret,style=elem.style,filter;if(!jQuery.support.opacity&&name==="opacity"&&elem.currentStyle){ret=ropacity.test(elem.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return ret===""?"1":ret;}if(rfloat.test(name)){name=styleFloat;}if(!force&&style&&style[name]){ret=style[name];
}else{if(getComputedStyle){if(rfloat.test(name)){name="float";}name=name.replace(rupper,"-$1").toLowerCase();var defaultView=elem.ownerDocument.defaultView;if(!defaultView){return null;}var computedStyle=defaultView.getComputedStyle(elem,null);if(computedStyle){ret=computedStyle.getPropertyValue(name);
}if(name==="opacity"&&ret===""){ret="1";}}else{if(elem.currentStyle){var camelCase=name.replace(rdashAlpha,fcamelCase);ret=elem.currentStyle[name]||elem.currentStyle[camelCase];if(!rnumpx.test(ret)&&rnum.test(ret)){var left=style.left,rsLeft=elem.runtimeStyle.left;elem.runtimeStyle.left=elem.currentStyle.left;
style.left=camelCase==="fontSize"?"1em":(ret||0);ret=style.pixelLeft+"px";style.left=left;elem.runtimeStyle.left=rsLeft;}}}}return ret;},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name];}callback.call(elem);for(var name in options){elem.style[name]=old[name];
}}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight,skip=elem.nodeName.toLowerCase()==="tr";return width===0&&height===0&&!skip?true:width>0&&height>0&&!skip?false:jQuery.curCSS(elem,"display")==="none";};jQuery.expr.filters.visible=function(elem){return !jQuery.expr.filters.hidden(elem);
};}var jsc=now(),rscript=/<script(.|\s)*?\/script>/gi,rselectTextarea=/select|textarea/i,rinput=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,jsre=/=\?(&|$)/,rquery=/\?/,rts=/(\?|&)_=.*?(&|$)/,rurl=/^(\w+:)?\/\/([^\/?#]+)/,r20=/%20/g,_load=jQuery.fn.load;
jQuery.fn.extend({load:function(url,params,callback){if(typeof url!=="string"){return _load.call(this,url);}else{if(!this.length){return this;}}var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}var type="GET";if(params){if(jQuery.isFunction(params)){callback=params;
params=null;}else{if(typeof params==="object"){params=jQuery.param(params,jQuery.ajaxSettings.traditional);type="POST";}}}var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(res,status){if(status==="success"||status==="notmodified"){self.html(selector?jQuery("<div />").append(res.responseText.replace(rscript,"")).find(selector):res.responseText);
}if(callback){self.each(callback,[res.responseText,status,res]);}}});return this;},serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type));
}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val};}):{name:elem.name,value:val};}).get();}});jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f);
};});jQuery.extend({get:function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=null;}return jQuery.ajax({type:"GET",url:url,data:data,success:callback,dataType:type});},getScript:function(url,callback){return jQuery.get(url,null,callback,"script");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");
},post:function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data={};}return jQuery.ajax({type:"POST",url:url,data:data,success:callback,dataType:type});},ajaxSetup:function(settings){jQuery.extend(jQuery.ajaxSettings,settings);},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:window.XMLHttpRequest&&(window.location.protocol!=="file:"||!window.ActiveXObject)?function(){return new window.XMLHttpRequest();
}:function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP");}catch(e){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(origSettings){var s=jQuery.extend(true,{},jQuery.ajaxSettings,origSettings);
var jsonp,status,data,callbackContext=origSettings&&origSettings.context||s,type=s.type.toUpperCase();if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}if(s.dataType==="jsonp"){if(type==="GET"){if(!jsre.test(s.url)){s.url+=(rquery.test(s.url)?"&":"?")+(s.jsonp||"callback")+"=?";
}}else{if(!s.data||!jsre.test(s.data)){s.data=(s.data?s.data+"&":"")+(s.jsonp||"callback")+"=?";}}s.dataType="json";}if(s.dataType==="json"&&(s.data&&jsre.test(s.data)||jsre.test(s.url))){jsonp=s.jsonpCallback||("jsonp"+jsc++);if(s.data){s.data=(s.data+"").replace(jsre,"="+jsonp+"$1");}s.url=s.url.replace(jsre,"="+jsonp+"$1");
s.dataType="script";window[jsonp]=window[jsonp]||function(tmp){data=tmp;success();complete();window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}if(head){head.removeChild(script);}};}if(s.dataType==="script"&&s.cache===null){s.cache=false;}if(s.cache===false&&type==="GET"){var ts=now();var ret=s.url.replace(rts,"$1_="+ts+"$2");
s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"");}if(s.data&&type==="GET"){s.url+=(rquery.test(s.url)?"&":"?")+s.data;}if(s.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart");}var parts=rurl.exec(s.url),remote=parts&&(parts[1]&&parts[1]!==location.protocol||parts[2]!==location.host);
if(s.dataType==="script"&&type==="GET"&&remote){var head=document.getElementsByTagName("head")[0]||document.documentElement;var script=document.createElement("script");script.src=s.url;if(s.scriptCharset){script.charset=s.scriptCharset;}if(!jsonp){var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;
success();complete();script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}}};}head.insertBefore(script,head.firstChild);return undefined;}var requestDone=false;var xhr=s.xhr();if(!xhr){return;}if(s.username){xhr.open(type,s.url,s.async,s.username,s.password);
}else{xhr.open(type,s.url,s.async);}try{if(s.data||origSettings&&origSettings.contentType){xhr.setRequestHeader("Content-Type",s.contentType);}if(s.ifModified){if(jQuery.lastModified[s.url]){xhr.setRequestHeader("If-Modified-Since",jQuery.lastModified[s.url]);}if(jQuery.etag[s.url]){xhr.setRequestHeader("If-None-Match",jQuery.etag[s.url]);
}}if(!remote){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");}xhr.setRequestHeader("Accept",s.dataType&&s.accepts[s.dataType]?s.accepts[s.dataType]+", */*":s.accepts._default);}catch(e){}if(s.beforeSend&&s.beforeSend.call(callbackContext,xhr,s)===false){if(s.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop");
}xhr.abort();return false;}if(s.global){trigger("ajaxSend",[xhr,s]);}var onreadystatechange=xhr.onreadystatechange=function(isTimeout){if(!xhr||xhr.readyState===0||isTimeout==="abort"){if(!requestDone){complete();}requestDone=true;if(xhr){xhr.onreadystatechange=jQuery.noop;}}else{if(!requestDone&&xhr&&(xhr.readyState===4||isTimeout==="timeout")){requestDone=true;
xhr.onreadystatechange=jQuery.noop;status=isTimeout==="timeout"?"timeout":!jQuery.httpSuccess(xhr)?"error":s.ifModified&&jQuery.httpNotModified(xhr,s.url)?"notmodified":"success";var errMsg;if(status==="success"){try{data=jQuery.httpData(xhr,s.dataType,s);}catch(err){status="parsererror";errMsg=err;}}if(status==="success"||status==="notmodified"){if(!jsonp){success();
}}else{jQuery.handleError(s,xhr,status,errMsg);}complete();if(isTimeout==="timeout"){xhr.abort();}if(s.async){xhr=null;}}}};try{var oldAbort=xhr.abort;xhr.abort=function(){if(xhr){oldAbort.call(xhr);}onreadystatechange("abort");};}catch(e){}if(s.async&&s.timeout>0){setTimeout(function(){if(xhr&&!requestDone){onreadystatechange("timeout");
}},s.timeout);}try{xhr.send(type==="POST"||type==="PUT"||type==="DELETE"?s.data:null);}catch(e){jQuery.handleError(s,xhr,null,e);complete();}if(!s.async){onreadystatechange();}function success(){if(s.success){s.success.call(callbackContext,data,status,xhr);}if(s.global){trigger("ajaxSuccess",[xhr,s]);
}}function complete(){if(s.complete){s.complete.call(callbackContext,xhr,status);}if(s.global){trigger("ajaxComplete",[xhr,s]);}if(s.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop");}}function trigger(type,args){(s.context?jQuery(s.context):jQuery.event).trigger(type,args);}return xhr;},handleError:function(s,xhr,status,e){if(s.error){s.error.call(s.context||s,xhr,status,e);
}if(s.global){(s.context?jQuery(s.context):jQuery.event).trigger("ajaxError",[xhr,s,e]);}},active:0,httpSuccess:function(xhr){try{return !xhr.status&&location.protocol==="file:"||(xhr.status>=200&&xhr.status<300)||xhr.status===304||xhr.status===1223||xhr.status===0;}catch(e){}return false;},httpNotModified:function(xhr,url){var lastModified=xhr.getResponseHeader("Last-Modified"),etag=xhr.getResponseHeader("Etag");
if(lastModified){jQuery.lastModified[url]=lastModified;}if(etag){jQuery.etag[url]=etag;}return xhr.status===304||xhr.status===0;},httpData:function(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml=type==="xml"||!type&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==="parsererror"){jQuery.error("parsererror");
}if(s&&s.dataFilter){data=s.dataFilter(data,type);}if(typeof data==="string"){if(type==="json"||!type&&ct.indexOf("json")>=0){data=jQuery.parseJSON(data);}else{if(type==="script"||!type&&ct.indexOf("javascript")>=0){jQuery.globalEval(data);}}}return data;},param:function(a,traditional){var s=[];if(traditional===undefined){traditional=jQuery.ajaxSettings.traditional;
}if(jQuery.isArray(a)||a.jquery){jQuery.each(a,function(){add(this.name,this.value);});}else{for(var prefix in a){buildParams(prefix,a[prefix]);}}return s.join("&").replace(r20,"+");function buildParams(prefix,obj){if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||/\[\]$/.test(prefix)){add(prefix,v);
}else{buildParams(prefix+"["+(typeof v==="object"||jQuery.isArray(v)?i:"")+"]",v);}});}else{if(!traditional&&obj!=null&&typeof obj==="object"){jQuery.each(obj,function(k,v){buildParams(prefix+"["+k+"]",v);});}else{add(prefix,obj);}}}function add(key,value){value=jQuery.isFunction(value)?value():value;
s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);}}});var elemdisplay={},rfxtypes=/toggle|show|hide/,rfxnum=/^([+-]=)?([\d+-.]+)(.*)$/,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];
jQuery.fn.extend({show:function(speed,callback){if(speed||speed===0){return this.animate(genFx("show",3),speed,callback);}else{for(var i=0,l=this.length;i<l;i++){var old=jQuery.data(this[i],"olddisplay");this[i].style.display=old||"";if(jQuery.css(this[i],"display")==="none"){var nodeName=this[i].nodeName,display;
if(elemdisplay[nodeName]){display=elemdisplay[nodeName];}else{var elem=jQuery("<"+nodeName+" />").appendTo("body");display=elem.css("display");if(display==="none"){display="block";}elem.remove();elemdisplay[nodeName]=display;}jQuery.data(this[i],"olddisplay",display);}}for(var j=0,k=this.length;j<k;j++){this[j].style.display=jQuery.data(this[j],"olddisplay")||"";
}return this;}},hide:function(speed,callback){if(speed||speed===0){return this.animate(genFx("hide",3),speed,callback);}else{for(var i=0,l=this.length;i<l;i++){var old=jQuery.data(this[i],"olddisplay");if(!old&&old!=="none"){jQuery.data(this[i],"olddisplay",jQuery.css(this[i],"display"));}}for(var j=0,k=this.length;
j<k;j++){this[j].style.display="none";}return this;}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2){var bool=typeof fn==="boolean";if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2)){this._toggle.apply(this,arguments);}else{if(fn==null||bool){this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");
jQuery(this)[state?"show":"hide"]();});}else{this.animate(genFx("toggle",3),fn,fn2);}}return this;},fadeTo:function(speed,to,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,callback);},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);
if(jQuery.isEmptyObject(prop)){return this.each(optall.complete);}return this[optall.queue===false?"each":"queue"](function(){var opt=jQuery.extend({},optall),p,hidden=this.nodeType===1&&jQuery(this).is(":hidden"),self=this;for(p in prop){var name=p.replace(rdashAlpha,fcamelCase);if(p!==name){prop[name]=prop[p];
delete prop[p];p=name;}if(prop[p]==="hide"&&hidden||prop[p]==="show"&&!hidden){return opt.complete.call(this);}if((p==="height"||p==="width")&&this.style){opt.display=jQuery.css(this,"display");opt.overflow=this.style.overflow;}if(jQuery.isArray(prop[p])){(opt.specialEasing=opt.specialEasing||{})[p]=prop[p][1];
prop[p]=prop[p][0];}}if(opt.overflow!=null){this.style.overflow="hidden";}opt.curAnim=jQuery.extend({},prop);jQuery.each(prop,function(name,val){var e=new jQuery.fx(self,opt,name);if(rfxtypes.test(val)){e[val==="toggle"?hidden?"show":"hide":val](prop);}else{var parts=rfxnum.exec(val),start=e.cur(true)||0;
if(parts){var end=parseFloat(parts[2]),unit=parts[3]||"px";if(unit!=="px"){self.style[name]=(end||1)+unit;start=((end||1)/e.cur(true))*start;self.style[name]=start+unit;}if(parts[1]){end=((parts[1]==="-="?-1:1)*end)+start;}e.custom(start,end,unit);}else{e.custom(start,val,"");}}});return true;});},stop:function(clearQueue,gotoEnd){var timers=jQuery.timers;
if(clearQueue){this.queue([]);}this.each(function(){for(var i=timers.length-1;i>=0;i--){if(timers[i].elem===this){if(gotoEnd){timers[i](true);}timers.splice(i,1);}}});if(!gotoEnd){this.dequeue();}return this;}});jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(name,props){jQuery.fn[name]=function(speed,callback){return this.animate(props,speed,callback);
};});jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&typeof speed==="object"?speed:{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:jQuery.fx.speeds[opt.duration]||jQuery.fx.speeds._default;
opt.old=opt.complete;opt.complete=function(){if(opt.queue!==false){jQuery(this).dequeue();}if(jQuery.isFunction(opt.old)){opt.old.call(this);}};return opt;},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p;},swing:function(p,n,firstNum,diff){return((-Math.cos(p*Math.PI)/2)+0.5)*diff+firstNum;
}},timers:[],fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;if(!options.orig){options.orig={};}}});jQuery.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this);}(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);
if((this.prop==="height"||this.prop==="width")&&this.elem.style){this.elem.style.display="block";}},cur:function(force){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];}var r=parseFloat(jQuery.css(this.elem,this.prop,force));return r&&r>-10000?r:parseFloat(jQuery.curCSS(this.elem,this.prop))||0;
},custom:function(from,to,unit){this.startTime=now();this.start=from;this.end=to;this.unit=unit||this.unit||"px";this.now=this.start;this.pos=this.state=0;var self=this;function t(gotoEnd){return self.step(gotoEnd);}t.elem=this.elem;if(t()&&jQuery.timers.push(t)&&!timerId){timerId=setInterval(jQuery.fx.tick,13);
}},show:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());jQuery(this.elem).show();},hide:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop);this.options.hide=true;
this.custom(this.cur(),0);},step:function(gotoEnd){var t=now(),done=true;if(gotoEnd||t>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var i in this.options.curAnim){if(this.options.curAnim[i]!==true){done=false;}}if(done){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;
var old=jQuery.data(this.elem,"olddisplay");this.elem.style.display=old?old:this.options.display;if(jQuery.css(this.elem,"display")==="none"){this.elem.style.display="block";}}if(this.options.hide){jQuery(this.elem).hide();}if(this.options.hide||this.options.show){for(var p in this.options.curAnim){jQuery.style(this.elem,p,this.options.orig[p]);
}}this.options.complete.call(this.elem);}return false;}else{var n=t-this.startTime;this.state=n/this.options.duration;var specialEasing=this.options.specialEasing&&this.options.specialEasing[this.prop];var defaultEasing=this.options.easing||(jQuery.easing.swing?"swing":"linear");this.pos=jQuery.easing[specialEasing||defaultEasing](this.state,n,0,1,this.options.duration);
this.now=this.start+((this.end-this.start)*this.pos);this.update();}return true;}};jQuery.extend(jQuery.fx,{tick:function(){var timers=jQuery.timers;for(var i=0;i<timers.length;i++){if(!timers[i]()){timers.splice(i--,1);}}if(!timers.length){jQuery.fx.stop();}},stop:function(){clearInterval(timerId);timerId=null;
},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now);},_default:function(fx){if(fx.elem.style&&fx.elem.style[fx.prop]!=null){fx.elem.style[fx.prop]=(fx.prop==="width"||fx.prop==="height"?Math.max(0,fx.now):fx.now)+fx.unit;}else{fx.elem[fx.prop]=fx.now;
}}}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};}function genFx(type,num){var obj={};jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type;});return obj;
}if("getBoundingClientRect" in document.documentElement){jQuery.fn.offset=function(options){var elem=this[0];if(options){return this.each(function(i){jQuery.offset.setOffset(this,options,i);});}if(!elem||!elem.ownerDocument){return null;}if(elem===elem.ownerDocument.body){return jQuery.offset.bodyOffset(elem);
}var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(self.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop)-clientTop,left=box.left+(self.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft)-clientLeft;
return{top:top,left:left};};}else{jQuery.fn.offset=function(options){var elem=this[0];if(options){return this.each(function(i){jQuery.offset.setOffset(this,options,i);});}if(!elem||!elem.ownerDocument){return null;}if(elem===elem.ownerDocument.body){return jQuery.offset.bodyOffset(elem);}jQuery.offset.initialize();
var offsetParent=elem.offsetParent,prevOffsetParent=elem,doc=elem.ownerDocument,computedStyle,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){if(jQuery.offset.supportsFixedPosition&&prevComputedStyle.position==="fixed"){break;
}computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle;top-=elem.scrollTop;left-=elem.scrollLeft;if(elem===offsetParent){top+=elem.offsetTop;left+=elem.offsetLeft;if(jQuery.offset.doesNotAddBorder&&!(jQuery.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(elem.nodeName))){top+=parseFloat(computedStyle.borderTopWidth)||0;
left+=parseFloat(computedStyle.borderLeftWidth)||0;}prevOffsetParent=offsetParent,offsetParent=elem.offsetParent;}if(jQuery.offset.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible"){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;
}prevComputedStyle=computedStyle;}if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static"){top+=body.offsetTop;left+=body.offsetLeft;}if(jQuery.offset.supportsFixedPosition&&prevComputedStyle.position==="fixed"){top+=Math.max(docElem.scrollTop,body.scrollTop);left+=Math.max(docElem.scrollLeft,body.scrollLeft);
}return{top:top,left:left};};}jQuery.offset={initialize:function(){var body=document.body,container=document.createElement("div"),innerDiv,checkDiv,table,td,bodyMarginTop=parseFloat(jQuery.curCSS(body,"marginTop",true))||0,html="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
jQuery.extend(container.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});container.innerHTML=html;body.insertBefore(container,body.firstChild);innerDiv=container.firstChild;checkDiv=innerDiv.firstChild;td=innerDiv.nextSibling.firstChild.firstChild;
this.doesNotAddBorder=(checkDiv.offsetTop!==5);this.doesAddBorderForTableAndCells=(td.offsetTop===5);checkDiv.style.position="fixed",checkDiv.style.top="20px";this.supportsFixedPosition=(checkDiv.offsetTop===20||checkDiv.offsetTop===15);checkDiv.style.position=checkDiv.style.top="";innerDiv.style.overflow="hidden",innerDiv.style.position="relative";
this.subtractsBorderForOverflowNotVisible=(checkDiv.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==bodyMarginTop);body.removeChild(container);body=container=innerDiv=checkDiv=table=td=null;jQuery.offset.initialize=jQuery.noop;},bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;
jQuery.offset.initialize();if(jQuery.offset.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.curCSS(body,"marginTop",true))||0;left+=parseFloat(jQuery.curCSS(body,"marginLeft",true))||0;}return{top:top,left:left};},setOffset:function(elem,options,i){if(/static/.test(jQuery.curCSS(elem,"position"))){elem.style.position="relative";
}var curElem=jQuery(elem),curOffset=curElem.offset(),curTop=parseInt(jQuery.curCSS(elem,"top",true),10)||0,curLeft=parseInt(jQuery.curCSS(elem,"left",true),10)||0;if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset);}var props={top:(options.top-curOffset.top)+curTop,left:(options.left-curOffset.left)+curLeft};
if("using" in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({position:function(){if(!this[0]){return null;}var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=/^body|html$/i.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();
offset.top-=parseFloat(jQuery.curCSS(elem,"marginTop",true))||0;offset.left-=parseFloat(jQuery.curCSS(elem,"marginLeft",true))||0;parentOffset.top+=parseFloat(jQuery.curCSS(offsetParent[0],"borderTopWidth",true))||0;parentOffset.left+=parseFloat(jQuery.curCSS(offsetParent[0],"borderLeftWidth",true))||0;
return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!/^body|html$/i.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent;
}return offsetParent;});}});jQuery.each(["Left","Top"],function(i,name){var method="scroll"+name;jQuery.fn[method]=function(val){var elem=this[0],win;if(!elem){return null;}if(val!==undefined){return this.each(function(){win=getWindow(this);if(win){win.scrollTo(!i?val:jQuery(win).scrollLeft(),i?val:jQuery(win).scrollTop());
}else{this[method]=val;}});}else{win=getWindow(elem);return win?("pageXOffset" in win)?win[i?"pageYOffset":"pageXOffset"]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method];}};});function getWindow(elem){return("scrollTo" in elem&&elem.document)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false;
}jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn["inner"+name]=function(){return this[0]?jQuery.css(this[0],type,false,"padding"):null;};jQuery.fn["outer"+name]=function(margin){return this[0]?jQuery.css(this[0],type,false,margin?"margin":"border"):null;};jQuery.fn[type]=function(size){var elem=this[0];
if(!elem){return size==null?null:this;}if(jQuery.isFunction(size)){return this.each(function(i){var self=jQuery(this);self[type](size.call(this,i,self[type]()));});}return("scrollTo" in elem&&elem.document)?elem.document.compatMode==="CSS1Compat"&&elem.document.documentElement["client"+name]||elem.document.body["client"+name]:(elem.nodeType===9)?Math.max(elem.documentElement["client"+name],elem.body["scroll"+name],elem.documentElement["scroll"+name],elem.body["offset"+name],elem.documentElement["offset"+name]):size===undefined?jQuery.css(elem,type):this.css(type,typeof size==="string"?size:size+"px");
};});window.jQuery=window.$=jQuery;})(window);var Spry;if(!Spry){Spry={};}if(!Spry.Utils){Spry.Utils={};}Spry.Utils.submitForm=function(form,callback,opts){if(!form){return true;}if(typeof form=="string"){form=Spry.$(form)||document.forms[form];}var frmOpts={};frmOpts.method=form.getAttribute("method");
frmOpts.url=form.getAttribute("action")||document.location.href;frmOpts.enctype=form.getAttribute("enctype");Spry.Utils.setOptions(frmOpts,opts);var submitData=Spry.Utils.extractParamsFromForm(form,frmOpts.elements);if(frmOpts.additionalData){submitData+="&"+frmOpts.additionalData;}if(!frmOpts.enctype||frmOpts.enctype.toLowerCase()!="multipart/form-data"){frmOpts.method=(frmOpts.method&&frmOpts.method.toLowerCase()=="post")?"POST":"GET";
if(frmOpts.method=="GET"){if(frmOpts.url.indexOf("?")==-1){frmOpts.url+="?";}else{frmOpts.url+="&";}frmOpts.url+=submitData;}else{if(!frmOpts.headers){frmOpts.headers={};}if(!frmOpts.headers["Content-Type"]||frmOpts.headers["Content-Type"].indexOf("application/x-www-form-urlencoded")==-1){frmOpts.headers["Content-Type"]="application/x-www-form-urlencoded";
}frmOpts.postData=submitData;}Spry.Utils.loadURL(frmOpts.method,frmOpts.url,true,callback,frmOpts);return false;}return true;};Spry.Utils.extractParamsFromForm=function(form,elements){if(!form){return"";}if(typeof form=="string"){form=document.getElementById(form)||document.forms[form];}var formElements;
if(elements){formElements=","+elements.join(",")+",";}var compStack=new Array();var el;for(var i=0;i<form.elements.length;i++){el=form.elements[i];if(el.disabled||!el.name){continue;}if(!el.type){continue;}if(formElements&&formElements.indexOf(","+el.name+",")==-1){continue;}switch(el.type.toLowerCase()){case"text":case"password":case"textarea":case"hidden":case"submit":compStack.push(encodeURIComponent(el.name)+"="+encodeURIComponent(el.value));
break;case"select-one":var value="";var opt;if(el.selectedIndex>=0){opt=el.options[el.selectedIndex];value=opt.value||opt.text;}compStack.push(encodeURIComponent(el.name)+"="+encodeURIComponent(value));break;case"select-multiple":for(var j=0;j<el.length;j++){if(el.options[j].selected){value=el.options[j].value||el.options[j].text;
compStack.push(encodeURIComponent(el.name)+"="+encodeURIComponent(value));}}break;case"checkbox":case"radio":if(el.checked){compStack.push(encodeURIComponent(el.name)+"="+encodeURIComponent(el.value));}break;default:break;}}return compStack.join("&");};if(!Spry.Widget){Spry.Widget={};}Spry.Widget.HTMLPanel=function(ele,opts){Spry.Widget.HTMLPanel.Notifier.call(this);
this.element=Spry.Widget.HTMLPanel.$(ele);this.evalScripts=Spry.Widget.HTMLPanel.evalScripts;this.loadingContentClass="HTMLPanelLoadingContent";this.errorContentClass="HTMLPanelErrorContent";this.loadingStateContent="";this.errorStateContent="";this.loadingStateClass="HTMLPanelLoading";this.errorStateClass="HTMLPanelError";
this.pendingRequest=null;Spry.Widget.HTMLPanel.setOptions(this,opts);var elements=this.element.getElementsByTagName("*");var numElements=elements.length;var errorEle=null;var loadingEle=null;var d=document.createElement("div");for(var i=0;i<numElements&&(!loadingEle||!errorEle);i++){var e=elements[i];
if(Spry.Widget.HTMLPanel.hasClassName(e,this.loadingContentClass)){loadingEle=e;}if(Spry.Widget.HTMLPanel.hasClassName(e,this.errorContentClass)){errorEle=e;}}if(loadingEle){this.loadingStateContent=Spry.Widget.HTMLPanel.removeAndExtractContent(loadingEle,this.loadingContentClass);}if(errorEle){this.errorStateContent=Spry.Widget.HTMLPanel.removeAndExtractContent(errorEle,this.errorContentClass);
}};Spry.Widget.HTMLPanel.evalScripts=false;Spry.Widget.HTMLPanel.Notifier=function(){this.observers=[];this.suppressNotifications=0;};Spry.Widget.HTMLPanel.Notifier.prototype.addObserver=function(observer){if(!observer){return;}var len=this.observers.length;for(var i=0;i<len;i++){if(this.observers[i]==observer){return;
}}this.observers[len]=observer;};Spry.Widget.HTMLPanel.Notifier.prototype.removeObserver=function(observer){if(!observer){return;}for(var i=0;i<this.observers.length;i++){if(this.observers[i]==observer){this.observers.splice(i,1);break;}}};Spry.Widget.HTMLPanel.Notifier.prototype.notifyObservers=function(methodName,data){if(!methodName){return;
}if(!this.suppressNotifications){var len=this.observers.length;for(var i=0;i<len;i++){var obs=this.observers[i];if(obs){if(typeof obs=="function"){obs(methodName,this,data);}else{if(obs[methodName]){obs[methodName](this,data);}}}}}};Spry.Widget.HTMLPanel.Notifier.prototype.enableNotifications=function(){if(--this.suppressNotifications<0){this.suppressNotifications=0;
Spry.Debug.reportError("Unbalanced enableNotifications() call!\n");}};Spry.Widget.HTMLPanel.Notifier.prototype.disableNotifications=function(){++this.suppressNotifications;};Spry.Widget.HTMLPanel.prototype=new Spry.Widget.HTMLPanel.Notifier();Spry.Widget.HTMLPanel.prototype.constructor=Spry.Widget.HTMLPanel;
Spry.Widget.HTMLPanel.$=function(ele){if(ele&&typeof ele=="string"){return document.getElementById(ele);}return ele;};Spry.Widget.HTMLPanel.setOptions=function(dstObj,srcObj,ignoreUndefinedProps){if(srcObj){for(var optionName in srcObj){if(ignoreUndefinedProps&&srcObj[optionName]==undefined){continue;
}dstObj[optionName]=srcObj[optionName];}}};Spry.Widget.HTMLPanel.addClassName=function(ele,className){ele=Spry.Widget.HTMLPanel.$(ele);if(!ele||!className||(ele.className&&ele.className.search(new RegExp("\\b"+className+"\\b"))!=-1)){return;}ele.className+=(ele.className?" ":"")+className;};Spry.Widget.HTMLPanel.removeClassName=function(ele,className){ele=Spry.Widget.HTMLPanel.$(ele);
if(Spry.Widget.HTMLPanel.hasClassName(ele,className)){ele.className=ele.className.replace(new RegExp("\\s*\\b"+className+"\\b","g"),"");}};Spry.Widget.HTMLPanel.hasClassName=function(ele,className){ele=Spry.Widget.HTMLPanel.$(ele);if(!ele||!className||!ele.className||ele.className.search(new RegExp("\\b"+className+"\\b"))==-1){return false;
}return true;};Spry.Widget.HTMLPanel.removeAndExtractContent=function(ele,className){var d=document.createElement("div");if(ele){d.appendChild(ele);if(className){Spry.Widget.HTMLPanel.removeClassName(ele,className);}}return d.innerHTML;};Spry.Widget.HTMLPanel.findNodeById=function(id,node){if(node&&node.nodeType==1){if(node.id==id){return node;
}var child=node.firstChild;while(child){var result=Spry.Widget.HTMLPanel.findNodeById(id,child);if(result){return result;}child=child.nextSibling;}}return null;};Spry.Widget.HTMLPanel.disableSrcReferences=function(source){if(source){source=source.replace(/<(img|script|link|frame|iframe|input)([^>]+)>/gi,function(a,b,c){return"<"+b+c.replace(/\b(src|href)\s*=/gi,function(a,b){return"spry_"+b+"=";
})+">";});}return source;};Spry.Widget.HTMLPanel.enableSrcReferences=function(source){source=source.replace(/<(img|script|link|frame|iframe|input)([^>]+)>/gi,function(a,b,c){return"<"+b+c.replace(/\bspry_(src|href)\s*=/gi,function(a,b){return b+"=";})+">";});return source;};Spry.Widget.HTMLPanel.getFragByID=function(id,contentStr){var frag=Spry.Widget.HTMLPanel.disableSrcReferences(contentStr);
var div=document.createElement("div");div.innerHTML=frag;frag="";var node=Spry.Widget.HTMLPanel.findNodeById(id,div);if(node){frag=node.innerHTML;}return Spry.Widget.HTMLPanel.enableSrcReferences(frag);};Spry.Widget.HTMLPanel.prototype.setContent=function(contentStr,id){var data={content:contentStr,id:id};
this.notifyObservers("onPreUpdate",data);contentStr=data.content;id=data.id;if(typeof id!="undefined"){contentStr=Spry.Widget.HTMLPanel.getFragByID(id,contentStr);}Spry.Widget.HTMLPanel.setInnerHTML(this.element,contentStr,!this.evalScripts);this.removeStateClasses();this.notifyObservers("onPostUpdate",data);
};Spry.Widget.HTMLPanel.prototype.loadContent=function(url,opts){if(!this.element){return;}this.cancelLoad();if(!opts){opts=new Object;}opts.url=opts.url?opts.url:url;opts.method=opts.method?opts.method:"GET";opts.async=opts.async?opts.async:true;opts.id=opts.id?opts.id:undefined;var self=this;opts.errorCallback=function(req){self.onLoadError(req);
};this.notifyObservers("onPreLoad",opts);if(this.loadingStateContent){this.setContent(this.loadingStateContent);}Spry.Widget.HTMLPanel.addClassName(this.element,this.loadingStateClass);this.pendingRequest=Spry.Widget.HTMLPanel.loadURL(opts.method,opts.url,opts.async,function(req){self.onLoadSuccessful(req);
},opts);};Spry.Widget.HTMLPanel.prototype.cancelLoad=function(){try{if(this.pendingRequest&&this.pendingRequest.xhRequest){var xhr=this.pendingRequest.xhRequest;if(xhr.abort){xhr.abort();}xhr.onreadystatechange=null;this.notifyObservers("onLoadCancelled",this.pendingRequest);}}catch(e){}this.pendingRequest=null;
};Spry.Widget.HTMLPanel.prototype.removeStateClasses=function(){Spry.Widget.HTMLPanel.removeClassName(this.element,this.loadingStateClass);Spry.Widget.HTMLPanel.removeClassName(this.element,this.errorStateClass);};Spry.Widget.HTMLPanel.prototype.onLoadSuccessful=function(req){this.notifyObservers("onPostLoad",req);
this.setContent(req.xhRequest.responseText,req.id);this.pendingRequest=null;};Spry.Widget.HTMLPanel.prototype.onLoadError=function(req){this.notifyObservers("onLoadError",req);if(this.errorStateContent){this.setContent(this.errorStateContent);}Spry.Widget.HTMLPanel.addClassName(this.element,this.errorStateClass);
this.pendingRequest=null;};Spry.Widget.HTMLPanel.msProgIDs=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0"];Spry.Widget.HTMLPanel.createXMLHttpRequest=function(){var req=null;if(window.ActiveXObject){while(!req&&Spry.Widget.HTMLPanel.msProgIDs.length){try{req=new ActiveXObject(Spry.Widget.HTMLPanel.msProgIDs[0]);
}catch(e){req=null;}if(!req){Spry.Widget.HTMLPanel.msProgIDs.splice(0,1);}}}if(!req&&window.XMLHttpRequest){try{req=new XMLHttpRequest();}catch(e){req=null;}}return req;};Spry.Widget.HTMLPanel.loadURL=function(method,url,async,callback,opts){var req=new Object;req.method=method;req.url=url;req.async=async;
req.successCallback=callback;Spry.Widget.HTMLPanel.setOptions(req,opts);try{req.xhRequest=Spry.Widget.HTMLPanel.createXMLHttpRequest();if(!req.xhRequest){return null;}if(req.async){req.xhRequest.onreadystatechange=function(){Spry.Widget.HTMLPanel.loadURL.callback(req);};}req.xhRequest.open(method,req.url,req.async,req.username,req.password);
if(req.headers){for(var name in req.headers){req.xhRequest.setRequestHeader(name,req.headers[name]);}}req.xhRequest.send(req.postData);if(!req.async){Spry.Widget.HTMLPanel.loadURL.callback(req);}}catch(e){if(req.errorCallback){req.errorCallback(req);}req=null;}return req;};Spry.Widget.HTMLPanel.loadURL.callback=function(req){if(!req||req.xhRequest.readyState!=4){return;
}if(req.successCallback&&(req.xhRequest.status==200||req.xhRequest.status==0)){req.successCallback(req);}else{if(req.errorCallback){req.errorCallback(req);}}};Spry.Widget.HTMLPanel.eval=function(str){return eval(str);};Spry.Widget.HTMLPanel.setInnerHTML=function(ele,str,preventScripts){if(!ele){return;
}if(!str){str="";}ele=Spry.Widget.HTMLPanel.$(ele);var scriptExpr="<script[^>]*>(.|s|\n|\r)*?<\/script>";ele.innerHTML=str.replace(new RegExp(scriptExpr,"img"),"");if(preventScripts){return;}var matches=str.match(new RegExp(scriptExpr,"img"));if(matches){var numMatches=matches.length;for(var i=0;i<numMatches;
i++){var s=matches[i].replace(/<script[^>]*>[\s\r\n]*(<\!--)?|(-->)?[\s\r\n]*<\/script>/img,"");Spry.Widget.HTMLPanel.eval(s);}}};if(!Spry.Widget){Spry.Widget={};}Spry.Widget.Tooltip=function(tooltip_element,trigger_selector,options){options=Spry.Widget.Utils.firstValid(options,{});this.init(trigger_selector,tooltip_element,options);
if(Spry.Widget.Tooltip.onloadDidFire){this.attachBehaviors();}Spry.Widget.Tooltip.loadQueue.push(this);};Spry.Widget.Tooltip.prototype.init=function(trigger_element,tooltip_element,options){var Utils=Spry.Widget.Utils;this.triggerElements=Utils.getElementsByClassName(trigger_element);this.tooltipElement=Utils.getElement(tooltip_element);
options.showDelay=parseInt(Utils.firstValid(options.showDelay,0),10);options.hideDelay=parseInt(Utils.firstValid(options.hideDelay,0),10);if(typeof this.triggerElements=="undefined"||!(this.triggerElements.length>0)){Utils.showError('The element(s) "'+trigger_element+'" do not exist in the page');return false;
}if(typeof this.tooltipElement=="undefined"||!this.tooltipElement){Utils.showError('The element "'+tooltip_element+'" do not exists in the page');return false;}this.listenersAttached=false;this.hoverClass="";this.followMouse=false;this.offsetX=15;this.offsetY=15;this.closeOnTooltipLeave=false;this.useEffect=false;
this.iframeabs=false;Utils.setOptions(this,options);this.animator=null;for(var i=0;i<this.triggerElements.length;i++){if(!this.triggerElements[i].className){this.triggerElements[i].className="";}}if(this.useEffect){switch(this.useEffect.toString().toLowerCase()){case"blind":this.useEffect="Blind";break;
case"fade":this.useEffect="Fade";break;default:this.useEffect=false;}}this.visibleTooltip=false;if(Spry.Widget.Utils.getStyleProperty(this.tooltipElement,"display")!="none"){this.tooltipElement.style.display="none";}if(typeof this.offsetX!="numeric"){this.offsetX=parseInt(this.offsetX,10);}if(isNaN(this.offsetX)){this.offsetX=0;
}if(typeof this.offsetY!="numeric"){this.offsetY=parseInt(this.offsetY,10);}if(isNaN(this.offsetY)){this.offsetY=0;}this.tooltipElement.style.position="absolute";this.tooltipElement.style.top="0px";this.tooltipElement.style.left="0px";};Spry.Widget.Tooltip.onloadDidFire=false;Spry.Widget.Tooltip.loadQueue=[];
Spry.Widget.Tooltip.addLoadListener=function(handler){if(typeof window.addEventListener!="undefined"){window.addEventListener("load",handler,false);}else{if(typeof document.addEventListener!="undefined"){document.addEventListener("load",handler,false);}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",handler);
}}}};Spry.Widget.Tooltip.processLoadQueue=function(handler){Spry.Widget.Tooltip.onloadDidFire=true;var q=Spry.Widget.Tooltip.loadQueue;var qlen=q.length;for(var i=0;i<qlen;i++){if(!q[i].listenersAttached){q[i].attachBehaviors();}}};Spry.Widget.Tooltip.addLoadListener(Spry.Widget.Tooltip.processLoadQueue);
Spry.Widget.Tooltip.prototype.addClassName=function(ele,className){if(!ele||!className){return;}if(ele.className.indexOf(className)==-1){ele.className+=(ele.className?" ":"")+className;}};Spry.Widget.Tooltip.prototype.removeClassName=function(ele,className){if(!ele||!className){return;}ele.className=ele.className.replace(new RegExp("\\s*\\b"+className+"\\b","g"),"");
};Spry.Widget.Tooltip.prototype.showTooltip=function(){if(!this.visibleTooltip){this.tooltipElement.style.visibility="hidden";this.tooltipElement.style.zIndex="99999";this.tooltipElement.style.display="block";}Spry.Widget.Utils.putElementAt(this.tooltipElement,this.pos,{x:this.offsetX,y:this.offsetY},true,this.iframeabs);
if(Spry.is.ie&&Spry.is.version=="6"){this.createIframeLayer(this.tooltipElement);}if(!this.visibleTooltip){if(this.useEffect){if(typeof this.showEffect=="undefined"){this.showEffect=new Spry.Widget.Tooltip[this.useEffect](this.tooltipElement,{from:0,to:1});}this.showEffect.start();}else{this.tooltipElement.style.visibility="visible";
}}this.visibleTooltip=true;};Spry.Widget.Tooltip.prototype.hideTooltip=function(quick){if(this.useEffect&&!quick){if(typeof this.hideEffect=="undefined"){this.hideEffect=new Spry.Widget.Tooltip[this.useEffect](this.tooltipElement,{from:1,to:0});}this.hideEffect.start();}else{if(typeof this.showEffect!="undefined"){this.showEffect.stop();
}this.tooltipElement.style.display="none";}if(Spry.is.ie&&Spry.is.version=="6"){this.removeIframeLayer(this.tooltipElement);}if(this.hoverClass&&!this.hideTimer){for(var i=0;i<this.triggerElements.length;i++){this.removeClassName(this.triggerElements[i],this.hoverClass);}}this.visibleTooltip=false;};
Spry.Widget.Tooltip.prototype.displayTooltip=function(show){if(this.tooltipElement){if(this.hoverClass){for(var i=0;i<this.triggerElements.length;i++){this.removeClassName(this.triggerElements[i],this.hoverClass);}}if(show){if(this.hideTimer){clearInterval(this.hideTimer);delete (this.hideTimer);}if(this.hoverClass){if(typeof this.triggerHighlight!="undefined"){this.addClassName(this.triggerHighlight,this.hoverClass);
}}var self=this;this.showTimer=setTimeout(function(){self.showTooltip();},this.showDelay);}else{if(this.showTimer){clearInterval(this.showTimer);delete (this.showTimer);}var self=this;this.hideTimer=setTimeout(function(){self.hideTooltip();},this.hideDelay);}}this.refreshTimeout();};Spry.Widget.Tooltip.prototype.onMouseOverTrigger=function(e){var target="";
if(Spry.is.ie){target=e.srcElement;}else{target=e.target;}var contains=Spry.Widget.Utils.contains;for(var i=0;i<this.triggerElements.length;i++){if(contains(this.triggerElements[i],target)){target=this.triggerElements[i];break;}}if(i==this.triggerElements.length){return;}if(this.visibleTooltip&&this.triggerHighlight&&this.triggerHighlight==target){if(this.hideTimer){clearInterval(this.hideTimer);
delete (this.hideTimer);}if(this.hoverClass){if(typeof this.triggerHighlight!="undefined"){this.addClassName(this.triggerHighlight,this.hoverClass);}}return;}var pos=Spry.Widget.Utils.getAbsoluteMousePosition(e);if(this.iframeabs){this.pos={x:pos.x+this.offsetX,y:0};}else{this.pos={x:pos.x+this.offsetX,y:pos.y+this.offsetY};
}this.triggerHighlight=target;Spry.Widget.Tooltip.closeAll();this.displayTooltip(true);};Spry.Widget.Tooltip.prototype.onMouseMoveTrigger=function(e){var pos=Spry.Widget.Utils.getAbsoluteMousePosition(e);this.pos={x:pos.x+this.offsetX,y:pos.y+this.offsetY};if(this.visibleTooltip){this.showTooltip();}};
Spry.Widget.Tooltip.prototype.onMouseOutTrigger=function(e){var target="";if(Spry.is.ie){target=e.toElement;}else{target=e.relatedTarget;}var contains=Spry.Widget.Utils.contains;for(var i=0;i<this.triggerElements.length;i++){if(contains(this.triggerElements[i],target)){return;}}this.displayTooltip(false);
};Spry.Widget.Tooltip.prototype.onMouseOutTooltip=function(e){var target="";if(Spry.is.ie){target=e.toElement;}else{target=e.relatedTarget;}var contains=Spry.Widget.Utils.contains;if(contains(this.tooltipElement,target)){return;}this.displayTooltip(false);};Spry.Widget.Tooltip.prototype.onMouseOverTooltip=function(e){if(this.hideTimer){clearInterval(this.hideTimer);
delete (this.hideTimer);}if(this.hoverClass){if(typeof this.triggerHighlight!="undefined"){this.addClassName(this.triggerHighlight,this.hoverClass);}}};Spry.Widget.Tooltip.prototype.refreshTimeout=function(){if(Spry.Widget.Tooltip.refreshTimeout!=null){clearTimeout(Spry.Widget.Tooltip.refreshTimeout);
Spry.Widget.Tooltip.refreshTimeout=null;}Spry.Widget.Tooltip.refreshTimeout=setTimeout("Spry.Widget.Tooltip.refreshAll()",100);};Spry.Widget.Tooltip.prototype.destroy=function(){for(var k in this){try{if(typeof this.k=="object"&&typeof this.k.destroy=="function"){this.k.destroy();}delete this.k;}catch(err){}}};
Spry.Widget.Tooltip.prototype.checkDestroyed=function(){if(!this.tooltipElement||this.tooltipElement.parentNode==null){return true;}return false;};Spry.Widget.Tooltip.prototype.attachBehaviors=function(){var self=this;var ev=Spry.Widget.Utils.addEventListener;for(var i=0;i<this.triggerElements.length;
i++){ev(this.triggerElements[i],"mouseover",function(e){self.onMouseOverTrigger(e||event);return true;},false);ev(this.triggerElements[i],"mouseout",function(e){self.onMouseOutTrigger(e||event);return true;},false);if(this.followMouse){ev(this.triggerElements[i],"mousemove",function(e){self.onMouseMoveTrigger(e||event);
return true;},false);}}if(this.closeOnTooltipLeave){ev(this.tooltipElement,"mouseover",function(e){self.onMouseOverTooltip(e||event);return true;},false);ev(this.tooltipElement,"mouseout",function(e){self.onMouseOutTooltip(e||event);return true;},false);}this.listenersAttached=true;};Spry.Widget.Tooltip.prototype.createIframeLayer=function(tooltip){if(typeof this.iframeLayer=="undefined"){var layer=document.createElement("iframe");
layer.tabIndex="-1";layer.src="/empty.html";layer.scrolling="no";layer.frameBorder="0";layer.className="iframeTooltip";tooltip.parentNode.appendChild(layer);this.iframeLayer=layer;}this.iframeLayer.style.left=tooltip.offsetLeft+"px";this.iframeLayer.style.top=tooltip.offsetTop+"px";this.iframeLayer.style.width=tooltip.offsetWidth+"px";
this.iframeLayer.style.height=tooltip.offsetHeight+"px";this.iframeLayer.style.display="block";};Spry.Widget.Tooltip.prototype.removeIframeLayer=function(tooltip){if(this.iframeLayer){this.iframeLayer.style.display="none";}};Spry.Widget.Tooltip.refreshAll=function(){var q=Spry.Widget.Tooltip.loadQueue;
var qlen=q.length;for(var i=0;i<qlen;i++){if(q[i].checkDestroyed()){q[i].destroy();q.splice(i,1);i--;qlen=q.length;}}};Spry.Widget.Tooltip.closeAll=function(){var q=Spry.Widget.Tooltip.loadQueue;var qlen=q.length;for(var i=0;i<qlen;i++){if(q[i].visibleTooltip){q[i].hideTooltip(true);}if(q[i].showTimer){clearTimeout(q[i].showTimer);
}if(q[i].hideTimer){clearTimeout(q[i].hideTimer);}}};Spry.Widget.Tooltip.Animator=function(element,opts){this.timer=null;this.fps=60;this.duration=500;this.startTime=0;this.transition=Spry.Widget.Tooltip.Animator.defaultTransition;this.onComplete=null;if(typeof element=="undefined"){return;}this.element=Spry.Widget.Utils.getElement(element);
Spry.Widget.Utils.setOptions(this,opts,true);this.interval=this.duration/this.fps;};Spry.Widget.Tooltip.Animator.defaultTransition=function(time,begin,finish,duration){time/=duration;return begin+((2-time)*time*finish);};Spry.Widget.Tooltip.Animator.prototype.start=function(){var self=this;this.startTime=(new Date).getTime();
this.beforeStart();this.timer=setInterval(function(){self.stepAnimation();},this.interval);};Spry.Widget.Tooltip.Animator.prototype.stop=function(){if(this.timer){clearTimeout(this.timer);}this.timer=null;};Spry.Widget.Tooltip.Animator.prototype.stepAnimation=function(){};Spry.Widget.Tooltip.Animator.prototype.beforeStart=function(){};
Spry.Widget.Tooltip.Animator.prototype.destroy=function(){for(var k in this){try{delete this.k;}catch(err){}}};Spry.Widget.Tooltip.Fade=function(element,opts){Spry.Widget.Tooltip.Animator.call(this,element,opts);if(Spry.is.ie){this.origOpacity=this.element.style.filter;}else{this.origOpacity=this.element.style.opacity;
}};Spry.Widget.Tooltip.Fade.prototype=new Spry.Widget.Tooltip.Animator();Spry.Widget.Tooltip.Fade.prototype.constructor=Spry.Widget.Tooltip.Fade;Spry.Widget.Tooltip.Fade.prototype.stepAnimation=function(){var curTime=(new Date).getTime();var elapsedTime=curTime-this.startTime;var i,obj;if(elapsedTime>=this.duration){this.beforeStop();
this.stop();return;}var ht=this.transition(elapsedTime,this.from,this.to-this.from,this.duration);if(Spry.is.ie){var filter=this.element.style.filter.replace(/alpha\s*\(\s*opacity\s*=\s*[0-9\.]{1,3}\)/,"");this.element.style.filter=filter+"alpha(opacity="+parseInt(ht*100,10)+")";}else{this.element.style.opacity=ht;
}this.element.style.visibility="visible";this.element.style.display="block";};Spry.Widget.Tooltip.Fade.prototype.beforeStop=function(){if(this.from>this.to){this.element.style.display="none";}if(Spry.is.mozilla){this.element.style.filter=this.origOpacity;}else{this.element.style.opacity=this.origOpacity;
}};Spry.Widget.Tooltip.Blind=function(element,opts){this.from=0;this.to=100;Spry.Widget.Tooltip.Animator.call(this,element,opts);this.element.style.visibility="hidden";this.element.style.display="block";this.origHeight=parseInt(Spry.Widget.Utils.getStyleProperty(this.element,"height"),10);if(isNaN(this.origHeight)){this.origHeight=this.element.offsetHeight;
}if(this.to==0){this.from=this.origHeight;}else{this.to=this.origHeight;}};Spry.Widget.Tooltip.Blind.prototype=new Spry.Widget.Tooltip.Animator();Spry.Widget.Tooltip.Blind.prototype.constructor=Spry.Widget.Tooltip.Blind;Spry.Widget.Tooltip.Blind.prototype.beforeStart=function(){this.origOverflow=Spry.Widget.Utils.getStyleProperty(this.element,"overflow");
this.element.style.overflow="hidden";};Spry.Widget.Tooltip.Blind.prototype.stepAnimation=function(){var curTime=(new Date).getTime();var elapsedTime=curTime-this.startTime;var i,obj;if(elapsedTime>=this.duration){this.beforeStop();this.stop();return;}var ht=this.transition(elapsedTime,this.from,this.to-this.from,this.duration);
this.element.style.height=Math.floor(ht)+"px";this.element.style.visibility="visible";this.element.style.display="block";};Spry.Widget.Tooltip.Blind.prototype.beforeStop=function(){this.element.style.overflow=this.origOverflow;if(this.from>this.to){this.element.style.display="none";}this.element.style.height=this.origHeight+"px";
};if(!Spry.Widget.Utils){Spry.Widget.Utils={};}Spry.Widget.Utils.setOptions=function(obj,optionsObj,ignoreUndefinedProps){if(!optionsObj){return;}for(var optionName in optionsObj){if(ignoreUndefinedProps&&optionsObj[optionName]==undefined){continue;}obj[optionName]=optionsObj[optionName];}};Spry.Widget.Utils.getElement=function(ele){if(ele&&typeof ele=="string"){return document.getElementById(ele);
}return ele;};Spry.Widget.Utils.getElementsByClassName=function(sel){if(!sel.length>0){return null;}var selectors=sel.split(",");var el=[];for(var i=0;i<selectors.length;i++){var cs=selectors[i];var chunk=cs.split(" ");var parents=[];parents[0]=[];parents[0][0]=document.body;for(var j=0;j<chunk.length;
j++){var tokens=Spry.Widget.Utils.getSelectorTokens(chunk[j]);for(var k=0;k<parents[j].length;k++){var childs=parents[j][k].getElementsByTagName("*");parents[j+1]=[];for(var l=0;l<childs.length;l++){if(Spry.Widget.Utils.hasSelector(childs[l],tokens)){parents[j+1].push(childs[l]);}}}}if(parents[j]){for(var k=0;
k<parents[j].length;k++){el.push(parents[j][k]);}}}return el;};Spry.Widget.Utils.firstValid=function(){var ret=null;var a=Spry.Widget.Utils.firstValid;for(var i=0;i<a.arguments.length;i++){if(typeof(a.arguments[i])!="undefined"){ret=a.arguments[i];break;}}return ret;};Spry.Widget.Utils.getSelectorTokens=function(str){str=str.replace(/\./g," .");
str=str.replace(/\#/g," #");str=str.replace(/^\s+|\s+$/g,"");return str.split(" ");};Spry.Widget.Utils.hasSelector=function(el,tokens){for(var i=0;i<tokens.length;i++){switch(tokens[i].charAt(0)){case".":if(!el.className||el.className.indexOf(tokens[i].substr(1))==-1){return false;}break;case"#":if(!el.id||el.id!=tokens[i].substr(1)){return false;
}break;default:if(el.nodeName.toLowerCase!=tokens[i]){return false;}break;}}return true;};Spry.Widget.Utils.addEventListener=function(element,eventType,handler,capture){try{if(element.addEventListener){element.addEventListener(eventType,handler,capture);}else{if(element.attachEvent){element.attachEvent("on"+eventType,handler);
}}}catch(e){}};Spry.Widget.Utils.getStyleProperty=function(element,prop){var value;var camelized=Spry.Widget.Utils.camelize(prop);try{if(element.style){value=element.style[camelized];}if(!value){if(document.defaultView&&document.defaultView.getComputedStyle){var css=document.defaultView.getComputedStyle(element,null);
value=css?css.getPropertyValue(prop):null;}else{if(element.currentStyle){value=element.currentStyle[camelized];}}}}catch(e){Spry.Effect.Utils.showError("Spry.Widget.Utils.getStyleProperty: "+e);}return value=="auto"?null:value;};Spry.Widget.Utils.camelize=function(str){if(str.indexOf("-")==-1){return str;
}var oStringList=str.split("-");var isFirstEntry=true;var camelizedString="";for(var i=0;i<oStringList.length;i++){if(oStringList[i].length>0){if(isFirstEntry){camelizedString=oStringList[i];isFirstEntry=false;}else{var s=oStringList[i];camelizedString+=s.charAt(0).toUpperCase()+s.substring(1);}}}return camelizedString;
};Spry.Widget.Utils.getPixels=function(m,s){var v=Spry.Widget.Utils.getStyleProperty(m,s);if(v=="medium"){v=2;}else{v=parseInt(v,10);}v=isNaN(v)?0:v;return v;};Spry.Widget.Utils.getAbsoluteMousePosition=function(ev){var pos={x:0,y:0};if(ev.pageX){pos.x=ev.pageX;}else{if(ev.clientX){pos.x=ev.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);
}}if(isNaN(pos.x)){pos.x=0;}if(ev.pageY){pos.y=ev.pageY;}else{if(ev.clientY){pos.y=ev.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);}}if(isNaN(pos.y)){pos.y=0;}return pos;};Spry.Widget.Utils.getBorderBox=function(el,doc,iframeabs){doc=doc||document;
if(typeof el=="string"){el=doc.getElementById(el);}if(!el){return false;}if(el.parentNode===null||Spry.Widget.Utils.getStyleProperty(el,"display")=="none"){return false;}var ret={x:0,y:0,width:0,height:0};var parent=null;var box;if(el.getBoundingClientRect){box=el.getBoundingClientRect();var scrollTop=doc.documentElement.scrollTop||doc.body.scrollTop;
var scrollLeft=doc.documentElement.scrollLeft||doc.body.scrollLeft;ret.x=box.left+scrollLeft;ret.y=box.top+scrollTop;ret.width=box.right-box.left;ret.height=box.bottom-box.top;}else{if(doc.getBoxObjectFor){box=doc.getBoxObjectFor(el);ret.x=box.x;ret.y=box.y;ret.width=box.width;ret.height=box.height;var btw=Spry.Widget.Utils.getPixels(el,"border-top-width");
var blw=Spry.Widget.Utils.getPixels(el,"border-left-width");ret.x-=blw;ret.y-=btw;}else{ret.x=el.offsetLeft;ret.y=el.offsetTop;ret.width=el.offsetWidth;ret.height=el.offsetHeight;parent=el.offsetParent;if(parent!=el){while(parent){ret.x+=parent.offsetLeft;ret.y+=parent.offsetTop;parent=parent.offsetParent;
}}var blw=Spry.Widget.Utils.getPixels(el,"border-left-width");var btw=Spry.Widget.Utils.getPixels(el,"border-top-width");ret.x-=blw;ret.y-=btw;var ua=navigator.userAgent.toLowerCase();if(Spry.is.opera||Spry.is.safari&&Spry.Widget.Utils.getStyleProperty(el,"position")=="absolute"){ret.y-=doc.body.offsetTop;
}}}if(el.parentNode){parent=el.parentNode;}else{parent=null;}while(parent&&parent.tagName!="BODY"&&parent.tagName!="HTML"){ret.x-=parent.scrollLeft;if(iframeabs){ret.y-=parent.scrollTop;}else{ret.y-=0;}if(parent.parentNode){parent=parent.parentNode;}else{parent=null;}}return ret;};Spry.Widget.Utils.setBorderBox=function(el,box){var pos=Spry.Widget.Utils.getBorderBox(el,el.ownerDocument);
if(pos===false){return false;}var delta={x:Spry.Widget.Utils.getPixels(el,"left"),y:Spry.Widget.Utils.getPixels(el,"top")};var new_pos={x:0,y:0,w:0,h:0};if(typeof box.x=="number"){new_pos.x=box.x-pos.x+delta.x;}if(typeof box.y=="number"){new_pos.y=box.y-pos.y+delta.y;}if(typeof box.x=="number"){el.style.left=new_pos.x+"px";
}if(typeof box.y=="number"){el.style.top=new_pos.y+"px";}return true;};Spry.Widget.Utils.putElementAt=function(source,target,offset,biv){biv=Spry.Widget.Utils.firstValid(biv,true);var source_box=Spry.Widget.Utils.getBorderBox(source,source.ownerDocument);Spry.Widget.Utils.setBorderBox(source,target);
if(biv){Spry.Widget.Utils.bringIntoView(source);}return true;};Spry.Widget.Utils.bringIntoView=function(source){var box=Spry.Widget.Utils.getBorderBox(source,source.ownerDocument);if(box===false){return false;}var current={x:Spry.Widget.Utils.getPixels(source,"left"),y:Spry.Widget.Utils.getPixels(source,"top")};
var delta={x:0,y:0};var offset_fix={x:0,y:0};var strictm=source.ownerDocument.compatMode=="CSS1Compat";var doc=(Spry.is.ie&&strictm||Spry.is.mozilla)?source.ownerDocument.documentElement:source.ownerDocument.body;offset_fix.x=Spry.Widget.Utils.getPixels(doc,"border-left-width");offset_fix.y=Spry.Widget.Utils.getPixels(doc,"border-top-width");
var st=doc.scrollTop;var ch=doc.clientHeight;var t=box.y+(Spry.is.ie?-offset_fix.y:offset_fix.y);var b=box.y+box.height+(Spry.is.ie?-offset_fix.y:offset_fix.y);if(b-st>ch){delta.y=ch-(b-st);if(t+delta.y<st){delta.y=st-t;}}else{if(t<st){delta.y=st-t;}}if(delta.y!=0){source.style.top=(current.y+delta.y)+"px";
}var sl=doc.scrollLeft;var cw=doc.clientWidth;var l=box.x+(Spry.is.ie?-offset_fix.x:offset_fix.x);var r=box.x+box.width+(Spry.is.ie?-offset_fix.x:offset_fix.x);if(r-sl>cw){delta.x=cw-(r-sl);if(l+delta.x<sl){delta.x=sl-l;}}else{if(l<sl){delta.x=sl-l;}}if(delta.x!=0){source.style.left=(current.x+delta.x)+"px";
}};Spry.Widget.Utils.contains=function(who,what){if(typeof who.contains=="object"){return what&&who&&(who==what||who.contains(what));}else{var el=what;while(el){try{if(el==who){return true;}el=el.parentNode;}catch(a){return false;}}return false;}};Spry.Widget.BrowserSniff=function(){var b=navigator.appName.toString();
var up=navigator.platform.toString();var ua=navigator.userAgent.toString();this.mozilla=this.ie=this.opera=r=false;var re_opera=/Opera.([0-9\.]*)/i;var re_msie=/MSIE.([0-9\.]*)/i;var re_gecko=/gecko/i;var re_safari=/safari\/([\d\.]*)/i;if(ua.match(re_opera)){r=ua.match(re_opera);this.opera=true;this.version=parseFloat(r[1]);
}else{if(ua.match(re_msie)){r=ua.match(re_msie);this.ie=true;this.version=parseFloat(r[1]);}else{if(ua.match(re_safari)){this.safari=true;this.version=1.4;}else{if(ua.match(re_gecko)){var re_gecko_version=/rv:\s*([0-9\.]+)/i;r=ua.match(re_gecko_version);this.mozilla=true;if(r!=null){this.version=parseFloat(r[1]);
}}}}}this.windows=this.mac=this.linux=false;this.Platform=ua.match(/windows/i)?"windows":(ua.match(/linux/i)?"linux":(ua.match(/mac/i)?"mac":ua.match(/unix/i)?"unix":"unknown"));this[this.Platform]=true;this.v=this.version;if(this.safari&&this.mac&&this.mozilla){this.mozilla=false;}};Spry.is=new Spry.Widget.BrowserSniff();
Spry.Widget.Utils.showError=function(msg){alert("Spry.Widget.Tooltip ERR: "+msg);};if(!Spry.Widget){Spry.Widget={};}Spry.Widget.TabbedPanels=function(element,opts){this.element=this.getElement(element);this.defaultTab=0;this.tabSelectedClass="TabbedPanelsTabSelected";this.tabHoverClass="TabbedPanelsTabHover";
this.tabFocusedClass="TabbedPanelsTabFocused";this.panelVisibleClass="TabbedPanelsContentVisible";this.focusElement=null;this.hasFocus=false;this.currentTabIndex=0;this.enableKeyboardNavigation=true;Spry.Widget.TabbedPanels.setOptions(this,opts);if(typeof(this.defaultTab)=="number"){if(this.defaultTab<0){this.defaultTab=0;
}else{var count=this.getTabbedPanelCount();if(this.defaultTab>=count){this.defaultTab=(count>1)?(count-1):0;}}this.defaultTab=this.getTabs()[this.defaultTab];}if(this.defaultTab){this.defaultTab=this.getElement(this.defaultTab);}this.attachBehaviors();};Spry.Widget.TabbedPanels.prototype.getElement=function(ele){if(ele&&typeof ele=="string"){return document.getElementById(ele);
}return ele;};Spry.Widget.TabbedPanels.prototype.getElementChildren=function(element){var children=[];var child=element.firstChild;while(child){if(child.nodeType==1){children.push(child);}child=child.nextSibling;}return children;};Spry.Widget.TabbedPanels.prototype.addClassName=function(ele,className){if(!ele||!className||(ele.className&&ele.className.search(new RegExp("\\b"+className+"\\b"))!=-1)){return;
}ele.className+=(ele.className?" ":"")+className;};Spry.Widget.TabbedPanels.prototype.removeClassName=function(ele,className){if(!ele||!className||(ele.className&&ele.className.search(new RegExp("\\b"+className+"\\b"))==-1)){return;}ele.className=ele.className.replace(new RegExp("\\s*\\b"+className+"\\b","g"),"");
};Spry.Widget.TabbedPanels.setOptions=function(obj,optionsObj,ignoreUndefinedProps){if(!optionsObj){return;}for(var optionName in optionsObj){if(ignoreUndefinedProps&&optionsObj[optionName]==undefined){continue;}obj[optionName]=optionsObj[optionName];}};Spry.Widget.TabbedPanels.prototype.getTabGroup=function(){if(this.element){var children=this.getElementChildren(this.element);
if(children.length){return children[0];}}return null;};Spry.Widget.TabbedPanels.prototype.getTabs=function(){var tabs=[];var tg=this.getTabGroup();if(tg){tabs=this.getElementChildren(tg);}return tabs;};Spry.Widget.TabbedPanels.prototype.getContentPanelGroup=function(){if(this.element){var children=this.getElementChildren(this.element);
if(children.length>1){return children[1];}}return null;};Spry.Widget.TabbedPanels.prototype.getContentPanels=function(){var panels=[];var pg=this.getContentPanelGroup();if(pg){panels=this.getElementChildren(pg);}return panels;};Spry.Widget.TabbedPanels.prototype.getIndex=function(ele,arr){ele=this.getElement(ele);
if(ele&&arr&&arr.length){for(var i=0;i<arr.length;i++){if(ele==arr[i]){return i;}}}return -1;};Spry.Widget.TabbedPanels.prototype.getTabIndex=function(ele){var i=this.getIndex(ele,this.getTabs());if(i<0){i=this.getIndex(ele,this.getContentPanels());}return i;};Spry.Widget.TabbedPanels.prototype.getCurrentTabIndex=function(){return this.currentTabIndex;
};Spry.Widget.TabbedPanels.prototype.getTabbedPanelCount=function(ele){return Math.min(this.getTabs().length,this.getContentPanels().length);};Spry.Widget.TabbedPanels.addEventListener=function(element,eventType,handler,capture){try{if(element.addEventListener){element.addEventListener(eventType,handler,capture);
}else{if(element.attachEvent){element.attachEvent("on"+eventType,handler);}}}catch(e){}};Spry.Widget.TabbedPanels.prototype.onTabClick=function(e,tab){this.showPanel(tab);if(e.preventDefault){e.preventDefault();}else{e.returnResult=false;}if(e.stopPropagation){e.stopPropagation();}else{e.cancelBubble=true;
}return false;};Spry.Widget.TabbedPanels.prototype.onTabMouseOver=function(e,tab){this.addClassName(tab,this.tabHoverClass);return false;};Spry.Widget.TabbedPanels.prototype.onTabMouseOut=function(e,tab){this.removeClassName(tab,this.tabHoverClass);return false;};Spry.Widget.TabbedPanels.prototype.onTabFocus=function(e,tab){this.hasFocus=true;
this.addClassName(tab,this.tabFocusedClass);return false;};Spry.Widget.TabbedPanels.prototype.onTabBlur=function(e,tab){this.hasFocus=false;this.removeClassName(tab,this.tabFocusedClass);return false;};Spry.Widget.TabbedPanels.ENTER_KEY=13;Spry.Widget.TabbedPanels.SPACE_KEY=32;Spry.Widget.TabbedPanels.prototype.onTabKeyDown=function(e,tab){var key=e.keyCode;
if(!this.hasFocus||(key!=Spry.Widget.TabbedPanels.ENTER_KEY&&key!=Spry.Widget.TabbedPanels.SPACE_KEY)){return true;}this.showPanel(tab);if(e.preventDefault){e.preventDefault();}else{e.returnResult=false;}if(e.stopPropagation){e.stopPropagation();}else{e.cancelBubble=true;}return false;};Spry.Widget.TabbedPanels.prototype.preorderTraversal=function(root,func){var stopTraversal=false;
if(root){stopTraversal=func(root);if(root.hasChildNodes()){var child=root.firstChild;while(!stopTraversal&&child){stopTraversal=this.preorderTraversal(child,func);try{child=child.nextSibling;}catch(e){child=null;}}}}return stopTraversal;};Spry.Widget.TabbedPanels.prototype.addPanelEventListeners=function(tab,panel){var self=this;
Spry.Widget.TabbedPanels.addEventListener(tab,"click",function(e){return self.onTabClick(e,tab);},false);Spry.Widget.TabbedPanels.addEventListener(tab,"mouseover",function(e){return self.onTabMouseOver(e,tab);},false);Spry.Widget.TabbedPanels.addEventListener(tab,"mouseout",function(e){return self.onTabMouseOut(e,tab);
},false);if(this.enableKeyboardNavigation){var tabIndexEle=null;var tabAnchorEle=null;this.preorderTraversal(tab,function(node){if(node.nodeType==1){var tabIndexAttr=tab.attributes.getNamedItem("tabindex");if(tabIndexAttr){tabIndexEle=node;return true;}if(!tabAnchorEle&&node.nodeName.toLowerCase()=="a"){tabAnchorEle=node;
}}return false;});if(tabIndexEle){this.focusElement=tabIndexEle;}else{if(tabAnchorEle){this.focusElement=tabAnchorEle;}}if(this.focusElement){Spry.Widget.TabbedPanels.addEventListener(this.focusElement,"focus",function(e){return self.onTabFocus(e,tab);},false);Spry.Widget.TabbedPanels.addEventListener(this.focusElement,"blur",function(e){return self.onTabBlur(e,tab);
},false);Spry.Widget.TabbedPanels.addEventListener(this.focusElement,"keydown",function(e){return self.onTabKeyDown(e,tab);},false);}}};Spry.Widget.TabbedPanels.prototype.showPanel=function(elementOrIndex){var tpIndex=-1;if(typeof elementOrIndex=="number"){tpIndex=elementOrIndex;}else{tpIndex=this.getTabIndex(elementOrIndex);
}if(!tpIndex<0||tpIndex>=this.getTabbedPanelCount()){return;}var tabs=this.getTabs();var panels=this.getContentPanels();var numTabbedPanels=Math.max(tabs.length,panels.length);for(var i=0;i<numTabbedPanels;i++){if(i!=tpIndex){if(tabs[i]){this.removeClassName(tabs[i],this.tabSelectedClass);}if(panels[i]){this.removeClassName(panels[i],this.panelVisibleClass);
panels[i].style.display="none";}}}this.addClassName(tabs[tpIndex],this.tabSelectedClass);this.addClassName(panels[tpIndex],this.panelVisibleClass);panels[tpIndex].style.display="block";this.currentTabIndex=tpIndex;};Spry.Widget.TabbedPanels.prototype.attachBehaviors=function(element){var tabs=this.getTabs();
var panels=this.getContentPanels();var panelCount=this.getTabbedPanelCount();for(var i=0;i<panelCount;i++){this.addPanelEventListeners(tabs[i],panels[i]);}this.showPanel(this.defaultTab);};Spry.BrowserSniff=function(){var b=navigator.appName.toString();var up=navigator.platform.toString();var ua=navigator.userAgent.toString();
this.mozilla=this.ie=this.opera=this.safari=false;var re_opera=/Opera.([0-9\.]*)/i;var re_msie=/MSIE.([0-9\.]*)/i;var re_gecko=/gecko/i;var re_safari=/(applewebkit|safari)\/([\d\.]*)/i;var r=false;if((r=ua.match(re_opera))){this.opera=true;this.version=parseFloat(r[1]);}else{if((r=ua.match(re_msie))){this.ie=true;
this.version=parseFloat(r[1]);}else{if((r=ua.match(re_safari))){this.safari=true;this.version=parseFloat(r[2]);}else{if(ua.match(re_gecko)){var re_gecko_version=/rv:\s*([0-9\.]+)/i;r=ua.match(re_gecko_version);this.mozilla=true;this.version=parseFloat(r[1]);}}}}this.windows=this.mac=this.linux=false;
this.Platform=ua.match(/windows/i)?"windows":(ua.match(/linux/i)?"linux":(ua.match(/mac/i)?"mac":ua.match(/unix/i)?"unix":"unknown"));this[this.Platform]=true;this.v=this.version;if(this.safari&&this.mac&&this.mozilla){this.mozilla=false;}};Spry.is=new Spry.BrowserSniff();Spry.Widget.MenuBar=function(element,opts){this.init(element,opts);
};Spry.Widget.MenuBar.prototype.init=function(element,opts){this.element=this.getElement(element);this.currMenu=null;this.showDelay=250;this.hideDelay=600;if(typeof document.getElementById=="undefined"||(navigator.vendor=="Apple Computer, Inc."&&typeof window.XMLHttpRequest=="undefined")||(Spry.is.ie&&typeof document.uniqueID=="undefined")){return;
}if(Spry.is.ie&&Spry.is.version<7){try{document.execCommand("BackgroundImageCache",false,true);}catch(err){}}this.upKeyCode=Spry.Widget.MenuBar.KEY_UP;this.downKeyCode=Spry.Widget.MenuBar.KEY_DOWN;this.leftKeyCode=Spry.Widget.MenuBar.KEY_LEFT;this.rightKeyCode=Spry.Widget.MenuBar.KEY_RIGHT;this.escKeyCode=Spry.Widget.MenuBar.KEY_ESC;
this.hoverClass="MenuBarItemHover";this.subHoverClass="MenuBarItemSubmenuHover";this.subVisibleClass="MenuBarSubmenuVisible";this.hasSubClass="MenuBarItemSubmenu";this.activeClass="MenuBarActive";this.isieClass="MenuBarItemIE";this.verticalClass="MenuBarVertical";this.horizontalClass="MenuBarHorizontal";
this.enableKeyboardNavigation=true;this.hasFocus=false;if(opts){for(var k in opts){if(typeof this[k]=="undefined"){var rollover=new Image;rollover.src=opts[k];}}Spry.Widget.MenuBar.setOptions(this,opts);}if(Spry.is.safari){this.enableKeyboardNavigation=false;}if(this.element){this.currMenu=this.element;
var items=this.element.getElementsByTagName("li");for(var i=0;i<items.length;i++){if(i>0&&this.enableKeyboardNavigation){try{items[i].getElementsByTagName("a")[0].tabIndex="-1";}catch(e){}}this.initialize(items[i],element);if(Spry.is.ie&&Spry.is.version<8){this.addClassName(items[i],this.isieClass);items[i].style.position="static";
}}if(this.enableKeyboardNavigation){var self=this;this.addEventListener(document,"keydown",function(e){self.keyDown(e);},false);}}};Spry.Widget.MenuBar.KEY_ESC=27;Spry.Widget.MenuBar.KEY_UP=38;Spry.Widget.MenuBar.KEY_DOWN=40;Spry.Widget.MenuBar.KEY_LEFT=37;Spry.Widget.MenuBar.KEY_RIGHT=39;Spry.Widget.MenuBar.prototype.getElement=function(ele){if(ele&&typeof ele=="string"){return document.getElementById(ele);
}return ele;};Spry.Widget.MenuBar.prototype.hasClassName=function(ele,className){if(!ele||!className||!ele.className||ele.className.search(new RegExp("\\b"+className+"\\b"))==-1){return false;}return true;};Spry.Widget.MenuBar.prototype.addClassName=function(ele,className){if(!ele||!className||this.hasClassName(ele,className)){return;
}ele.className+=(ele.className?" ":"")+className;};Spry.Widget.MenuBar.prototype.removeClassName=function(ele,className){if(!ele||!className||!this.hasClassName(ele,className)){return;}ele.className=ele.className.replace(new RegExp("\\s*\\b"+className+"\\b","g"),"");};Spry.Widget.MenuBar.prototype.addEventListener=function(element,eventType,handler,capture){try{if(element.addEventListener){element.addEventListener(eventType,handler,capture);
}else{if(element.attachEvent){element.attachEvent("on"+eventType,handler);}}}catch(e){}};Spry.Widget.MenuBar.prototype.createIframeLayer=function(menu){var layer=document.createElement("iframe");layer.tabIndex="-1";layer.src='javascript:""';layer.frameBorder="0";layer.scrolling="no";menu.parentNode.appendChild(layer);
layer.style.left=menu.offsetLeft+"px";layer.style.top=menu.offsetTop+"px";layer.style.width=menu.offsetWidth+"px";layer.style.height=menu.offsetHeight+"px";};Spry.Widget.MenuBar.prototype.removeIframeLayer=function(menu){var layers=((menu==this.element)?menu:menu.parentNode).getElementsByTagName("iframe");
while(layers.length>0){layers[0].parentNode.removeChild(layers[0]);}};Spry.Widget.MenuBar.prototype.clearMenus=function(root){var menus=root.getElementsByTagName("ul");for(var i=0;i<menus.length;i++){this.hideSubmenu(menus[i]);}this.removeClassName(this.element,this.activeClass);};Spry.Widget.MenuBar.prototype.bubbledTextEvent=function(){return Spry.is.safari&&(event.target==event.relatedTarget.parentNode||(event.eventPhase==3&&event.target.parentNode==event.relatedTarget));
};Spry.Widget.MenuBar.prototype.showSubmenu=function(menu){if(this.currMenu){this.clearMenus(this.currMenu);this.currMenu=null;}if(menu){this.addClassName(menu,this.subVisibleClass);if(typeof document.all!="undefined"&&!Spry.is.opera&&navigator.vendor!="KDE"){if(!this.hasClassName(this.element,this.horizontalClass)||menu.parentNode.parentNode!=this.element){menu.style.top=menu.parentNode.offsetTop+"px";
}}if(Spry.is.ie&&Spry.is.version<7){this.createIframeLayer(menu);}}this.addClassName(this.element,this.activeClass);};Spry.Widget.MenuBar.prototype.hideSubmenu=function(menu){if(menu){this.removeClassName(menu,this.subVisibleClass);if(typeof document.all!="undefined"&&!Spry.is.opera&&navigator.vendor!="KDE"){menu.style.top="";
menu.style.left="";}if(Spry.is.ie&&Spry.is.version<7){this.removeIframeLayer(menu);}}};Spry.Widget.MenuBar.prototype.initialize=function(listitem,element){var opentime,closetime;var link=listitem.getElementsByTagName("a")[0];var submenus=listitem.getElementsByTagName("ul");var menu=(submenus.length>0?submenus[0]:null);
if(menu){this.addClassName(link,this.hasSubClass);}if(!Spry.is.ie){listitem.contains=function(testNode){if(testNode==null){return false;}if(testNode==this){return true;}else{return this.contains(testNode.parentNode);}};}var self=this;this.addEventListener(listitem,"mouseover",function(e){self.mouseOver(listitem,e);
},false);this.addEventListener(listitem,"mouseout",function(e){if(self.enableKeyboardNavigation){self.clearSelection();}self.mouseOut(listitem,e);},false);if(this.enableKeyboardNavigation){this.addEventListener(link,"blur",function(e){self.onBlur(listitem);},false);this.addEventListener(link,"focus",function(e){self.keyFocus(listitem,e);
},false);}};Spry.Widget.MenuBar.prototype.keyFocus=function(listitem,e){this.lastOpen=listitem.getElementsByTagName("a")[0];this.addClassName(this.lastOpen,listitem.getElementsByTagName("ul").length>0?this.subHoverClass:this.hoverClass);this.hasFocus=true;};Spry.Widget.MenuBar.prototype.onBlur=function(listitem){this.clearSelection(listitem);
};Spry.Widget.MenuBar.prototype.clearSelection=function(el){if(!this.lastOpen){return;}if(el){el=el.getElementsByTagName("a")[0];var item=this.lastOpen;while(item!=this.element){var tmp=el;while(tmp!=this.element){if(tmp==item){return;}try{tmp=tmp.parentNode;}catch(err){break;}}item=item.parentNode;}}var item=this.lastOpen;
while(item!=this.element){this.hideSubmenu(item.parentNode);var link=item.getElementsByTagName("a")[0];this.removeClassName(link,this.hoverClass);this.removeClassName(link,this.subHoverClass);item=item.parentNode;}this.lastOpen=false;};Spry.Widget.MenuBar.prototype.keyDown=function(e){if(!this.hasFocus){return;
}if(!this.lastOpen){this.hasFocus=false;return;}var e=e||event;var listitem=this.lastOpen.parentNode;var link=this.lastOpen;var submenus=listitem.getElementsByTagName("ul");var menu=(submenus.length>0?submenus[0]:null);var hasSubMenu=(menu)?true:false;var opts=[listitem,menu,null,this.getSibling(listitem,"previousSibling"),this.getSibling(listitem,"nextSibling")];
if(!opts[3]){opts[2]=(listitem.parentNode.parentNode.nodeName.toLowerCase()=="li")?listitem.parentNode.parentNode:null;}var found=0;switch(e.keyCode){case this.upKeyCode:found=this.getElementForKey(opts,"y",1);break;case this.downKeyCode:found=this.getElementForKey(opts,"y",-1);break;case this.leftKeyCode:found=this.getElementForKey(opts,"x",1);
break;case this.rightKeyCode:found=this.getElementForKey(opts,"x",-1);break;case this.escKeyCode:case 9:this.clearSelection();this.hasFocus=false;default:return;}switch(found){case 0:return;case 1:this.mouseOver(listitem,e);break;case 2:this.mouseOut(opts[2],e);break;case 3:case 4:this.removeClassName(link,hasSubMenu?this.subHoverClass:this.hoverClass);
break;}var link=opts[found].getElementsByTagName("a")[0];if(opts[found].nodeName.toLowerCase()=="ul"){opts[found]=opts[found].getElementsByTagName("li")[0];}this.addClassName(link,opts[found].getElementsByTagName("ul").length>0?this.subHoverClass:this.hoverClass);this.lastOpen=link;opts[found].getElementsByTagName("a")[0].focus();
return Spry.Widget.MenuBar.stopPropagation(e);};Spry.Widget.MenuBar.prototype.mouseOver=function(listitem,e){var link=listitem.getElementsByTagName("a")[0];var submenus=listitem.getElementsByTagName("ul");var menu=(submenus.length>0?submenus[0]:null);var hasSubMenu=(menu)?true:false;if(this.enableKeyboardNavigation){this.clearSelection(listitem);
}if(this.bubbledTextEvent()){return;}if(listitem.closetime){clearTimeout(listitem.closetime);}if(this.currMenu==listitem){this.currMenu=null;}if(this.hasFocus){link.focus();}this.addClassName(link,hasSubMenu?this.subHoverClass:this.hoverClass);this.lastOpen=link;if(menu&&!this.hasClassName(menu,this.subHoverClass)){var self=this;
listitem.opentime=window.setTimeout(function(){self.showSubmenu(menu);},this.showDelay);}};Spry.Widget.MenuBar.prototype.mouseOut=function(listitem,e){var link=listitem.getElementsByTagName("a")[0];var submenus=listitem.getElementsByTagName("ul");var menu=(submenus.length>0?submenus[0]:null);var hasSubMenu=(menu)?true:false;
if(this.bubbledTextEvent()){return;}var related=(typeof e.relatedTarget!="undefined"?e.relatedTarget:e.toElement);if(!listitem.contains(related)){if(listitem.opentime){clearTimeout(listitem.opentime);}this.currMenu=listitem;this.removeClassName(link,hasSubMenu?this.subHoverClass:this.hoverClass);if(menu){var self=this;
listitem.closetime=window.setTimeout(function(){self.hideSubmenu(menu);},this.hideDelay);}if(this.hasFocus){link.blur();}}};Spry.Widget.MenuBar.prototype.getSibling=function(element,sibling){var child=element[sibling];while(child&&child.nodeName.toLowerCase()!="li"){child=child[sibling];}return child;
};Spry.Widget.MenuBar.prototype.getElementForKey=function(els,prop,dir){var found=0;var rect=Spry.Widget.MenuBar.getPosition;var ref=rect(els[found]);var hideSubmenu=false;if(els[1]&&!this.hasClassName(els[1],this.MenuBarSubmenuVisible)){els[1].style.visibility="hidden";this.showSubmenu(els[1]);hideSubmenu=true;
}var isVert=this.hasClassName(this.element,this.verticalClass);var hasParent=els[0].parentNode.parentNode.nodeName.toLowerCase()=="li"?true:false;for(var i=1;i<els.length;i++){if(prop=="y"&&isVert&&(i==1||i==2)){continue;}if(prop=="x"&&!isVert&&!hasParent&&(i==1||i==2)){continue;}if(els[i]){var tmp=rect(els[i]);
if((dir*tmp[prop])<(dir*ref[prop])){ref=tmp;found=i;}}}if(els[1]&&hideSubmenu){this.hideSubmenu(els[1]);els[1].style.visibility="";}return found;};Spry.Widget.MenuBar.camelize=function(str){if(str.indexOf("-")==-1){return str;}var oStringList=str.split("-");var isFirstEntry=true;var camelizedString="";
for(var i=0;i<oStringList.length;i++){if(oStringList[i].length>0){if(isFirstEntry){camelizedString=oStringList[i];isFirstEntry=false;}else{var s=oStringList[i];camelizedString+=s.charAt(0).toUpperCase()+s.substring(1);}}}return camelizedString;};Spry.Widget.MenuBar.getStyleProp=function(element,prop){var value;
try{if(element.style){value=element.style[Spry.Widget.MenuBar.camelize(prop)];}if(!value){if(document.defaultView&&document.defaultView.getComputedStyle){var css=document.defaultView.getComputedStyle(element,null);value=css?css.getPropertyValue(prop):null;}else{if(element.currentStyle){value=element.currentStyle[Spry.Widget.MenuBar.camelize(prop)];
}}}}catch(e){}return value=="auto"?null:value;};Spry.Widget.MenuBar.getIntProp=function(element,prop){var a=parseInt(Spry.Widget.MenuBar.getStyleProp(element,prop),10);if(isNaN(a)){return 0;}return a;};Spry.Widget.MenuBar.getPosition=function(el,doc){doc=doc||document;if(typeof(el)=="string"){el=doc.getElementById(el);
}if(!el){return false;}if(el.parentNode===null||Spry.Widget.MenuBar.getStyleProp(el,"display")=="none"){return false;}var ret={x:0,y:0};var parent=null;var box;if(el.getBoundingClientRect){box=el.getBoundingClientRect();var scrollTop=doc.documentElement.scrollTop||doc.body.scrollTop;var scrollLeft=doc.documentElement.scrollLeft||doc.body.scrollLeft;
ret.x=box.left+scrollLeft;ret.y=box.top+scrollTop;}else{if(doc.getBoxObjectFor){box=doc.getBoxObjectFor(el);ret.x=box.x;ret.y=box.y;}else{ret.x=el.offsetLeft;ret.y=el.offsetTop;parent=el.offsetParent;if(parent!=el){while(parent){ret.x+=parent.offsetLeft;ret.y+=parent.offsetTop;parent=parent.offsetParent;
}}if(Spry.is.opera||Spry.is.safari&&Spry.Widget.MenuBar.getStyleProp(el,"position")=="absolute"){ret.y-=doc.body.offsetTop;}}}if(el.parentNode){parent=el.parentNode;}else{parent=null;}if(parent.nodeName){var cas=parent.nodeName.toUpperCase();while(parent&&cas!="BODY"&&cas!="HTML"){cas=parent.nodeName.toUpperCase();
ret.x-=parent.scrollLeft;ret.y-=parent.scrollTop;if(parent.parentNode){parent=parent.parentNode;}else{parent=null;}}}return ret;};Spry.Widget.MenuBar.stopPropagation=function(ev){if(ev.stopPropagation){ev.stopPropagation();}else{ev.cancelBubble=true;}if(ev.preventDefault){ev.preventDefault();}else{ev.returnValue=false;
}};Spry.Widget.MenuBar.setOptions=function(obj,optionsObj,ignoreUndefinedProps){if(!optionsObj){return;}for(var optionName in optionsObj){if(ignoreUndefinedProps&&optionsObj[optionName]==undefined){continue;}obj[optionName]=optionsObj[optionName];}};var Spry;if(!Spry){Spry={};}if(!Spry.Utils){Spry.Utils={};
}Spry.Utils.msProgIDs=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0"];Spry.Utils.createXMLHttpRequest=function(){var req=null;try{if(window.ActiveXObject){while(!req&&Spry.Utils.msProgIDs.length){try{req=new ActiveXObject(Spry.Utils.msProgIDs[0]);}catch(e){req=null;}if(!req){Spry.Utils.msProgIDs.splice(0,1);
}}}if(!req&&window.XMLHttpRequest){req=new XMLHttpRequest();}}catch(e){req=null;}if(!req){Spry.Debug.reportError("Failed to create an XMLHttpRequest object!");}return req;};Spry.Utils.loadURL=function(method,url,async,callback,opts){var req=new Spry.Utils.loadURL.Request();req.method=method;req.url=url;
req.async=async;req.successCallback=callback;Spry.Utils.setOptions(req,opts);try{req.xhRequest=Spry.Utils.createXMLHttpRequest();if(!req.xhRequest){return null;}if(req.async){req.xhRequest.onreadystatechange=function(){Spry.Utils.loadURL.callback(req);};}req.xhRequest.open(req.method,req.url,req.async,req.username,req.password);
if(req.headers){for(var name in req.headers){req.xhRequest.setRequestHeader(name,req.headers[name]);}}req.xhRequest.send(req.postData);if(!req.async){Spry.Utils.loadURL.callback(req);}}catch(e){if(req.errorCallback){req.errorCallback(req);}else{Spry.Debug.reportError("Exception caught while loading "+url+": "+e);
}req=null;}return req;};Spry.Utils.loadURL.callback=function(req){if(!req||req.xhRequest.readyState!=4){return;}if(req.successCallback&&(req.xhRequest.status==200||req.xhRequest.status==0)){req.successCallback(req);}else{if(req.errorCallback){req.errorCallback(req);}}};Spry.Utils.loadURL.Request=function(){var props=Spry.Utils.loadURL.Request.props;
var numProps=props.length;for(var i=0;i<numProps;i++){this[props[i]]=null;}this.method="GET";this.async=true;this.headers={};};Spry.Utils.loadURL.Request.props=["method","url","async","username","password","postData","successCallback","errorCallback","headers","userData","xhRequest"];Spry.Utils.loadURL.Request.prototype.extractRequestOptions=function(opts,undefineRequestProps){if(!opts){return;
}var props=Spry.Utils.loadURL.Request.props;var numProps=props.length;for(var i=0;i<numProps;i++){var prop=props[i];if(opts[prop]!=undefined){this[prop]=opts[prop];if(undefineRequestProps){opts[prop]=undefined;}}}};Spry.Utils.loadURL.Request.prototype.clone=function(){var props=Spry.Utils.loadURL.Request.props;
var numProps=props.length;var req=new Spry.Utils.loadURL.Request;for(var i=0;i<numProps;i++){req[props[i]]=this[props[i]];}if(this.headers){req.headers={};Spry.Utils.setOptions(req.headers,this.headers);}return req;};Spry.Utils.setInnerHTML=function(ele,str,preventScripts){if(!ele){return;}ele=Spry.$(ele);
var scriptExpr="<script[^>]*>(.|s|\n|\r)*?<\/script>";ele.innerHTML=str.replace(new RegExp(scriptExpr,"img"),"");if(preventScripts){return;}var matches=str.match(new RegExp(scriptExpr,"img"));if(matches){var numMatches=matches.length;for(var i=0;i<numMatches;i++){var s=matches[i].replace(/<script[^>]*>[\s\r\n]*(<\!--)?|(-->)?[\s\r\n]*<\/script>/img,"");
Spry.Utils.eval(s);}}};Spry.Utils.updateContent=function(ele,url,finishFunc,opts){Spry.Utils.loadURL("GET",url,true,function(req){Spry.Utils.setInnerHTML(ele,req.xhRequest.responseText);if(finishFunc){finishFunc(ele,url);}},opts);};if(!Spry.$$){Spry.Utils.addEventListener=function(element,eventType,handler,capture){try{element=Spry.$(element);
if(element.addEventListener){element.addEventListener(eventType,handler,capture);}else{if(element.attachEvent){element.attachEvent("on"+eventType,handler);}}}catch(e){}};Spry.Utils.removeEventListener=function(element,eventType,handler,capture){try{element=Spry.$(element);if(element.removeEventListener){element.removeEventListener(eventType,handler,capture);
}else{if(element.detachEvent){element.detachEvent("on"+eventType,handler);}}}catch(e){}};Spry.Utils.addLoadListener=function(handler){if(typeof window.addEventListener!="undefined"){window.addEventListener("load",handler,false);}else{if(typeof document.addEventListener!="undefined"){document.addEventListener("load",handler,false);
}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",handler);}}}};Spry.Utils.addClassName=function(ele,className){ele=Spry.$(ele);if(!ele||!className||(ele.className&&ele.className.search(new RegExp("\\b"+className+"\\b"))!=-1)){return;}ele.className+=(ele.className?" ":"")+className;
};Spry.Utils.removeClassName=function(ele,className){ele=Spry.$(ele);if(!ele||!className||(ele.className&&ele.className.search(new RegExp("\\b"+className+"\\b"))==-1)){return;}ele.className=ele.className.replace(new RegExp("\\s*\\b"+className+"\\b","g"),"");};Spry.Utils.getObjectByName=function(name){var result=null;
if(name){var lu=window;var objPath=name.split(".");for(var i=0;lu&&i<objPath.length;i++){result=lu[objPath[i]];lu=result;}}return result;};Spry.$=function(element){if(arguments.length>1){for(var i=0,elements=[],length=arguments.length;i<length;i++){elements.push(Spry.$(arguments[i]));}return elements;
}if(typeof element=="string"){element=document.getElementById(element);}return element;};}Spry.Utils.eval=function(str){return eval(str);};Spry.Utils.escapeQuotesAndLineBreaks=function(str){if(str){str=str.replace(/\\/g,"\\\\");str=str.replace(/["']/g,"\\$&");str=str.replace(/\n/g,"\\n");str=str.replace(/\r/g,"\\r");
}return str;};Spry.Utils.encodeEntities=function(str){if(str&&str.search(/[&<>"]/)!=-1){str=str.replace(/&/g,"&amp;");str=str.replace(/</g,"&lt;");str=str.replace(/>/g,"&gt;");str=str.replace(/"/g,"&quot;");}return str;};Spry.Utils.decodeEntities=function(str){var d=Spry.Utils.decodeEntities.div;if(!d){d=document.createElement("div");
Spry.Utils.decodeEntities.div=d;if(!d){return str;}}d.innerHTML=str;if(d.childNodes.length==1&&d.firstChild.nodeType==3&&d.firstChild.nextSibling==null){str=d.firstChild.data;}else{str=str.replace(/&lt;/gi,"<");str=str.replace(/&gt;/gi,">");str=str.replace(/&quot;/gi,'"');str=str.replace(/&amp;/gi,"&");
}return str;};Spry.Utils.fixupIETagAttributes=function(inStr){var outStr="";var tagStart=inStr.match(/^<[^\s>]+\s*/)[0];var tagEnd=inStr.match(/\s*\/?>$/)[0];var tagAttrs=inStr.replace(/^<[^\s>]+\s*|\s*\/?>/g,"");outStr+=tagStart;if(tagAttrs){var startIndex=0;var endIndex=0;while(startIndex<tagAttrs.length){while(tagAttrs.charAt(endIndex)!="="&&endIndex<tagAttrs.length){++endIndex;
}if(endIndex>=tagAttrs.length){outStr+=tagAttrs.substring(startIndex,endIndex);break;}++endIndex;outStr+=tagAttrs.substring(startIndex,endIndex);startIndex=endIndex;if(tagAttrs.charAt(endIndex)=='"'||tagAttrs.charAt(endIndex)=="'"){var savedIndex=endIndex++;while(endIndex<tagAttrs.length){if(tagAttrs.charAt(endIndex)==tagAttrs.charAt(savedIndex)){endIndex++;
break;}else{if(tagAttrs.charAt(endIndex)=="\\"){endIndex++;}}endIndex++;}outStr+=tagAttrs.substring(startIndex,endIndex);startIndex=endIndex;}else{outStr+='"';var sIndex=tagAttrs.slice(endIndex).search(/\s/);endIndex=(sIndex!=-1)?(endIndex+sIndex):tagAttrs.length;outStr+=tagAttrs.slice(startIndex,endIndex);
outStr+='"';startIndex=endIndex;}}}outStr+=tagEnd;return outStr;};Spry.Utils.fixUpIEInnerHTML=function(inStr){var outStr="";var regexp=new RegExp("<\\!--|<\\!\\[CDATA\\[|<\\w+[^<>]*>|-->|\\]\\](>|&gt;)","g");var searchStartIndex=0;var skipFixUp=0;while(inStr.length){var results=regexp.exec(inStr);if(!results||!results[0]){outStr+=inStr.substr(searchStartIndex,inStr.length-searchStartIndex);
break;}if(results.index!=searchStartIndex){outStr+=inStr.substr(searchStartIndex,results.index-searchStartIndex);}if(results[0]=="<!--"||results[0]=="<![CDATA["){++skipFixUp;outStr+=results[0];}else{if(results[0]=="-->"||results[0]=="]]>"||(skipFixUp&&results[0]=="]]&gt;")){--skipFixUp;outStr+=results[0];
}else{if(!skipFixUp&&results[0].charAt(0)=="<"){outStr+=Spry.Utils.fixupIETagAttributes(results[0]);}else{outStr+=results[0];}}}searchStartIndex=regexp.lastIndex;}return outStr;};Spry.Utils.stringToXMLDoc=function(str){var xmlDoc=null;try{var xmlDOMObj=new ActiveXObject("Microsoft.XMLDOM");xmlDOMObj.async=false;
xmlDOMObj.loadXML(str);xmlDoc=xmlDOMObj;}catch(e){try{var domParser=new DOMParser;xmlDoc=domParser.parseFromString(str,"text/xml");}catch(e){Spry.Debug.reportError("Caught exception in Spry.Utils.stringToXMLDoc(): "+e+"\n");xmlDoc=null;}}return xmlDoc;};Spry.Utils.serializeObject=function(obj){var str="";
var firstItem=true;if(obj==null||obj==undefined){return str+obj;}var objType=typeof obj;if(objType=="number"||objType=="boolean"){str+=obj;}else{if(objType=="string"){str+='"'+Spry.Utils.escapeQuotesAndLineBreaks(obj)+'"';}else{if(obj.constructor==Array){str+="[";for(var i=0;i<obj.length;i++){if(!firstItem){str+=", ";
}str+=Spry.Utils.serializeObject(obj[i]);firstItem=false;}str+="]";}else{if(objType=="object"){str+="{";for(var p in obj){if(!firstItem){str+=", ";}str+='"'+p+'": '+Spry.Utils.serializeObject(obj[p]);firstItem=false;}str+="}";}}}}return str;};Spry.Utils.getNodesByFunc=function(root,func){var nodeStack=new Array;
var resultArr=new Array;var node=root;while(node){if(func(node)){resultArr.push(node);}if(node.hasChildNodes()){nodeStack.push(node);node=node.firstChild;}else{if(node==root){node=null;}else{try{node=node.nextSibling;}catch(e){node=null;}}}while(!node&&nodeStack.length>0){node=nodeStack.pop();if(node==root){node=null;
}else{try{node=node.nextSibling;}catch(e){node=null;}}}}if(nodeStack&&nodeStack.length>0){Spry.Debug.trace("-- WARNING: Spry.Utils.getNodesByFunc() failed to traverse all nodes!\n");}return resultArr;};Spry.Utils.getFirstChildWithNodeName=function(node,nodeName){var child=node.firstChild;while(child){if(child.nodeName==nodeName){return child;
}child=child.nextSibling;}return null;};Spry.Utils.setOptions=function(obj,optionsObj,ignoreUndefinedProps){if(!optionsObj){return;}for(var optionName in optionsObj){if(ignoreUndefinedProps&&optionsObj[optionName]==undefined){continue;}obj[optionName]=optionsObj[optionName];}};Spry.Utils.SelectionManager={};
Spry.Utils.SelectionManager.selectionGroups=new Object;Spry.Utils.SelectionManager.SelectionGroup=function(){this.selectedElements=new Array;};Spry.Utils.SelectionManager.SelectionGroup.prototype.select=function(element,className,multiSelect){var selObj=null;if(!multiSelect){this.clearSelection();}else{for(var i=0;
i<this.selectedElements.length;i++){selObj=this.selectedElements[i].element;if(selObj.element==element){if(selObj.className!=className){Spry.Utils.removeClassName(element,selObj.className);Spry.Utils.addClassName(element,className);}return;}}}selObj=new Object;selObj.element=element;selObj.className=className;
this.selectedElements.push(selObj);Spry.Utils.addClassName(element,className);};Spry.Utils.SelectionManager.SelectionGroup.prototype.unSelect=function(element){for(var i=0;i<this.selectedElements.length;i++){var selObj=this.selectedElements[i].element;if(selObj.element==element){Spry.Utils.removeClassName(selObj.element,selObj.className);
return;}}};Spry.Utils.SelectionManager.SelectionGroup.prototype.clearSelection=function(){var selObj=null;do{selObj=this.selectedElements.shift();if(selObj){Spry.Utils.removeClassName(selObj.element,selObj.className);}}while(selObj);};Spry.Utils.SelectionManager.getSelectionGroup=function(selectionGroupName){if(!selectionGroupName){return null;
}var groupObj=Spry.Utils.SelectionManager.selectionGroups[selectionGroupName];if(!groupObj){groupObj=new Spry.Utils.SelectionManager.SelectionGroup();Spry.Utils.SelectionManager.selectionGroups[selectionGroupName]=groupObj;}return groupObj;};Spry.Utils.SelectionManager.select=function(selectionGroupName,element,className,multiSelect){var groupObj=Spry.Utils.SelectionManager.getSelectionGroup(selectionGroupName);
if(!groupObj){return;}groupObj.select(element,className,multiSelect);};Spry.Utils.SelectionManager.unSelect=function(selectionGroupName,element){var groupObj=Spry.Utils.SelectionManager.getSelectionGroup(selectionGroupName);if(!groupObj){return;}groupObj.unSelect(element,className);};Spry.Utils.SelectionManager.clearSelection=function(selectionGroupName){var groupObj=Spry.Utils.SelectionManager.getSelectionGroup(selectionGroupName);
if(!groupObj){return;}groupObj.clearSelection();};Spry.Utils.Notifier=function(){this.observers=[];this.suppressNotifications=0;};Spry.Utils.Notifier.prototype.addObserver=function(observer){if(!observer){return;}var len=this.observers.length;for(var i=0;i<len;i++){if(this.observers[i]==observer){return;
}}this.observers[len]=observer;};Spry.Utils.Notifier.prototype.removeObserver=function(observer){if(!observer){return;}for(var i=0;i<this.observers.length;i++){if(this.observers[i]==observer){this.observers.splice(i,1);break;}}};Spry.Utils.Notifier.prototype.notifyObservers=function(methodName,data){if(!methodName){return;
}if(!this.suppressNotifications){var len=this.observers.length;for(var i=0;i<len;i++){var obs=this.observers[i];if(obs){if(typeof obs=="function"){obs(methodName,this,data);}else{if(obs[methodName]){obs[methodName](this,data);}}}}}};Spry.Utils.Notifier.prototype.enableNotifications=function(){if(--this.suppressNotifications<0){this.suppressNotifications=0;
Spry.Debug.reportError("Unbalanced enableNotifications() call!\n");}};Spry.Utils.Notifier.prototype.disableNotifications=function(){++this.suppressNotifications;};Spry.Debug={};Spry.Debug.enableTrace=true;Spry.Debug.debugWindow=null;Spry.Debug.onloadDidFire=false;Spry.Utils.addLoadListener(function(){Spry.Debug.onloadDidFire=true;
Spry.Debug.flushQueuedMessages();});Spry.Debug.flushQueuedMessages=function(){if(Spry.Debug.flushQueuedMessages.msgs){var msgs=Spry.Debug.flushQueuedMessages.msgs;for(var i=0;i<msgs.length;i++){Spry.Debug.debugOut(msgs[i].msg,msgs[i].color);}Spry.Debug.flushQueuedMessages.msgs=null;}};Spry.Debug.createDebugWindow=function(){if(!Spry.Debug.enableTrace||Spry.Debug.debugWindow||!Spry.Debug.onloadDidFire){return;
}try{Spry.Debug.debugWindow=document.createElement("div");var div=Spry.Debug.debugWindow;div.style.fontSize="12px";div.style.fontFamily="console";div.style.position="absolute";div.style.width="400px";div.style.height="300px";div.style.overflow="auto";div.style.border="solid 1px black";div.style.backgroundColor="white";
div.style.color="black";div.style.bottom="0px";div.style.right="0px";div.setAttribute("id","SpryDebugWindow");document.body.appendChild(Spry.Debug.debugWindow);}catch(e){}};Spry.Debug.debugOut=function(str,bgColor){if(!Spry.Debug.debugWindow){Spry.Debug.createDebugWindow();if(!Spry.Debug.debugWindow){if(!Spry.Debug.flushQueuedMessages.msgs){Spry.Debug.flushQueuedMessages.msgs=new Array;
}Spry.Debug.flushQueuedMessages.msgs.push({msg:str,color:bgColor});return;}}var d=document.createElement("div");if(bgColor){d.style.backgroundColor=bgColor;}d.innerHTML=str;Spry.Debug.debugWindow.appendChild(d);};Spry.Debug.trace=function(str){Spry.Debug.debugOut(str);};Spry.Debug.reportError=function(str){Spry.Debug.debugOut(str,"red");
};Spry.Data={};Spry.Data.regionsArray={};Spry.Data.initRegionsOnLoad=true;Spry.Data.initRegions=function(rootNode){rootNode=rootNode?Spry.$(rootNode):document.body;var lastRegionFound=null;var regions=Spry.Utils.getNodesByFunc(rootNode,function(node){try{if(node.nodeType!=1){return false;}var attrName="spry:region";
var attr=node.attributes.getNamedItem(attrName);if(!attr){attrName="spry:detailregion";attr=node.attributes.getNamedItem(attrName);}if(attr){if(lastRegionFound){var parent=node.parentNode;while(parent){if(parent==lastRegionFound){Spry.Debug.reportError("Found a nested "+attrName+" in the following markup. Nested regions are currently not supported.<br/><pre>"+Spry.Utils.encodeEntities(parent.innerHTML)+"</pre>");
return false;}parent=parent.parentNode;}}if(attr.value){attr=node.attributes.getNamedItem("id");if(!attr||!attr.value){node.setAttribute("id","spryregion"+(++Spry.Data.initRegions.nextUniqueRegionID));}lastRegionFound=node;return true;}else{Spry.Debug.reportError(attrName+" attributes require one or more data set names as values!");
}}}catch(e){}return false;});var name,dataSets,i;var newRegions=[];for(i=0;i<regions.length;i++){var rgn=regions[i];var isDetailRegion=false;name=rgn.attributes.getNamedItem("id").value;attr=rgn.attributes.getNamedItem("spry:region");if(!attr){attr=rgn.attributes.getNamedItem("spry:detailregion");isDetailRegion=true;
}if(!attr.value){Spry.Debug.reportError("spry:region and spry:detailregion attributes require one or more data set names as values!");continue;}rgn.attributes.removeNamedItem(attr.nodeName);Spry.Utils.removeClassName(rgn,Spry.Data.Region.hiddenRegionClassName);dataSets=Spry.Data.Region.strToDataSetsArray(attr.value);
if(!dataSets.length){Spry.Debug.reportError("spry:region or spry:detailregion attribute has no data set!");continue;}var hasBehaviorAttributes=false;var hasSpryContent=false;var dataStr="";var parent=null;var regionStates={};var regionStateMap={};attr=rgn.attributes.getNamedItem("spry:readystate");if(attr&&attr.value){regionStateMap["ready"]=attr.value;
}attr=rgn.attributes.getNamedItem("spry:errorstate");if(attr&&attr.value){regionStateMap["error"]=attr.value;}attr=rgn.attributes.getNamedItem("spry:loadingstate");if(attr&&attr.value){regionStateMap["loading"]=attr.value;}attr=rgn.attributes.getNamedItem("spry:expiredstate");if(attr&&attr.value){regionStateMap["expired"]=attr.value;
}var piRegions=Spry.Utils.getNodesByFunc(rgn,function(node){try{if(node.nodeType==1){var attributes=node.attributes;var numPI=Spry.Data.Region.PI.orderedInstructions.length;var lastStartComment=null;var lastEndComment=null;for(var i=0;i<numPI;i++){var piName=Spry.Data.Region.PI.orderedInstructions[i];
var attr=attributes.getNamedItem(piName);if(!attr){continue;}var piDesc=Spry.Data.Region.PI.instructions[piName];var childrenOnly=(node==rgn)?true:piDesc.childrenOnly;var openTag=piDesc.getOpenTag(node,piName);var closeTag=piDesc.getCloseTag(node,piName);if(childrenOnly){var oComment=document.createComment(openTag);
var cComment=document.createComment(closeTag);if(!lastStartComment){node.insertBefore(oComment,node.firstChild);}else{node.insertBefore(oComment,lastStartComment.nextSibling);}lastStartComment=oComment;if(!lastEndComment){node.appendChild(cComment);}else{node.insertBefore(cComment,lastEndComment);}lastEndComment=cComment;
}else{var parent=node.parentNode;parent.insertBefore(document.createComment(openTag),node);parent.insertBefore(document.createComment(closeTag),node.nextSibling);}if(piName=="spry:state"){regionStates[attr.value]=true;}node.removeAttribute(piName);}if(Spry.Data.Region.enableBehaviorAttributes){var bAttrs=Spry.Data.Region.behaviorAttrs;
for(var behaviorAttrName in bAttrs){var bAttr=attributes.getNamedItem(behaviorAttrName);if(bAttr){hasBehaviorAttributes=true;if(bAttrs[behaviorAttrName].setup){bAttrs[behaviorAttrName].setup(node,bAttr.value);}}}}}}catch(e){}return false;});dataStr=rgn.innerHTML;if(window.ActiveXObject&&!Spry.Data.Region.disableIEInnerHTMLFixUp&&dataStr.search(/=\{/)!=-1){if(Spry.Data.Region.debug){Spry.Debug.trace("<hr />Performing IE innerHTML fix up of Region: "+name+"<br /><br />"+Spry.Utils.encodeEntities(dataStr));
}dataStr=Spry.Utils.fixUpIEInnerHTML(dataStr);}if(Spry.Data.Region.debug){Spry.Debug.trace("<hr />Region template markup for '"+name+"':<br /><br />"+Spry.Utils.encodeEntities(dataStr));}if(!hasSpryContent){rgn.innerHTML="";}var region=new Spry.Data.Region(rgn,name,isDetailRegion,dataStr,dataSets,regionStates,regionStateMap,hasBehaviorAttributes);
Spry.Data.regionsArray[region.name]=region;newRegions.push(region);}for(var i=0;i<newRegions.length;i++){newRegions[i].updateContent();}};Spry.Data.initRegions.nextUniqueRegionID=0;Spry.Data.updateRegion=function(regionName){if(!regionName||!Spry.Data.regionsArray||!Spry.Data.regionsArray[regionName]){return;
}try{Spry.Data.regionsArray[regionName].updateContent();}catch(e){Spry.Debug.reportError("Spry.Data.updateRegion("+regionName+") caught an exception: "+e+"\n");}};Spry.Data.getRegion=function(regionName){return Spry.Data.regionsArray[regionName];};Spry.Data.updateAllRegions=function(){if(!Spry.Data.regionsArray){return;
}for(var regionName in Spry.Data.regionsArray){Spry.Data.updateRegion(regionName);}};Spry.Data.getDataSetByName=function(dataSetName){var ds=window[dataSetName];if(typeof ds!="object"||!ds.getData||!ds.filter){return null;}return ds;};Spry.Data.DataSet=function(options){Spry.Utils.Notifier.call(this);
this.name="";this.internalID=Spry.Data.DataSet.nextDataSetID++;this.curRowID=0;this.data=[];this.unfilteredData=null;this.dataHash={};this.columnTypes={};this.filterFunc=null;this.filterDataFunc=null;this.distinctOnLoad=false;this.distinctFieldsOnLoad=null;this.sortOnLoad=null;this.sortOrderOnLoad="ascending";
this.keepSorted=false;this.dataWasLoaded=false;this.pendingRequest=null;this.lastSortColumns=[];this.lastSortOrder="";this.loadIntervalID=0;Spry.Utils.setOptions(this,options);};Spry.Data.DataSet.prototype=new Spry.Utils.Notifier();Spry.Data.DataSet.prototype.constructor=Spry.Data.DataSet;Spry.Data.DataSet.prototype.getData=function(unfiltered){return(unfiltered&&this.unfilteredData)?this.unfilteredData:this.data;
};Spry.Data.DataSet.prototype.getUnfilteredData=function(){return this.getData(true);};Spry.Data.DataSet.prototype.getLoadDataRequestIsPending=function(){return this.pendingRequest!=null;};Spry.Data.DataSet.prototype.getDataWasLoaded=function(){return this.dataWasLoaded;};Spry.Data.DataSet.prototype.getValue=function(valueName,rowContext){var result=undefined;
if(!rowContext){rowContext=this.getCurrentRow();}switch(valueName){case"ds_RowNumber":result=this.getRowNumber(rowContext);break;case"ds_RowNumberPlus1":result=this.getRowNumber(rowContext)+1;break;case"ds_RowCount":result=this.getRowCount();break;case"ds_UnfilteredRowCount":result=this.getRowCount(true);
break;case"ds_CurrentRowNumber":result=this.getCurrentRowNumber();break;case"ds_CurrentRowID":result=this.getCurrentRowID();break;case"ds_EvenOddRow":result=(this.getRowNumber(rowContext)%2)?Spry.Data.Region.evenRowClassName:Spry.Data.Region.oddRowClassName;break;case"ds_SortOrder":result=this.getSortOrder();
break;case"ds_SortColumn":result=this.getSortColumn();break;default:if(rowContext){result=rowContext[valueName];}break;}return result;};Spry.Data.DataSet.prototype.setDataFromArray=function(arr,fireSyncLoad){this.notifyObservers("onPreLoad");this.unfilteredData=null;this.filteredData=null;this.data=[];
this.dataHash={};var arrLen=arr.length;for(var i=0;i<arrLen;i++){var row=arr[i];if(row.ds_RowID==undefined){row.ds_RowID=i;}this.dataHash[row.ds_RowID]=row;this.data.push(row);}this.loadData(fireSyncLoad);};Spry.Data.DataSet.prototype.loadData=function(syncLoad){var self=this;this.pendingRequest=new Object;
this.dataWasLoaded=false;var loadCallbackFunc=function(){self.pendingRequest=null;self.dataWasLoaded=true;self.applyColumnTypes();self.disableNotifications();self.filterAndSortData();self.enableNotifications();self.notifyObservers("onPostLoad");self.notifyObservers("onDataChanged");};if(syncLoad){loadCallbackFunc();
}else{this.pendingRequest.timer=setTimeout(loadCallbackFunc,0);}};Spry.Data.DataSet.prototype.filterAndSortData=function(){if(this.filterDataFunc){this.filterData(this.filterDataFunc,true);}if(this.distinctOnLoad){this.distinct(this.distinctFieldsOnLoad);}if(this.keepSorted&&this.getSortColumn()){this.sort(this.lastSortColumns,this.lastSortOrder);
}else{if(this.sortOnLoad){this.sort(this.sortOnLoad,this.sortOrderOnLoad);}}if(this.filterFunc){this.filter(this.filterFunc,true);}if(this.data&&this.data.length>0){this.curRowID=this.data[0]["ds_RowID"];}else{this.curRowID=0;}};Spry.Data.DataSet.prototype.cancelLoadData=function(){if(this.pendingRequest&&this.pendingRequest.timer){clearTimeout(this.pendingRequest.timer);
}this.pendingRequest=null;};Spry.Data.DataSet.prototype.getRowCount=function(unfiltered){var rows=this.getData(unfiltered);return rows?rows.length:0;};Spry.Data.DataSet.prototype.getRowByID=function(rowID){if(!this.data){return null;}return this.dataHash[rowID];};Spry.Data.DataSet.prototype.getRowByRowNumber=function(rowNumber,unfiltered){var rows=this.getData(unfiltered);
if(rows&&rowNumber>=0&&rowNumber<rows.length){return rows[rowNumber];}return null;};Spry.Data.DataSet.prototype.getCurrentRow=function(){return this.getRowByID(this.curRowID);};Spry.Data.DataSet.prototype.setCurrentRow=function(rowID){if(this.curRowID==rowID){return;}var nData={oldRowID:this.curRowID,newRowID:rowID};
this.curRowID=rowID;this.notifyObservers("onCurrentRowChanged",nData);};Spry.Data.DataSet.prototype.getRowNumber=function(row,unfiltered){if(row){var rows=this.getData(unfiltered);if(rows&&rows.length){var numRows=rows.length;for(var i=0;i<numRows;i++){if(rows[i]==row){return i;}}}}return -1;};Spry.Data.DataSet.prototype.getCurrentRowNumber=function(){return this.getRowNumber(this.getCurrentRow());
};Spry.Data.DataSet.prototype.getCurrentRowID=function(){return this.curRowID;};Spry.Data.DataSet.prototype.setCurrentRowNumber=function(rowNumber){if(!this.data||rowNumber>=this.data.length){Spry.Debug.trace("Invalid row number: "+rowNumber+"\n");return;}var rowID=this.data[rowNumber]["ds_RowID"];if(rowID==undefined||this.curRowID==rowID){return;
}this.setCurrentRow(rowID);};Spry.Data.DataSet.prototype.findRowsWithColumnValues=function(valueObj,firstMatchOnly,unfiltered){var results=[];var rows=this.getData(unfiltered);if(rows){var numRows=rows.length;for(var i=0;i<numRows;i++){var row=rows[i];var matched=true;for(var colName in valueObj){if(valueObj[colName]!=row[colName]){matched=false;
break;}}if(matched){if(firstMatchOnly){return row;}results.push(row);}}}return firstMatchOnly?null:results;};Spry.Data.DataSet.prototype.setColumnType=function(columnNames,columnType){if(columnNames){if(typeof columnNames=="string"){columnNames=[columnNames];}for(var i=0;i<columnNames.length;i++){this.columnTypes[columnNames[i]]=columnType;
}}};Spry.Data.DataSet.prototype.getColumnType=function(columnName){if(this.columnTypes[columnName]){return this.columnTypes[columnName];}return"string";};Spry.Data.DataSet.prototype.applyColumnTypes=function(){var rows=this.getData(true);var numRows=rows.length;var colNames=[];if(numRows<1){return;}for(var cname in this.columnTypes){var ctype=this.columnTypes[cname];
if(ctype!="string"){for(var i=0;i<numRows;i++){var row=rows[i];var val=row[cname];if(val!=undefined){if(ctype=="number"){row[cname]=new Number(val);}else{if(ctype=="html"){row[cname]=Spry.Utils.decodeEntities(val);}}}}}}};Spry.Data.DataSet.prototype.distinct=function(columnNames){if(this.data){var oldData=this.data;
this.data=[];this.dataHash={};var dataChanged=false;var alreadySeenHash={};var i=0;var keys=[];if(typeof columnNames=="string"){keys=[columnNames];}else{if(columnNames){keys=columnNames;}else{for(var recField in oldData[0]){keys[i++]=recField;}}}for(var i=0;i<oldData.length;i++){var rec=oldData[i];var hashStr="";
for(var j=0;j<keys.length;j++){recField=keys[j];if(recField!="ds_RowID"){if(hashStr){hashStr+=",";}hashStr+=recField+":"+'"'+rec[recField]+'"';}}if(!alreadySeenHash[hashStr]){this.data.push(rec);this.dataHash[rec["ds_RowID"]]=rec;alreadySeenHash[hashStr]=true;}else{dataChanged=true;}}if(dataChanged){this.notifyObservers("onDataChanged");
}}};Spry.Data.DataSet.prototype.getSortColumn=function(){return(this.lastSortColumns&&this.lastSortColumns.length>0)?this.lastSortColumns[0]:"";};Spry.Data.DataSet.prototype.getSortOrder=function(){return this.lastSortOrder?this.lastSortOrder:"";};Spry.Data.DataSet.prototype.sort=function(columnNames,sortOrder){if(!columnNames){return;
}if(typeof columnNames=="string"){columnNames=[columnNames,"ds_RowID"];}else{if(columnNames.length<2&&columnNames[0]!="ds_RowID"){columnNames.push("ds_RowID");}}if(!sortOrder){sortOrder="toggle";}if(sortOrder=="toggle"){if(this.lastSortColumns.length>0&&this.lastSortColumns[0]==columnNames[0]&&this.lastSortOrder=="ascending"){sortOrder="descending";
}else{sortOrder="ascending";}}if(sortOrder!="ascending"&&sortOrder!="descending"){Spry.Debug.reportError("Invalid sort order type specified: "+sortOrder+"\n");return;}var nData={oldSortColumns:this.lastSortColumns,oldSortOrder:this.lastSortOrder,newSortColumns:columnNames,newSortOrder:sortOrder};this.notifyObservers("onPreSort",nData);
var cname=columnNames[columnNames.length-1];var sortfunc=Spry.Data.DataSet.prototype.sort.getSortFunc(cname,this.getColumnType(cname),sortOrder);for(var i=columnNames.length-2;i>=0;i--){cname=columnNames[i];sortfunc=Spry.Data.DataSet.prototype.sort.buildSecondarySortFunc(Spry.Data.DataSet.prototype.sort.getSortFunc(cname,this.getColumnType(cname),sortOrder),sortfunc);
}if(this.unfilteredData){this.unfilteredData.sort(sortfunc);if(this.filterFunc){this.filter(this.filterFunc,true);}}else{this.data.sort(sortfunc);}this.lastSortColumns=columnNames.slice(0);this.lastSortOrder=sortOrder;this.notifyObservers("onPostSort",nData);};Spry.Data.DataSet.prototype.sort.getSortFunc=function(prop,type,order){var sortfunc=null;
if(type=="number"){if(order=="ascending"){sortfunc=function(a,b){a=a[prop];b=b[prop];if(a==undefined||b==undefined){return(a==b)?0:(a?1:-1);}return a-b;};}else{sortfunc=function(a,b){a=a[prop];b=b[prop];if(a==undefined||b==undefined){return(a==b)?0:(a?-1:1);}return b-a;};}}else{if(type=="date"){if(order=="ascending"){sortfunc=function(a,b){var dA=a[prop];
var dB=b[prop];dA=dA?(new Date(dA)):0;dB=dB?(new Date(dB)):0;return dA-dB;};}else{sortfunc=function(a,b){var dA=a[prop];var dB=b[prop];dA=dA?(new Date(dA)):0;dB=dB?(new Date(dB)):0;return dB-dA;};}}else{if(order=="ascending"){sortfunc=function(a,b){a=a[prop];b=b[prop];if(a==undefined||b==undefined){return(a==b)?0:(a?1:-1);
}var tA=a.toString();var tB=b.toString();var tA_l=tA.toLowerCase();var tB_l=tB.toLowerCase();var min_len=tA.length>tB.length?tB.length:tA.length;for(var i=0;i<min_len;i++){var a_l_c=tA_l.charAt(i);var b_l_c=tB_l.charAt(i);var a_c=tA.charAt(i);var b_c=tB.charAt(i);if(a_l_c>b_l_c){return 1;}else{if(a_l_c<b_l_c){return -1;
}else{if(a_c>b_c){return 1;}else{if(a_c<b_c){return -1;}}}}}if(tA.length==tB.length){return 0;}else{if(tA.length>tB.length){return 1;}}return -1;};}else{sortfunc=function(a,b){a=a[prop];b=b[prop];if(a==undefined||b==undefined){return(a==b)?0:(a?-1:1);}var tA=a.toString();var tB=b.toString();var tA_l=tA.toLowerCase();
var tB_l=tB.toLowerCase();var min_len=tA.length>tB.length?tB.length:tA.length;for(var i=0;i<min_len;i++){var a_l_c=tA_l.charAt(i);var b_l_c=tB_l.charAt(i);var a_c=tA.charAt(i);var b_c=tB.charAt(i);if(a_l_c>b_l_c){return -1;}else{if(a_l_c<b_l_c){return 1;}else{if(a_c>b_c){return -1;}else{if(a_c<b_c){return 1;
}}}}}if(tA.length==tB.length){return 0;}else{if(tA.length>tB.length){return -1;}}return 1;};}}}return sortfunc;};Spry.Data.DataSet.prototype.sort.buildSecondarySortFunc=function(funcA,funcB){return function(a,b){var ret=funcA(a,b);if(ret==0){ret=funcB(a,b);}return ret;};};Spry.Data.DataSet.prototype.filterData=function(filterFunc,filterOnly){var dataChanged=false;
if(!filterFunc){this.filterDataFunc=null;dataChanged=true;}else{this.filterDataFunc=filterFunc;if(this.dataWasLoaded&&((this.unfilteredData&&this.unfilteredData.length)||(this.data&&this.data.length))){if(this.unfilteredData){this.data=this.unfilteredData;this.unfilteredData=null;}var oldData=this.data;
this.data=[];this.dataHash={};for(var i=0;i<oldData.length;i++){var newRow=filterFunc(this,oldData[i],i);if(newRow){this.data.push(newRow);this.dataHash[newRow["ds_RowID"]]=newRow;}}dataChanged=true;}}if(dataChanged){if(!filterOnly){this.disableNotifications();if(this.filterFunc){this.filter(this.filterFunc,true);
}this.enableNotifications();}this.notifyObservers("onDataChanged");}};Spry.Data.DataSet.prototype.filter=function(filterFunc,filterOnly){var dataChanged=false;if(!filterFunc){if(this.filterFunc&&this.unfilteredData){this.data=this.unfilteredData;this.unfilteredData=null;this.filterFunc=null;dataChanged=true;
}}else{this.filterFunc=filterFunc;if(this.dataWasLoaded&&(this.unfilteredData||(this.data&&this.data.length))){if(!this.unfilteredData){this.unfilteredData=this.data;}var udata=this.unfilteredData;this.data=[];for(var i=0;i<udata.length;i++){var newRow=filterFunc(this,udata[i],i);if(newRow){this.data.push(newRow);
}}dataChanged=true;}}if(dataChanged){this.notifyObservers("onDataChanged");}};Spry.Data.DataSet.prototype.startLoadInterval=function(interval){this.stopLoadInterval();if(interval>0){var self=this;this.loadInterval=interval;this.loadIntervalID=setInterval(function(){self.loadData();},interval);}};Spry.Data.DataSet.prototype.stopLoadInterval=function(){if(this.loadIntervalID){clearInterval(this.loadIntervalID);
}this.loadInterval=0;this.loadIntervalID=null;};Spry.Data.DataSet.nextDataSetID=0;Spry.Data.HTTPSourceDataSet=function(dataSetURL,dataSetOptions){Spry.Data.DataSet.call(this);this.url=dataSetURL;this.dataSetsForDataRefStrings=new Array;this.hasDataRefStrings=false;this.useCache=true;this.setRequestInfo(dataSetOptions,true);
Spry.Utils.setOptions(this,dataSetOptions,true);this.recalculateDataSetDependencies();if(this.loadInterval>0){this.startLoadInterval(this.loadInterval);}};Spry.Data.HTTPSourceDataSet.prototype=new Spry.Data.DataSet();Spry.Data.HTTPSourceDataSet.prototype.constructor=Spry.Data.HTTPSourceDataSet;Spry.Data.HTTPSourceDataSet.prototype.setRequestInfo=function(requestInfo,undefineRequestProps){this.requestInfo=new Spry.Utils.loadURL.Request();
this.requestInfo.extractRequestOptions(requestInfo,undefineRequestProps);if(this.requestInfo.method=="POST"){if(!this.requestInfo.headers){this.requestInfo.headers={};}if(!this.requestInfo.headers["Content-Type"]){this.requestInfo.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8";
}}};Spry.Data.HTTPSourceDataSet.prototype.recalculateDataSetDependencies=function(){this.hasDataRefStrings=false;var i=0;for(i=0;i<this.dataSetsForDataRefStrings.length;i++){var ds=this.dataSetsForDataRefStrings[i];if(ds){ds.removeObserver(this);}}this.dataSetsForDataRefStrings=new Array();var regionStrs=this.getDataRefStrings();
var dsCount=0;for(var n=0;n<regionStrs.length;n++){var tokens=Spry.Data.Region.getTokensFromStr(regionStrs[n]);for(i=0;tokens&&i<tokens.length;i++){if(tokens[i].search(/{[^}:]+::[^}]+}/)!=-1){var dsName=tokens[i].replace(/^\{|::.*\}/g,"");var ds=null;if(!this.dataSetsForDataRefStrings[dsName]){ds=Spry.Data.getDataSetByName(dsName);
if(dsName&&ds){this.dataSetsForDataRefStrings[dsName]=ds;this.dataSetsForDataRefStrings[dsCount++]=ds;this.hasDataRefStrings=true;}}}}}for(i=0;i<this.dataSetsForDataRefStrings.length;i++){var ds=this.dataSetsForDataRefStrings[i];ds.addObserver(this);}};Spry.Data.HTTPSourceDataSet.prototype.getDataRefStrings=function(){var strArr=[];
if(this.url){strArr.push(this.url);}if(this.requestInfo&&this.requestInfo.postData){strArr.push(this.requestInfo.postData);}return strArr;};Spry.Data.HTTPSourceDataSet.prototype.attemptLoadData=function(){for(var i=0;i<this.dataSetsForDataRefStrings.length;i++){var ds=this.dataSetsForDataRefStrings[i];
if(ds.getLoadDataRequestIsPending()||!ds.getDataWasLoaded()){return;}}this.loadData();};Spry.Data.HTTPSourceDataSet.prototype.onCurrentRowChanged=function(ds,data){this.attemptLoadData();};Spry.Data.HTTPSourceDataSet.prototype.onPostSort=function(ds,data){this.attemptLoadData();};Spry.Data.HTTPSourceDataSet.prototype.onDataChanged=function(ds,data){this.attemptLoadData();
};Spry.Data.HTTPSourceDataSet.prototype.loadData=function(){if(!this.url){return;}this.cancelLoadData();var url=this.url;var postData=this.requestInfo.postData;if(this.hasDataRefStrings){var allDataSetsReady=true;for(var i=0;i<this.dataSetsForDataRefStrings.length;i++){var ds=this.dataSetsForDataRefStrings[i];
if(ds.getLoadDataRequestIsPending()){allDataSetsReady=false;}else{if(!ds.getDataWasLoaded()){ds.loadData();allDataSetsReady=false;}}}if(!allDataSetsReady){return;}url=Spry.Data.Region.processDataRefString(null,this.url,this.dataSetsForDataRefStrings);if(!url){return;}if(postData&&(typeof postData)=="string"){postData=Spry.Data.Region.processDataRefString(null,postData,this.dataSetsForDataRefStrings);
}}this.notifyObservers("onPreLoad");this.data=null;this.dataWasLoaded=false;this.unfilteredData=null;this.dataHash=null;this.curRowID=0;var req=this.requestInfo.clone();req.url=url;req.postData=postData;this.pendingRequest=new Object;this.pendingRequest.data=Spry.Data.HTTPSourceDataSet.LoadManager.loadData(req,this,this.useCache);
};Spry.Data.HTTPSourceDataSet.prototype.cancelLoadData=function(){if(this.pendingRequest){Spry.Data.HTTPSourceDataSet.LoadManager.cancelLoadData(this.pendingRequest.data,this);this.pendingRequest=null;}};Spry.Data.HTTPSourceDataSet.prototype.getURL=function(){return this.url;};Spry.Data.HTTPSourceDataSet.prototype.setURL=function(url,requestOptions){if(this.url==url){if(!requestOptions||(this.requestInfo.method==requestOptions.method&&(requestOptions.method!="POST"||this.requestInfo.postData==requestOptions.postData))){return;
}}this.url=url;this.setRequestInfo(requestOptions);this.cancelLoadData();this.recalculateDataSetDependencies();this.dataWasLoaded=false;};Spry.Data.HTTPSourceDataSet.prototype.setDataFromDoc=function(rawDataDoc){this.pendingRequest=null;this.loadDataIntoDataSet(rawDataDoc);this.applyColumnTypes();this.disableNotifications();
this.filterAndSortData();this.enableNotifications();this.notifyObservers("onPostLoad");this.notifyObservers("onDataChanged");};Spry.Data.HTTPSourceDataSet.prototype.loadDataIntoDataSet=function(rawDataDoc){this.dataHash=new Object;this.data=new Array;this.dataWasLoaded=true;};Spry.Data.HTTPSourceDataSet.prototype.xhRequestProcessor=function(xhRequest){var resp=xhRequest.responseText;
if(xhRequest.status==200||xhRequest.status==0){return resp;}return null;};Spry.Data.HTTPSourceDataSet.prototype.sessionExpiredChecker=function(req){if(req.xhRequest.responseText=="session expired"){return true;}return false;};Spry.Data.HTTPSourceDataSet.prototype.setSessionExpiredChecker=function(checker){this.sessionExpiredChecker=checker;
};Spry.Data.HTTPSourceDataSet.prototype.onRequestResponse=function(cachedRequest,req){this.setDataFromDoc(cachedRequest.rawData);};Spry.Data.HTTPSourceDataSet.prototype.onRequestError=function(cachedRequest,req){this.notifyObservers("onLoadError",req);};Spry.Data.HTTPSourceDataSet.prototype.onRequestSessionExpired=function(cachedRequest,req){this.notifyObservers("onSessionExpired",req);
};Spry.Data.HTTPSourceDataSet.LoadManager={};Spry.Data.HTTPSourceDataSet.LoadManager.cache=[];Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest=function(reqInfo,xhRequestProcessor,sessionExpiredChecker){Spry.Utils.Notifier.call(this);this.reqInfo=reqInfo;this.rawData=null;this.timer=null;this.state=Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.NOT_LOADED;
this.xhRequestProcessor=xhRequestProcessor;this.sessionExpiredChecker=sessionExpiredChecker;};Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.prototype=new Spry.Utils.Notifier();Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.prototype.constructor=Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest;
Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.NOT_LOADED=1;Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.LOAD_REQUESTED=2;Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.LOAD_FAILED=3;Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.LOAD_SUCCESSFUL=4;Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.prototype.loadDataCallback=function(req){if(req.xhRequest.readyState!=4){return;
}var rawData=null;if(this.xhRequestProcessor){rawData=this.xhRequestProcessor(req.xhRequest);}if(this.sessionExpiredChecker){Spry.Utils.setOptions(req,{"rawData":rawData},false);if(this.sessionExpiredChecker(req)){this.state=Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.LOAD_FAILED;this.notifyObservers("onRequestSessionExpired",req);
this.observers.length=0;return;}}if(!rawData){this.state=Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.LOAD_FAILED;this.notifyObservers("onRequestError",req);this.observers.length=0;return;}this.rawData=rawData;this.state=Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.LOAD_SUCCESSFUL;this.notifyObservers("onRequestResponse",req);
this.observers.length=0;};Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.prototype.loadData=function(){var self=this;this.cancelLoadData();this.rawData=null;this.state=Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.LOAD_REQUESTED;var reqInfo=this.reqInfo.clone();reqInfo.successCallback=function(req){self.loadDataCallback(req);
};reqInfo.errorCallback=reqInfo.successCallback;this.timer=setTimeout(function(){self.timer=null;Spry.Utils.loadURL(reqInfo.method,reqInfo.url,reqInfo.async,reqInfo.successCallback,reqInfo);},0);};Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.prototype.cancelLoadData=function(){if(this.state==Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.LOAD_REQUESTED){if(this.timer){this.timer.clearTimeout();
this.timer=null;}this.rawData=null;this.state=Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.NOT_LOADED;}};Spry.Data.HTTPSourceDataSet.LoadManager.getCacheKey=function(reqInfo){return reqInfo.method+"::"+reqInfo.url+"::"+reqInfo.postData+"::"+reqInfo.username;};Spry.Data.HTTPSourceDataSet.LoadManager.loadData=function(reqInfo,ds,useCache){if(!reqInfo){return null;
}var cacheObj=null;var cacheKey=null;if(useCache){cacheKey=Spry.Data.HTTPSourceDataSet.LoadManager.getCacheKey(reqInfo);cacheObj=Spry.Data.HTTPSourceDataSet.LoadManager.cache[cacheKey];}if(cacheObj){if(cacheObj.state==Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.LOAD_REQUESTED){if(ds){cacheObj.addObserver(ds);
}return cacheObj;}else{if(cacheObj.state==Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest.LOAD_SUCCESSFUL){if(ds){setTimeout(function(){ds.setDataFromDoc(cacheObj.rawData);},0);}return cacheObj;}}}if(!cacheObj){cacheObj=new Spry.Data.HTTPSourceDataSet.LoadManager.CachedRequest(reqInfo,(ds?ds.xhRequestProcessor:null),(ds?ds.sessionExpiredChecker:null));
if(useCache){Spry.Data.HTTPSourceDataSet.LoadManager.cache[cacheKey]=cacheObj;cacheObj.addObserver({onRequestError:function(){Spry.Data.HTTPSourceDataSet.LoadManager.cache[cacheKey]=undefined;}});}}if(ds){cacheObj.addObserver(ds);}cacheObj.loadData();return cacheObj;};Spry.Data.HTTPSourceDataSet.LoadManager.cancelLoadData=function(cacheObj,ds){if(cacheObj){if(ds){cacheObj.removeObserver(ds);
}else{cacheObj.cancelLoadData();}}};Spry.Data.XMLDataSet=function(dataSetURL,dataSetPath,dataSetOptions){this.xpath=dataSetPath;this.doc=null;this.subPaths=[];this.entityEncodeStrings=true;Spry.Data.HTTPSourceDataSet.call(this,dataSetURL,dataSetOptions);var jwType=typeof this.subPaths;if(jwType=="string"||(jwType=="object"&&this.subPaths.constructor!=Array)){this.subPaths=[this.subPaths];
}};Spry.Data.XMLDataSet.prototype=new Spry.Data.HTTPSourceDataSet();Spry.Data.XMLDataSet.prototype.constructor=Spry.Data.XMLDataSet;Spry.Data.XMLDataSet.prototype.getDataRefStrings=function(){var strArr=[];if(this.url){strArr.push(this.url);}if(this.xpath){strArr.push(this.xpath);}if(this.requestInfo&&this.requestInfo.postData){strArr.push(this.requestInfo.postData);
}return strArr;};Spry.Data.XMLDataSet.prototype.getDocument=function(){return this.doc;};Spry.Data.XMLDataSet.prototype.getXPath=function(){return this.xpath;};Spry.Data.XMLDataSet.prototype.setXPath=function(path){if(this.xpath!=path){this.xpath=path;if(this.dataWasLoaded&&this.doc){this.notifyObservers("onPreLoad");
this.setDataFromDoc(this.doc);}}};Spry.Data.XMLDataSet.nodeContainsElementNode=function(node){if(node){node=node.firstChild;while(node){if(node.nodeType==1){return true;}node=node.nextSibling;}}return false;};Spry.Data.XMLDataSet.getNodeText=function(node,encodeText,encodeCData){var txt="";if(!node){return;
}try{var child=node.firstChild;while(child){try{if(child.nodeType==3){txt+=encodeText?Spry.Utils.encodeEntities(child.data):child.data;}else{if(child.nodeType==4){txt+=encodeCData?Spry.Utils.encodeEntities(child.data):child.data;}}}catch(e){Spry.Debug.reportError("Spry.Data.XMLDataSet.getNodeText() exception caught: "+e+"\n");
}child=child.nextSibling;}}catch(e){Spry.Debug.reportError("Spry.Data.XMLDataSet.getNodeText() exception caught: "+e+"\n");}return txt;};Spry.Data.XMLDataSet.createObjectForNode=function(node,encodeText,encodeCData){if(!node){return null;}var obj=new Object();var i=0;var attr=null;try{for(i=0;i<node.attributes.length;
i++){attr=node.attributes[i];if(attr&&attr.nodeType==2){obj["@"+attr.name]=attr.value;}}}catch(e){Spry.Debug.reportError("Spry.Data.XMLDataSet.createObjectForNode() caught exception while accessing attributes: "+e+"\n");}var child=node.firstChild;if(child&&!child.nextSibling&&child.nodeType!=1){obj[node.nodeName]=Spry.Data.XMLDataSet.getNodeText(node,encodeText,encodeCData);
}while(child){if(child.nodeType==1){if(!Spry.Data.XMLDataSet.nodeContainsElementNode(child)){obj[child.nodeName]=Spry.Data.XMLDataSet.getNodeText(child,encodeText,encodeCData);try{var namePrefix=child.nodeName+"/@";for(i=0;i<child.attributes.length;i++){attr=child.attributes[i];if(attr&&attr.nodeType==2){obj[namePrefix+attr.name]=attr.value;
}}}catch(e){Spry.Debug.reportError("Spry.Data.XMLDataSet.createObjectForNode() caught exception while accessing attributes: "+e+"\n");}}}child=child.nextSibling;}return obj;};Spry.Data.XMLDataSet.getRecordSetFromXMLDoc=function(xmlDoc,path,suppressColumns,entityEncodeStrings){if(!xmlDoc||!path){return null;
}var recordSet=new Object();recordSet.xmlDoc=xmlDoc;recordSet.xmlPath=path;recordSet.dataHash=new Object;recordSet.data=new Array;recordSet.getData=function(){return this.data;};var ctx=new ExprContext(xmlDoc);var pathExpr=xpathParse(path);var e=pathExpr.evaluate(ctx);var nodeArray=e.nodeSetValue();var isDOMNodeArray=true;
if(nodeArray&&nodeArray.length>0){isDOMNodeArray=nodeArray[0].nodeType!=2;}var nextID=0;var encodeText=true;var encodeCData=false;if(typeof entityEncodeStrings=="boolean"){encodeText=encodeCData=entityEncodeStrings;}for(var i=0;i<nodeArray.length;i++){var rowObj=null;if(suppressColumns){rowObj=new Object;
}else{if(isDOMNodeArray){rowObj=Spry.Data.XMLDataSet.createObjectForNode(nodeArray[i],encodeText,encodeCData);}else{rowObj=new Object;rowObj["@"+nodeArray[i].name]=nodeArray[i].value;}}if(rowObj){rowObj["ds_RowID"]=nextID++;rowObj["ds_XMLNode"]=nodeArray[i];recordSet.dataHash[rowObj["ds_RowID"]]=rowObj;
recordSet.data.push(rowObj);}}return recordSet;};Spry.Data.XMLDataSet.PathNode=function(path){this.path=path;this.subPaths=[];this.xpath="";};Spry.Data.XMLDataSet.PathNode.prototype.addSubPath=function(path){var node=this.findSubPath(path);if(!node){node=new Spry.Data.XMLDataSet.PathNode(path);this.subPaths.push(node);
}return node;};Spry.Data.XMLDataSet.PathNode.prototype.findSubPath=function(path){var numSubPaths=this.subPaths.length;for(var i=0;i<numSubPaths;i++){var subPath=this.subPaths[i];if(path==subPath.path){return subPath;}}return null;};Spry.Data.XMLDataSet.PathNode.prototype.consolidate=function(){var numSubPaths=this.subPaths.length;
if(!this.xpath&&numSubPaths==1){var subPath=this.subPaths[0];this.path+=((subPath[0]!="/")?"/":"")+subPath.path;this.xpath=subPath.xpath;this.subPaths=subPath.subPaths;this.consolidate();return;}for(var i=0;i<numSubPaths;i++){this.subPaths[i].consolidate();}};Spry.Data.XMLDataSet.prototype.convertXPathsToPathTree=function(xpathArray){var xpaLen=xpathArray.length;
var root=new Spry.Data.XMLDataSet.PathNode("");for(var i=0;i<xpaLen;i++){var xpath=xpathArray[i];var cleanXPath=xpath.replace(/\/\//g,"/__SPRYDS__");cleanXPath=cleanXPath.replace(/^\//,"");var pathItems=cleanXPath.split(/\//);var pathItemsLen=pathItems.length;var node=root;for(var j=0;j<pathItemsLen;
j++){var path=pathItems[j].replace(/__SPRYDS__/,"//");node=node.addSubPath(path);}node.xpath=xpath;}root.consolidate();return root;};Spry.Data.XMLDataSet.prototype.flattenSubPaths=function(rs,subPaths){if(!rs||!subPaths){return;}var numSubPaths=subPaths.length;if(numSubPaths<1){return;}var data=rs.data;
var dataHash={};var xpathArray=[];var cleanedXPathArray=[];for(var i=0;i<numSubPaths;i++){var subPath=subPaths[i];if(typeof subPath=="object"){subPath=subPath.path;}if(!subPath){subPath="";}xpathArray[i]=Spry.Data.Region.processDataRefString(null,subPath,this.dataSetsForDataRefStrings);cleanedXPathArray[i]=xpathArray[i].replace(/\[.*\]/g,"");
}var row;var numRows=data.length;var newData=[];for(var i=0;i<numRows;i++){row=data[i];var newRows=[row];for(var j=0;j<numSubPaths;j++){var newRS=Spry.Data.XMLDataSet.getRecordSetFromXMLDoc(row.ds_XMLNode,xpathArray[j],(subPaths[j].xpath?false:true),this.entityEncodeStrings);if(newRS&&newRS.data&&newRS.data.length){if(typeof subPaths[j]=="object"&&subPaths[j].subPaths){var sp=subPaths[j].subPaths;
spType=typeof sp;if(spType=="string"){sp=[sp];}else{if(spType=="object"&&spType.constructor==Object){sp=[sp];}}this.flattenSubPaths(newRS,sp);}var newRSData=newRS.data;var numRSRows=newRSData.length;var cleanedXPath=cleanedXPathArray[j]+"/";var numNewRows=newRows.length;var joinedRows=[];for(var k=0;
k<numNewRows;k++){var newRow=newRows[k];for(var l=0;l<numRSRows;l++){var newRowObj=new Object;var newRSRow=newRSData[l];for(prop in newRow){newRowObj[prop]=newRow[prop];}for(var prop in newRSRow){var newPropName=cleanedXPath+prop;if(cleanedXPath==(prop+"/")||cleanedXPath.search(new RegExp("\\/"+prop+"\\/$"))!=-1){newPropName=cleanedXPathArray[j];
}newRowObj[newPropName]=newRSRow[prop];}joinedRows.push(newRowObj);}}newRows=joinedRows;}}newData=newData.concat(newRows);}data=newData;numRows=data.length;for(i=0;i<numRows;i++){row=data[i];row.ds_RowID=i;dataHash[row.ds_RowID]=row;}rs.data=data;rs.dataHash=dataHash;};Spry.Data.XMLDataSet.prototype.loadDataIntoDataSet=function(rawDataDoc){var rs=null;
var mainXPath=Spry.Data.Region.processDataRefString(null,this.xpath,this.dataSetsForDataRefStrings);var subPaths=this.subPaths;var suppressColumns=false;if(this.subPaths&&this.subPaths.length>0){var processedSubPaths=[];var numSubPaths=subPaths.length;for(var i=0;i<numSubPaths;i++){var subPathStr=Spry.Data.Region.processDataRefString(null,subPaths[i],this.dataSetsForDataRefStrings);
if(subPathStr.charAt(0)!="/"){subPathStr=mainXPath+"/"+subPathStr;}processedSubPaths.push(subPathStr);}processedSubPaths.unshift(mainXPath);var commonParent=this.convertXPathsToPathTree(processedSubPaths);mainXPath=commonParent.path;subPaths=commonParent.subPaths;suppressColumns=commonParent.xpath?false:true;
}rs=Spry.Data.XMLDataSet.getRecordSetFromXMLDoc(rawDataDoc,mainXPath,suppressColumns,this.entityEncodeStrings);if(!rs){Spry.Debug.reportError("Spry.Data.XMLDataSet.loadDataIntoDataSet() failed to create dataSet '"+this.name+"'for '"+this.xpath+"' - "+this.url+"\n");return;}this.flattenSubPaths(rs,subPaths);
this.doc=rs.xmlDoc;this.data=rs.data;this.dataHash=rs.dataHash;this.dataWasLoaded=(this.doc!=null);};Spry.Data.XMLDataSet.prototype.xhRequestProcessor=function(xhRequest){var resp=xhRequest.responseXML;var manualParseRequired=false;if(xhRequest.status!=200){if(xhRequest.status==0){if(xhRequest.responseText&&(!resp||!resp.firstChild)){manualParseRequired=true;
}}}else{if(!resp){manualParseRequired=true;}}if(manualParseRequired){resp=Spry.Utils.stringToXMLDoc(xhRequest.responseText);}if(!resp||!resp.firstChild||resp.firstChild.nodeName=="parsererror"){return null;}return resp;};Spry.Data.XMLDataSet.prototype.sessionExpiredChecker=function(req){if(req.xhRequest.responseText=="session expired"){return true;
}else{if(req.rawData){var firstChild=req.rawData.documentElement.firstChild;if(firstChild&&firstChild.nodeValue=="session expired"){return true;}}}return false;};Spry.Data.Region=function(regionNode,name,isDetailRegion,data,dataSets,regionStates,regionStateMap,hasBehaviorAttributes){this.regionNode=regionNode;
this.name=name;this.isDetailRegion=isDetailRegion;this.data=data;this.dataSets=dataSets;this.hasBehaviorAttributes=hasBehaviorAttributes;this.tokens=null;this.currentState=null;this.states={ready:true};this.stateMap={};Spry.Utils.setOptions(this.states,regionStates);Spry.Utils.setOptions(this.stateMap,regionStateMap);
for(var i=0;i<this.dataSets.length;i++){var ds=this.dataSets[i];try{if(ds){ds.addObserver(this);}}catch(e){Spry.Debug.reportError("Failed to add '"+this.name+"' as a dataSet observer!\n");}}};Spry.Data.Region.hiddenRegionClassName="SpryHiddenRegion";Spry.Data.Region.evenRowClassName="even";Spry.Data.Region.oddRowClassName="odd";
Spry.Data.Region.notifiers={};Spry.Data.Region.evalScripts=true;Spry.Data.Region.addObserver=function(regionID,observer){var n=Spry.Data.Region.notifiers[regionID];if(!n){n=new Spry.Utils.Notifier();Spry.Data.Region.notifiers[regionID]=n;}n.addObserver(observer);};Spry.Data.Region.removeObserver=function(regionID,observer){var n=Spry.Data.Region.notifiers[regionID];
if(n){n.removeObserver(observer);}};Spry.Data.Region.notifyObservers=function(methodName,region,data){var n=Spry.Data.Region.notifiers[region.name];if(n){var dataObj={};if(data&&typeof data=="object"){dataObj=data;}else{dataObj.data=data;}dataObj.region=region;dataObj.regionID=region.name;dataObj.regionNode=region.regionNode;
n.notifyObservers(methodName,dataObj);}};Spry.Data.Region.RS_Error=1;Spry.Data.Region.RS_LoadingData=2;Spry.Data.Region.RS_PreUpdate=4;Spry.Data.Region.RS_PostUpdate=8;Spry.Data.Region.prototype.getState=function(){return this.currentState;};Spry.Data.Region.prototype.mapState=function(stateName,newStateName){this.stateMap[stateName]=newStateName;
};Spry.Data.Region.prototype.getMappedState=function(stateName){var mappedState=this.stateMap[stateName];return mappedState?mappedState:stateName;};Spry.Data.Region.prototype.setState=function(stateName,suppressNotfications){var stateObj={state:stateName,mappedState:this.getMappedState(stateName)};if(!suppressNotfications){Spry.Data.Region.notifyObservers("onPreStateChange",this,stateObj);
}this.currentState=stateObj.mappedState?stateObj.mappedState:stateName;if(this.states[stateName]){var notificationData={state:this.currentState};if(!suppressNotfications){Spry.Data.Region.notifyObservers("onPreUpdate",this,notificationData);}var str=this.transform();if(Spry.Data.Region.debug){Spry.Debug.trace("<hr />Generated region markup for '"+this.name+"':<br /><br />"+Spry.Utils.encodeEntities(str));
}Spry.Utils.setInnerHTML(this.regionNode,str,!Spry.Data.Region.evalScripts);if(this.hasBehaviorAttributes){this.attachBehaviors();}if(!suppressNotfications){Spry.Data.Region.notifyObservers("onPostUpdate",this,notificationData);}}if(!suppressNotfications){Spry.Data.Region.notifyObservers("onPostStateChange",this,stateObj);
}};Spry.Data.Region.prototype.getDataSets=function(){return this.dataSets;};Spry.Data.Region.prototype.addDataSet=function(aDataSet){if(!aDataSet){return;}if(!this.dataSets){this.dataSets=new Array;}for(var i=0;i<this.dataSets.length;i++){if(this.dataSets[i]==aDataSet){return;}}this.dataSets.push(aDataSet);
aDataSet.addObserver(this);};Spry.Data.Region.prototype.removeDataSet=function(aDataSet){if(!aDataSet||this.dataSets){return;}for(var i=0;i<this.dataSets.length;i++){if(this.dataSets[i]==aDataSet){this.dataSets.splice(i,1);aDataSet.removeObserver(this);return;}}};Spry.Data.Region.prototype.onPreLoad=function(dataSet){if(this.currentState!="loading"){this.setState("loading");
}};Spry.Data.Region.prototype.onLoadError=function(dataSet){if(this.currentState!="error"){this.setState("error");}Spry.Data.Region.notifyObservers("onError",this);};Spry.Data.Region.prototype.onSessionExpired=function(dataSet){if(this.currentState!="expired"){this.setState("expired");}Spry.Data.Region.notifyObservers("onExpired",this);
};Spry.Data.Region.prototype.onCurrentRowChanged=function(dataSet,data){if(this.isDetailRegion){this.updateContent();}};Spry.Data.Region.prototype.onPostSort=function(dataSet,data){this.updateContent();};Spry.Data.Region.prototype.onDataChanged=function(dataSet,data){this.updateContent();};Spry.Data.Region.enableBehaviorAttributes=true;
Spry.Data.Region.behaviorAttrs={};Spry.Data.Region.behaviorAttrs["spry:select"]={attach:function(rgn,node,value){var selectGroupName=null;try{selectGroupName=node.attributes.getNamedItem("spry:selectgroup").value;}catch(e){}if(!selectGroupName){selectGroupName="default";}Spry.Utils.addEventListener(node,"click",function(event){Spry.Utils.SelectionManager.select(selectGroupName,node,value);
},false);if(node.attributes.getNamedItem("spry:selected")){Spry.Utils.SelectionManager.select(selectGroupName,node,value);}}};Spry.Data.Region.behaviorAttrs["spry:hover"]={attach:function(rgn,node,value){Spry.Utils.addEventListener(node,"mouseover",function(event){Spry.Utils.addClassName(node,value);
},false);Spry.Utils.addEventListener(node,"mouseout",function(event){Spry.Utils.removeClassName(node,value);},false);}};Spry.Data.Region.setUpRowNumberForEvenOddAttr=function(node,attr,value,rowNumAttrName){if(!value){Spry.Debug.showError("The "+attr+" attribute requires a CSS class name as its value!");
node.attributes.removeNamedItem(attr);return;}var dsName="";var valArr=value.split(/\s/);if(valArr.length>1){dsName=valArr[0];node.setAttribute(attr,valArr[1]);}node.setAttribute(rowNumAttrName,"{"+(dsName?(dsName+"::"):"")+"ds_RowNumber}");};Spry.Data.Region.behaviorAttrs["spry:even"]={setup:function(node,value){Spry.Data.Region.setUpRowNumberForEvenOddAttr(node,"spry:even",value,"spryevenrownumber");
},attach:function(rgn,node,value){if(value){rowNumAttr=node.attributes.getNamedItem("spryevenrownumber");if(rowNumAttr&&rowNumAttr.value){var rowNum=parseInt(rowNumAttr.value);if(rowNum%2){Spry.Utils.addClassName(node,value);}}}node.removeAttribute("spry:even");node.removeAttribute("spryevenrownumber");
}};Spry.Data.Region.behaviorAttrs["spry:odd"]={setup:function(node,value){Spry.Data.Region.setUpRowNumberForEvenOddAttr(node,"spry:odd",value,"spryoddrownumber");},attach:function(rgn,node,value){if(value){rowNumAttr=node.attributes.getNamedItem("spryoddrownumber");if(rowNumAttr&&rowNumAttr.value){var rowNum=parseInt(rowNumAttr.value);
if(rowNum%2==0){Spry.Utils.addClassName(node,value);}}}node.removeAttribute("spry:odd");node.removeAttribute("spryoddrownumber");}};Spry.Data.Region.setRowAttrClickHandler=function(node,dsName,rowAttr,funcName){if(dsName){var ds=Spry.Data.getDataSetByName(dsName);if(ds){rowIDAttr=node.attributes.getNamedItem(rowAttr);
if(rowIDAttr){var rowAttrVal=rowIDAttr.value;if(rowAttrVal){Spry.Utils.addEventListener(node,"click",function(event){ds[funcName](rowAttrVal);},false);}}}}};Spry.Data.Region.behaviorAttrs["spry:setrow"]={setup:function(node,value){if(!value){Spry.Debug.reportError("The spry:setrow attribute requires a data set name as its value!");
node.removeAttribute("spry:setrow");return;}node.setAttribute("spryrowid","{"+value+"::ds_RowID}");},attach:function(rgn,node,value){Spry.Data.Region.setRowAttrClickHandler(node,value,"spryrowid","setCurrentRow");node.removeAttribute("spry:setrow");node.removeAttribute("spryrowid");}};Spry.Data.Region.behaviorAttrs["spry:setrownumber"]={setup:function(node,value){if(!value){Spry.Debug.reportError("The spry:setrownumber attribute requires a data set name as its value!");
node.removeAttribute("spry:setrownumber");return;}node.setAttribute("spryrownumber","{"+value+"::ds_RowID}");},attach:function(rgn,node,value){Spry.Data.Region.setRowAttrClickHandler(node,value,"spryrownumber","setCurrentRowNumber");node.removeAttribute("spry:setrownumber");node.removeAttribute("spryrownumber");
}};Spry.Data.Region.behaviorAttrs["spry:sort"]={attach:function(rgn,node,value){if(!value){return;}var ds=rgn.getDataSets()[0];var sortOrder="toggle";var colArray=value.split(/\s/);if(colArray.length>1){var specifiedDS=Spry.Data.getDataSetByName(colArray[0]);if(specifiedDS){ds=specifiedDS;colArray.shift();
}if(colArray.length>1){var str=colArray[colArray.length-1];if(str=="ascending"||str=="descending"||str=="toggle"){sortOrder=str;colArray.pop();}}}if(ds&&colArray.length>0){Spry.Utils.addEventListener(node,"click",function(event){ds.sort(colArray,sortOrder);},false);}node.removeAttribute("spry:sort");
}};Spry.Data.Region.prototype.attachBehaviors=function(){var rgn=this;Spry.Utils.getNodesByFunc(this.regionNode,function(node){if(!node||node.nodeType!=1){return false;}try{var bAttrs=Spry.Data.Region.behaviorAttrs;for(var bAttrName in bAttrs){var attr=node.attributes.getNamedItem(bAttrName);if(attr){var behavior=bAttrs[bAttrName];
if(behavior&&behavior.attach){behavior.attach(rgn,node,attr.value);}}}}catch(e){}return false;});};Spry.Data.Region.prototype.updateContent=function(){var allDataSetsReady=true;var dsArray=this.getDataSets();if(!dsArray||dsArray.length<1){Spry.Debug.reportError("updateContent(): Region '"+this.name+"' has no data set!\n");
return;}for(var i=0;i<dsArray.length;i++){var ds=dsArray[i];if(ds){if(ds.getLoadDataRequestIsPending()){allDataSetsReady=false;}else{if(!ds.getDataWasLoaded()){ds.loadData();allDataSetsReady=false;}}}}if(!allDataSetsReady){Spry.Data.Region.notifyObservers("onLoadingData",this);return;}this.setState("ready");
};Spry.Data.Region.prototype.clearContent=function(){this.regionNode.innerHTML="";};Spry.Data.Region.processContentPI=function(inStr){var outStr="";var regexp=/<!--\s*<\/?spry:content\s*[^>]*>\s*-->/mg;var searchStartIndex=0;var processingContentTag=0;while(inStr.length){var results=regexp.exec(inStr);
if(!results||!results[0]){outStr+=inStr.substr(searchStartIndex,inStr.length-searchStartIndex);break;}if(!processingContentTag&&results.index!=searchStartIndex){outStr+=inStr.substr(searchStartIndex,results.index-searchStartIndex);}if(results[0].search(/<\//)!=-1){--processingContentTag;if(processingContentTag){Spry.Debug.reportError("Nested spry:content regions are not allowed!\n");
}}else{++processingContentTag;var dataRefStr=results[0].replace(/.*\bdataref="/,"");outStr+=dataRefStr.replace(/".*$/,"");}searchStartIndex=regexp.lastIndex;}return outStr;};Spry.Data.Region.prototype.tokenizeData=function(dataStr){if(!dataStr){return null;}var rootToken=new Spry.Data.Region.Token(Spry.Data.Region.Token.LIST_TOKEN,null,null,null);
var tokenStack=new Array;var parseStr=Spry.Data.Region.processContentPI(dataStr);tokenStack.push(rootToken);var regexp=/((<!--\s*){0,1}<\/{0,1}spry:[^>]+>(\s*-->){0,1})|((\{|%7[bB])[^\}\s%]+(\}|%7[dD]))/mg;var searchStartIndex=0;while(parseStr.length){var results=regexp.exec(parseStr);var token=null;
if(!results||!results[0]){var str=parseStr.substr(searchStartIndex,parseStr.length-searchStartIndex);token=new Spry.Data.Region.Token(Spry.Data.Region.Token.STRING_TOKEN,null,str,str);tokenStack[tokenStack.length-1].addChild(token);break;}if(results.index!=searchStartIndex){var str=parseStr.substr(searchStartIndex,results.index-searchStartIndex);
token=new Spry.Data.Region.Token(Spry.Data.Region.Token.STRING_TOKEN,null,str,str);tokenStack[tokenStack.length-1].addChild(token);}if(results[0].search(/^({|%7[bB])/)!=-1){var valueName=results[0];var regionStr=results[0];valueName=valueName.replace(/^({|%7[bB])/,"");valueName=valueName.replace(/(}|%7[dD])$/,"");
var dataSetName=null;var splitArray=valueName.split(/::/);if(splitArray.length>1){dataSetName=splitArray[0];valueName=splitArray[1];}regionStr=regionStr.replace(/^%7[bB]/,"{");regionStr=regionStr.replace(/%7[dD]$/,"}");token=new Spry.Data.Region.Token(Spry.Data.Region.Token.VALUE_TOKEN,dataSetName,valueName,new String(regionStr));
tokenStack[tokenStack.length-1].addChild(token);}else{if(results[0].charAt(0)=="<"){var piName=results[0].replace(/^(<!--\s*){0,1}<\/?/,"");piName=piName.replace(/>(\s*-->){0,1}|\s.*$/,"");if(results[0].search(/<\//)!=-1){if(tokenStack[tokenStack.length-1].tokenType!=Spry.Data.Region.Token.PROCESSING_INSTRUCTION_TOKEN){Spry.Debug.reportError("Invalid processing instruction close tag: "+piName+" -- "+results[0]+"\n");
return null;}tokenStack.pop();}else{var piDesc=Spry.Data.Region.PI.instructions[piName];if(piDesc){var dataSet=null;var selectedDataSetName="";if(results[0].search(/^.*\bselect=\"/)!=-1){selectedDataSetName=results[0].replace(/^.*\bselect=\"/,"");selectedDataSetName=selectedDataSetName.replace(/".*$/,"");
if(selectedDataSetName){dataSet=Spry.Data.getDataSetByName(selectedDataSetName);if(!dataSet){Spry.Debug.reportError("Failed to retrieve data set ("+selectedDataSetName+") for "+piName+"\n");selectedDataSetName="";}}}var jsExpr=null;if(results[0].search(/^.*\btest=\"/)!=-1){jsExpr=results[0].replace(/^.*\btest=\"/,"");
jsExpr=jsExpr.replace(/".*$/,"");jsExpr=Spry.Utils.decodeEntities(jsExpr);}var regionState=null;if(results[0].search(/^.*\bname=\"/)!=-1){regionState=results[0].replace(/^.*\bname=\"/,"");regionState=regionState.replace(/".*$/,"");regionState=Spry.Utils.decodeEntities(regionState);}var piData=new Spry.Data.Region.Token.PIData(piName,selectedDataSetName,jsExpr,regionState);
token=new Spry.Data.Region.Token(Spry.Data.Region.Token.PROCESSING_INSTRUCTION_TOKEN,dataSet,piData,new String(results[0]));tokenStack[tokenStack.length-1].addChild(token);tokenStack.push(token);}else{Spry.Debug.reportError("Unsupported region processing instruction: "+results[0]+"\n");return null;}}}else{Spry.Debug.reportError("Invalid region token: "+results[0]+"\n");
return null;}}searchStartIndex=regexp.lastIndex;}return rootToken;};Spry.Data.Region.prototype.callScriptFunction=function(funcName,processContext){var result=undefined;funcName=funcName.replace(/^\s*\{?\s*function::\s*|\s*\}?\s*$/g,"");var func=Spry.Utils.getObjectByName(funcName);if(func){result=func(this.name,function(){return processContext.getValueFromDataSet.apply(processContext,arguments);
});}return result;};Spry.Data.Region.prototype.evaluateExpression=function(exprStr,processContext){var result=undefined;try{if(exprStr.search(/^\s*function::/)!=-1){result=this.callScriptFunction(exprStr,processContext);}else{result=Spry.Utils.eval(Spry.Data.Region.processDataRefString(processContext,exprStr,null,true));
}}catch(e){Spry.Debug.trace("Caught exception in Spry.Data.Region.prototype.evaluateExpression() while evaluating: "+Spry.Utils.encodeEntities(exprStr)+"\n    Exception:"+e+"\n");}return result;};Spry.Data.Region.prototype.processTokenChildren=function(outputArr,token,processContext){var children=token.children;
var len=children.length;for(var i=0;i<len;i++){this.processTokens(outputArr,children[i],processContext);}};Spry.Data.Region.prototype.processTokens=function(outputArr,token,processContext){var i=0;switch(token.tokenType){case Spry.Data.Region.Token.LIST_TOKEN:this.processTokenChildren(outputArr,token,processContext);
break;case Spry.Data.Region.Token.STRING_TOKEN:outputArr.push(token.data);break;case Spry.Data.Region.Token.PROCESSING_INSTRUCTION_TOKEN:if(token.data.name=="spry:repeat"){var dataSet=null;if(token.dataSet){dataSet=token.dataSet;}else{dataSet=this.dataSets[0];}if(dataSet){var dsContext=processContext.getDataSetContext(dataSet);
if(!dsContext){Spry.Debug.reportError("processTokens() failed to get a data set context!\n");break;}dsContext.pushState();var dataSetRows=dsContext.getData();var numRows=dataSetRows.length;for(i=0;i<numRows;i++){dsContext.setRowIndex(i);var testVal=true;if(token.data.jsExpr){testVal=this.evaluateExpression(token.data.jsExpr,processContext);
}if(testVal){this.processTokenChildren(outputArr,token,processContext);}}dsContext.popState();}}else{if(token.data.name=="spry:if"){var testVal=true;if(token.data.jsExpr){testVal=this.evaluateExpression(token.data.jsExpr,processContext);}if(testVal){this.processTokenChildren(outputArr,token,processContext);
}}else{if(token.data.name=="spry:choose"){var defaultChild=null;var childToProcess=null;var testVal=false;var j=0;for(j=0;j<token.children.length;j++){var child=token.children[j];if(child.tokenType==Spry.Data.Region.Token.PROCESSING_INSTRUCTION_TOKEN){if(child.data.name=="spry:when"){if(child.data.jsExpr){testVal=this.evaluateExpression(child.data.jsExpr,processContext);
if(testVal){childToProcess=child;break;}}}else{if(child.data.name=="spry:default"){defaultChild=child;}}}}if(!childToProcess&&defaultChild){childToProcess=defaultChild;}if(childToProcess){this.processTokenChildren(outputArr,childToProcess,processContext);}}else{if(token.data.name=="spry:state"){var testVal=true;
if(!token.data.regionState||token.data.regionState==this.currentState){this.processTokenChildren(outputArr,token,processContext);}}else{Spry.Debug.reportError("processTokens(): Unknown processing instruction: "+token.data.name+"\n");return"";}}}}break;case Spry.Data.Region.Token.VALUE_TOKEN:var dataSet=token.dataSet;
var val=undefined;if(dataSet&&dataSet=="function"){val=this.callScriptFunction(token.data,processContext);}else{if(!dataSet&&this.dataSets&&this.dataSets.length>0&&this.dataSets[0]){dataSet=this.dataSets[0];}if(!dataSet){Spry.Debug.reportError("processTokens(): Value reference has no data set specified: "+token.regionStr+"\n");
return"";}val=processContext.getValueFromDataSet(dataSet,token.data);}if(typeof val!="undefined"){outputArr.push(val+"");}break;default:Spry.Debug.reportError("processTokens(): Invalid token type: "+token.regionStr+"\n");break;}};Spry.Data.Region.prototype.transform=function(){if(this.data&&!this.tokens){this.tokens=this.tokenizeData(this.data);
}if(!this.tokens){return"";}processContext=new Spry.Data.Region.ProcessingContext(this);if(!processContext){return"";}var outputArr=[""];this.processTokens(outputArr,this.tokens,processContext);return outputArr.join("");};Spry.Data.Region.PI={};Spry.Data.Region.PI.instructions={};Spry.Data.Region.PI.buildOpenTagForValueAttr=function(ele,piName,attrName){if(!ele||!piName){return"";
}var jsExpr="";try{var testAttr=ele.attributes.getNamedItem(piName);if(testAttr&&testAttr.value){jsExpr=Spry.Utils.encodeEntities(testAttr.value);}}catch(e){jsExpr="";}if(!jsExpr){Spry.Debug.reportError(piName+" attribute requires a JavaScript expression that returns true or false!\n");return"";}return"<"+Spry.Data.Region.PI.instructions[piName].tagName+" "+attrName+'="'+jsExpr+'">';
};Spry.Data.Region.PI.buildOpenTagForTest=function(ele,piName){return Spry.Data.Region.PI.buildOpenTagForValueAttr(ele,piName,"test");};Spry.Data.Region.PI.buildOpenTagForState=function(ele,piName){return Spry.Data.Region.PI.buildOpenTagForValueAttr(ele,piName,"name");};Spry.Data.Region.PI.buildOpenTagForRepeat=function(ele,piName){if(!ele||!piName){return"";
}var selectAttrStr="";try{var selectAttr=ele.attributes.getNamedItem(piName);if(selectAttr&&selectAttr.value){selectAttrStr=selectAttr.value;selectAttrStr=selectAttrStr.replace(/\s/g,"");}}catch(e){selectAttrStr="";}if(!selectAttrStr){Spry.Debug.reportError(piName+" attribute requires a data set name!\n");
return"";}var testAttrStr="";try{var testAttr=ele.attributes.getNamedItem("spry:test");if(testAttr){if(testAttr.value){testAttrStr=' test="'+Spry.Utils.encodeEntities(testAttr.value)+'"';}ele.attributes.removeNamedItem(testAttr.nodeName);}}catch(e){testAttrStr="";}return"<"+Spry.Data.Region.PI.instructions[piName].tagName+' select="'+selectAttrStr+'"'+testAttrStr+">";
};Spry.Data.Region.PI.buildOpenTagForContent=function(ele,piName){if(!ele||!piName){return"";}var dataRefStr="";try{var contentAttr=ele.attributes.getNamedItem(piName);if(contentAttr&&contentAttr.value){dataRefStr=Spry.Utils.encodeEntities(contentAttr.value);}}catch(e){dataRefStr="";}if(!dataRefStr){Spry.Debug.reportError(piName+" attribute requires a data reference!\n");
return"";}return"<"+Spry.Data.Region.PI.instructions[piName].tagName+' dataref="'+dataRefStr+'">';};Spry.Data.Region.PI.buildOpenTag=function(ele,piName){return"<"+Spry.Data.Region.PI.instructions[piName].tagName+">";};Spry.Data.Region.PI.buildCloseTag=function(ele,piName){return"</"+Spry.Data.Region.PI.instructions[piName].tagName+">";
};Spry.Data.Region.PI.instructions["spry:state"]={tagName:"spry:state",childrenOnly:false,getOpenTag:Spry.Data.Region.PI.buildOpenTagForState,getCloseTag:Spry.Data.Region.PI.buildCloseTag};Spry.Data.Region.PI.instructions["spry:if"]={tagName:"spry:if",childrenOnly:false,getOpenTag:Spry.Data.Region.PI.buildOpenTagForTest,getCloseTag:Spry.Data.Region.PI.buildCloseTag};
Spry.Data.Region.PI.instructions["spry:repeat"]={tagName:"spry:repeat",childrenOnly:false,getOpenTag:Spry.Data.Region.PI.buildOpenTagForRepeat,getCloseTag:Spry.Data.Region.PI.buildCloseTag};Spry.Data.Region.PI.instructions["spry:repeatchildren"]={tagName:"spry:repeat",childrenOnly:true,getOpenTag:Spry.Data.Region.PI.buildOpenTagForRepeat,getCloseTag:Spry.Data.Region.PI.buildCloseTag};
Spry.Data.Region.PI.instructions["spry:choose"]={tagName:"spry:choose",childrenOnly:true,getOpenTag:Spry.Data.Region.PI.buildOpenTag,getCloseTag:Spry.Data.Region.PI.buildCloseTag};Spry.Data.Region.PI.instructions["spry:when"]={tagName:"spry:when",childrenOnly:false,getOpenTag:Spry.Data.Region.PI.buildOpenTagForTest,getCloseTag:Spry.Data.Region.PI.buildCloseTag};
Spry.Data.Region.PI.instructions["spry:default"]={tagName:"spry:default",childrenOnly:false,getOpenTag:Spry.Data.Region.PI.buildOpenTag,getCloseTag:Spry.Data.Region.PI.buildCloseTag};Spry.Data.Region.PI.instructions["spry:content"]={tagName:"spry:content",childrenOnly:true,getOpenTag:Spry.Data.Region.PI.buildOpenTagForContent,getCloseTag:Spry.Data.Region.PI.buildCloseTag};
Spry.Data.Region.PI.orderedInstructions=["spry:state","spry:if","spry:repeat","spry:repeatchildren","spry:choose","spry:when","spry:default","spry:content"];Spry.Data.Region.getTokensFromStr=function(str){if(!str){return null;}return str.match(/{[^}]+}/g);};Spry.Data.Region.processDataRefString=function(processingContext,regionStr,dataSetsToUse,isJSExpr){if(!regionStr){return"";
}if(!processingContext&&!dataSetsToUse){return regionStr;}var resultStr="";var re=new RegExp("\\{([^\\}:]+::)?[^\\}]+\\}","g");var startSearchIndex=0;while(startSearchIndex<regionStr.length){var reArray=re.exec(regionStr);if(!reArray||!reArray[0]){resultStr+=regionStr.substr(startSearchIndex,regionStr.length-startSearchIndex);
return resultStr;}if(reArray.index!=startSearchIndex){resultStr+=regionStr.substr(startSearchIndex,reArray.index-startSearchIndex);}var dsName="";if(reArray[0].search(/^\{[^}:]+::/)!=-1){dsName=reArray[0].replace(/^\{|::.*/g,"");}var fieldName=reArray[0].replace(/^\{|.*::|\}/g,"");var row=null;var val="";
if(processingContext){val=processingContext.getValueFromDataSet(dsName,fieldName);}else{var ds=dsName?dataSetsToUse[dsName]:dataSetsToUse[0];if(ds){val=ds.getValue(fieldName);}}if(typeof val!="undefined"){val+="";resultStr+=isJSExpr?Spry.Utils.escapeQuotesAndLineBreaks(val):val;}if(startSearchIndex==re.lastIndex){var leftOverIndex=reArray.index+reArray[0].length;
if(leftOverIndex<regionStr.length){resultStr+=regionStr.substr(leftOverIndex);}break;}startSearchIndex=re.lastIndex;}return resultStr;};Spry.Data.Region.strToDataSetsArray=function(str,returnRegionNames){var dataSetsArr=new Array;var foundHash={};if(!str){return dataSetsArr;}str=str.replace(/\s+/g," ");
str=str.replace(/^\s|\s$/g,"");var arr=str.split(/ /);for(var i=0;i<arr.length;i++){if(arr[i]&&!Spry.Data.Region.PI.instructions[arr[i]]){try{var dataSet=Spry.Data.getDataSetByName(arr[i]);if(!foundHash[arr[i]]){if(returnRegionNames){dataSetsArr.push(arr[i]);}else{dataSetsArr.push(dataSet);}foundHash[arr[i]]=true;
}}catch(e){}}}return dataSetsArr;};Spry.Data.Region.DSContext=function(dataSet,processingContext){var m_dataSet=dataSet;var m_processingContext=processingContext;var m_curRowIndexArray=[{rowIndex:-1}];var m_parent=null;var m_children=[];var getInternalRowIndex=function(){return m_curRowIndexArray[m_curRowIndexArray.length-1].rowIndex;
};this.resetAll=function(){m_curRowIndexArray=[{rowIndex:m_dataSet.getCurrentRow()}];};this.getDataSet=function(){return m_dataSet;};this.getNumRows=function(unfiltered){var data=this.getCurrentState().data;return data?data.length:m_dataSet.getRowCount(unfiltered);};this.getData=function(){var data=this.getCurrentState().data;
return data?data:m_dataSet.getData();};this.setData=function(data){this.getCurrentState().data=data;};this.getValue=function(valueName,rowContext){var result="";var curState=this.getCurrentState();var ds=curState.nestedDS?curState.nestedDS:this.getDataSet();if(ds){result=ds.getValue(valueName,rowContext);
}return result;};this.getCurrentRow=function(){if(m_curRowIndexArray.length<2||getInternalRowIndex()<0){return m_dataSet.getCurrentRow();}var data=this.getData();var curRowIndex=getInternalRowIndex();if(curRowIndex<0||curRowIndex>data.length){Spry.Debug.reportError("Invalid index used in Spry.Data.Region.DSContext.getCurrentRow()!\n");
return null;}return data[curRowIndex];};this.getRowIndex=function(){var curRowIndex=getInternalRowIndex();if(curRowIndex>=0){return curRowIndex;}return m_dataSet.getRowNumber(m_dataSet.getCurrentRow());};this.setRowIndex=function(rowIndex){this.getCurrentState().rowIndex=rowIndex;var data=this.getData();
var numChildren=m_children.length;for(var i=0;i<numChildren;i++){m_children[i].syncDataWithParentRow(this,rowIndex,data);}};this.syncDataWithParentRow=function(parentDSContext,rowIndex,parentData){var row=parentData[rowIndex];if(row){nestedDS=m_dataSet.getNestedDataSetForParentRow(row);if(nestedDS){var currentState=this.getCurrentState();
currentState.nestedDS=nestedDS;currentState.data=nestedDS.getData();currentState.rowIndex=nestedDS.getCurrentRowNumber();currentState.rowIndex=currentState.rowIndex<0?0:currentState.rowIndex;var numChildren=m_children.length;for(var i=0;i<numChildren;i++){m_children[i].syncDataWithParentRow(this,currentState.rowIndex,currentState.data);
}}}};this.pushState=function(){var curState=this.getCurrentState();var newState=new Object;newState.rowIndex=curState.rowIndex;newState.data=curState.data;newState.nestedDS=curState.nestedDS;m_curRowIndexArray.push(newState);var numChildren=m_children.length;for(var i=0;i<numChildren;i++){m_children[i].pushState();
}};this.popState=function(){if(m_curRowIndexArray.length<2){Spry.Debug.reportError("Stack underflow in Spry.Data.Region.DSContext.popState()!\n");return;}var numChildren=m_children.length;for(var i=0;i<numChildren;i++){m_children[i].popState();}m_curRowIndexArray.pop();};this.getCurrentState=function(){return m_curRowIndexArray[m_curRowIndexArray.length-1];
};this.addChild=function(childDSContext){var numChildren=m_children.length;for(var i=0;i<numChildren;i++){if(m_children[i]==childDSContext){return;}}m_children.push(childDSContext);};};Spry.Data.Region.ProcessingContext=function(region){this.region=region;this.dataSetContexts=[];if(region&&region.dataSets){var dsArray=region.dataSets.slice(0);
var dsArrayLen=dsArray.length;for(var i=0;i<dsArrayLen;i++){var ds=region.dataSets[i];while(ds&&ds.getParentDataSet){var doesExist=false;ds=ds.getParentDataSet();if(ds&&this.indexOf(dsArray,ds)==-1){dsArray.push(ds);}}}for(i=0;i<dsArray.length;i++){this.dataSetContexts.push(new Spry.Data.Region.DSContext(dsArray[i],this));
}var dsContexts=this.dataSetContexts;var numDSContexts=dsContexts.length;for(i=0;i<numDSContexts;i++){var dsc=dsContexts[i];var ds=dsc.getDataSet();if(ds.getParentDataSet){var parentDS=ds.getParentDataSet();if(parentDS){var pdsc=this.getDataSetContext(parentDS);if(pdsc){pdsc.addChild(dsc);}}}}}};Spry.Data.Region.ProcessingContext.prototype.indexOf=function(arr,item){if(arr){var arrLen=arr.length;
for(var i=0;i<arrLen;i++){if(arr[i]==item){return i;}}}return -1;};Spry.Data.Region.ProcessingContext.prototype.getDataSetContext=function(dataSet){if(!dataSet){if(this.dataSetContexts.length>0){return this.dataSetContexts[0];}return null;}if(typeof dataSet=="string"){dataSet=Spry.Data.getDataSetByName(dataSet);
if(!dataSet){return null;}}for(var i=0;i<this.dataSetContexts.length;i++){var dsc=this.dataSetContexts[i];if(dsc.getDataSet()==dataSet){return dsc;}}return null;};Spry.Data.Region.ProcessingContext.prototype.getValueFromDataSet=function(){var dsName="";var columnName="";if(arguments.length>1){dsName=arguments[0];
columnName=arguments[1];}else{var dataRef=arguments[0].replace(/\s*{\s*|\s*}\s*/g,"");if(dataRef.search("::")!=-1){dsName=dataRef.replace(/::.*/,"");columnName=dataRef.replace(/.*::/,"");}else{columnName=dataRef;}}var result="";var dsContext=this.getDataSetContext(dsName);if(dsContext){result=dsContext.getValue(columnName,dsContext.getCurrentRow());
}else{Spry.Debug.reportError("getValueFromDataSet: Failed to get "+dsName+" context for the "+this.region.regionNode.id+" region.\n");}return result;};Spry.Data.Region.ProcessingContext.prototype.$v=Spry.Data.Region.ProcessingContext.prototype.getValueFromDataSet;Spry.Data.Region.ProcessingContext.prototype.getCurrentRowForDataSet=function(dataSet){var dsc=this.getDataSetContext(dataSet);
if(dsc){return dsc.getCurrentRow();}return null;};Spry.Data.Region.Token=function(tokenType,dataSet,data,regionStr){var self=this;this.tokenType=tokenType;this.dataSet=dataSet;this.data=data;this.regionStr=regionStr;this.parent=null;this.children=null;};Spry.Data.Region.Token.prototype.addChild=function(child){if(!child){return;
}if(!this.children){this.children=new Array;}this.children.push(child);child.parent=this;};Spry.Data.Region.Token.LIST_TOKEN=0;Spry.Data.Region.Token.STRING_TOKEN=1;Spry.Data.Region.Token.PROCESSING_INSTRUCTION_TOKEN=2;Spry.Data.Region.Token.VALUE_TOKEN=3;Spry.Data.Region.Token.PIData=function(piName,data,jsExpr,regionState){var self=this;
this.name=piName;this.data=data;this.jsExpr=jsExpr;this.regionState=regionState;};Spry.Utils.addLoadListener(function(){setTimeout(function(){if(Spry.Data.initRegionsOnLoad){Spry.Data.initRegions();}},0);});var Spry;if(!Spry){Spry={};}if(!Spry.Utils){Spry.Utils={};}Spry.$=function(element){if(arguments.length>1){for(var i=0,elements=[],length=arguments.length;
i<length;i++){elements.push(Spry.$(arguments[i]));}return elements;}if(typeof element=="string"){element=document.getElementById(element);}return element;};Spry.Utils.setAttribute=function(ele,name,value){ele=Spry.$(ele);if(!ele||!name){return;}if(name=="class"){ele.className=value;}else{ele.setAttribute(name,value);
}};Spry.Utils.removeAttribute=function(ele,name){ele=Spry.$(ele);if(!ele||!name){return;}try{ele.removeAttribute(name);if(name=="class"){ele.removeAttribute("className");}}catch(e){}};Spry.Utils.addClassName=function(ele,className){ele=Spry.$(ele);if(!ele||!className||(ele.className&&ele.className.search(new RegExp("\\b"+className+"\\b"))!=-1)){return;
}ele.className+=(ele.className?" ":"")+className;};Spry.Utils.removeClassName=function(ele,className){ele=Spry.$(ele);if(Spry.Utils.hasClassName(ele,className)){ele.className=ele.className.replace(new RegExp("\\s*\\b"+className+"\\b","g"),"");}};Spry.Utils.toggleClassName=function(ele,className){if(Spry.Utils.hasClassName(ele,className)){Spry.Utils.removeClassName(ele,className);
}else{Spry.Utils.addClassName(ele,className);}};Spry.Utils.hasClassName=function(ele,className){ele=Spry.$(ele);if(!ele||!className||!ele.className||ele.className.search(new RegExp("\\b"+className+"\\b"))==-1){return false;}return true;};Spry.Utils.camelizeString=function(str){var cStr="";var a=str.split("-");
for(var i=0;i<a.length;i++){var s=a[i];if(s){cStr=cStr?(cStr+s.charAt(0).toUpperCase()+s.substring(1)):s;}}return cStr;};Spry.Utils.styleStringToObject=function(styleStr){var o={};if(styleStr){pvA=styleStr.split(";");for(var i=0;i<pvA.length;i++){var pv=pvA[i];if(pv&&pv.indexOf(":")!=-1){var nvA=pv.split(":");
var n=nvA[0].replace(/^\s*|\s*$/g,"");var v=nvA[1].replace(/^\s*|\s*$/g,"");if(n&&v){o[Spry.Utils.camelizeString(n)]=v;}}}}return o;};Spry.Utils.addEventListener=function(element,eventType,handler,capture){try{if(!Spry.Utils.eventListenerIsBoundToElement(element,eventType,handler,capture)){element=Spry.$(element);
handler=Spry.Utils.bindEventListenerToElement(element,eventType,handler,capture);if(element.addEventListener){element.addEventListener(eventType,handler,capture);}else{if(element.attachEvent){element.attachEvent("on"+eventType,handler);}}}}catch(e){}};Spry.Utils.removeEventListener=function(element,eventType,handler,capture){try{element=Spry.$(element);
handler=Spry.Utils.unbindEventListenerFromElement(element,eventType,handler,capture);if(element.removeEventListener){element.removeEventListener(eventType,handler,capture);}else{if(element.detachEvent){element.detachEvent("on"+eventType,handler);}}}catch(e){}};Spry.Utils.eventListenerHash={};Spry.Utils.nextEventListenerID=1;
Spry.Utils.getHashForElementAndHandler=function(element,eventType,handler,capture){var hash=null;element=Spry.$(element);if(element){if(typeof element.spryEventListenerID=="undefined"){element.spryEventListenerID="e"+(Spry.Utils.nextEventListenerID++);}if(typeof handler.spryEventHandlerID=="undefined"){handler.spryEventHandlerID="h"+(Spry.Utils.nextEventListenerID++);
}hash=element.spryEventListenerID+"-"+handler.spryEventHandlerID+"-"+eventType+(capture?"-capture":"");}return hash;};Spry.Utils.eventListenerIsBoundToElement=function(element,eventType,handler,capture){element=Spry.$(element);var hash=Spry.Utils.getHashForElementAndHandler(element,eventType,handler,capture);
return Spry.Utils.eventListenerHash[hash]!=undefined;};Spry.Utils.bindEventListenerToElement=function(element,eventType,handler,capture){element=Spry.$(element);var hash=Spry.Utils.getHashForElementAndHandler(element,eventType,handler,capture);if(Spry.Utils.eventListenerHash[hash]){return Spry.Utils.eventListenerHash[hash];
}return Spry.Utils.eventListenerHash[hash]=function(e){e=e||window.event;if(!e.preventDefault){e.preventDefault=function(){this.returnValue=false;};}if(!e.stopPropagation){e.stopPropagation=function(){this.cancelBubble=true;};}var result=handler.call(element,e);if(result==false){e.preventDefault();e.stopPropagation();
}return result;};};Spry.Utils.unbindEventListenerFromElement=function(element,eventType,handler,capture){element=Spry.$(element);var hash=Spry.Utils.getHashForElementAndHandler(element,eventType,handler,capture);if(Spry.Utils.eventListenerHash[hash]){handler=Spry.Utils.eventListenerHash[hash];Spry.Utils.eventListenerHash[hash]=undefined;
}return handler;};Spry.Utils.addLoadListener=function(handler){if(typeof window.addEventListener!="undefined"){window.addEventListener("load",handler,false);}else{if(typeof document.addEventListener!="undefined"){document.addEventListener("load",handler,false);}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",handler);
}}}};Spry.Utils.getAncestor=function(ele,selector){ele=Spry.$(ele);if(ele){var s=Spry.$$.tokenizeSequence(selector?selector:"*")[0];var t=s?s[0]:null;if(t){var p=ele.parentNode;while(p){if(t.match(p)){return p;}p=p.parentNode;}}}return null;};Spry.$$=function(selectorSequence,rootNode){if(!rootNode){rootNode=document;
}else{rootNode=Spry.$(rootNode);}var sequences=Spry.$$.tokenizeSequence(selectorSequence);var matches=[];Spry.$$.addExtensions(matches);++Spry.$$.queryID;var nid=0;var ns=sequences.length;for(var i=0;i<ns;i++){var m=Spry.$$.processTokens(sequences[i],rootNode);var nm=m.length;for(var j=0;j<nm;j++){var n=m[j];
if(!n.spry$$ID){n.spry$$ID=++nid;matches.push(n);}}}var nm=matches.length;for(i=0;i<nm;i++){matches[i].spry$$ID=undefined;}return matches;};Spry.$$.cache={};Spry.$$.queryID=0;Spry.$$.Token=function(){this.type=Spry.$$.Token.SELECTOR;this.name="*";this.id="";this.classes=[];this.attrs=[];this.pseudos=[];
};Spry.$$.Token.Attr=function(n,v){this.name=n;this.value=v?new RegExp(v):undefined;};Spry.$$.Token.PseudoClass=function(pstr){this.name=pstr.replace(/\(.*/,"");this.arg=pstr.replace(/^[^\(\)]*\(?\s*|\)\s*$/g,"");this.func=Spry.$$.pseudoFuncs[this.name];};Spry.$$.Token.SELECTOR=0;Spry.$$.Token.COMBINATOR=1;
Spry.$$.Token.prototype.match=function(ele,nameAlreadyMatches){if(this.type==Spry.$$.Token.COMBINATOR){return false;}if(!nameAlreadyMatches&&this.name!="*"&&this.name!=ele.nodeName.toLowerCase()){return false;}if(this.id&&this.id!=ele.id){return false;}var classes=this.classes;var len=classes.length;
for(var i=0;i<len;i++){if(!ele.className||!classes[i].value.test(ele.className)){return false;}}var attrs=this.attrs;len=attrs.length;for(var i=0;i<len;i++){var a=attrs[i];var an=ele.attributes.getNamedItem(a.name);if(!an||(!a.value&&an.nodeValue==undefined)||(a.value&&!a.value.test(an.nodeValue))){return false;
}}var ps=this.pseudos;var len=ps.length;for(var i=0;i<len;i++){var p=ps[i];if(p&&p.func&&!p.func(p.arg,ele,this)){return false;}}return true;};Spry.$$.Token.prototype.getNodeNameIfTypeMatches=function(ele){var nodeName=ele.nodeName.toLowerCase();if(this.name!="*"){if(this.name!=nodeName){return null;
}return this.name;}return nodeName;};Spry.$$.escapeRegExpCharsRE=/\/|\.|\*|\+|\(|\)|\[|\]|\{|\}|\\|\|/g;Spry.$$.tokenizeSequence=function(s){var cc=Spry.$$.cache[s];if(cc){return cc;}var tokenExpr=/(\[[^\"'~\^\$\*\|\]=]+([~\^\$\*\|]?=\s*('[^']*'|"[^"]*"|[^"'\]]+))?\s*\])|((:[^\.#:\s,>~\+\[\]]+\(([^\(\)]+|\([^\(\)]*\))*\))|[\.#:]?[^\.#:\s,>~\+\[\]]+)|(\s*[\s,>~\+]\s*)/g;
var tkn=new Spry.$$.Token;var sequence=[];sequence.push(tkn);var tokenSequences=[];tokenSequences.push(sequence);s=s.replace(/^\s*|\s*$/,"");var expMatch=tokenExpr.exec(s);while(expMatch){var tstr=expMatch[0];var c=tstr.charAt(0);switch(c){case".":tkn.classes.push(new Spry.$$.Token.Attr("class","\\b"+tstr.substr(1)+"\\b"));
break;case"#":tkn.id=tstr.substr(1);break;case":":tkn.pseudos.push(new Spry.$$.Token.PseudoClass(tstr));break;case"[":var attrComps=tstr.match(/\[([^\"'~\^\$\*\|\]=]+)(([~\^\$\*\|]?=)\s*('[^']*'|"[^"]*"|[^"'\]]+))?\s*\]/);var name=attrComps[1];var matchType=attrComps[3];var val=attrComps[4];if(val){val=val.replace(/^['"]|['"]$/g,"");
val=val.replace(Spry.$$.escapeRegExpCharsRE,"\\$&");}var matchStr=undefined;switch(matchType){case"=":matchStr="^"+val+"$";break;case"^=":matchStr="^"+val;break;case"$=":matchStr=val+"$";break;case"~=":case"|=":matchStr="\\b"+val+"\\b";break;case"*=":matchStr=val;break;}tkn.attrs.push(new Spry.$$.Token.Attr(name,matchStr));
break;default:var combiMatch=tstr.match(/^\s*([\s,~>\+])\s*$/);if(combiMatch){if(combiMatch[1]==","){sequence=new Array;tokenSequences.push(sequence);tkn=new Spry.$$.Token;sequence.push(tkn);}else{tkn=new Spry.$$.Token;tkn.type=Spry.$$.Token.COMBINATOR;tkn.name=combiMatch[1];sequence.push(tkn);tkn=new Spry.$$.Token();
sequence.push(tkn);}}else{tkn.name=tstr.toLowerCase();}break;}expMatch=tokenExpr.exec(s);}Spry.$$.cache[s]=tokenSequences;return tokenSequences;};Spry.$$.combinatorFuncs={" ":function(nodes,token){var uid=++Spry.$$.uniqueID;var results=[];var nn=nodes.length;for(var i=0;i<nn;i++){var n=nodes[i];if(uid!=n.spry$$uid){var ea=nodes[i].getElementsByTagName(token.name);
var ne=ea.length;for(var j=0;j<ne;j++){var e=ea[j];if(token.match(e,true)){results.push(e);}e.spry$$uid=uid;}}}return results;},">":function(nodes,token){var results=[];var nn=nodes.length;for(var i=0;i<nn;i++){var n=nodes[i].firstChild;while(n){if(n.nodeType==1&&token.match(n)){results.push(n);}n=n.nextSibling;
}}return results;},"+":function(nodes,token){var results=[];var nn=nodes.length;for(var i=0;i<nn;i++){var n=nodes[i].nextSibling;while(n&&n.nodeType!=1){n=n.nextSibling;}if(n&&token.match(n)){results.push(n);}}return results;},"~":function(nodes,token){var uid=++Spry.$$.uniqueID;var results=[];var nn=nodes.length;
for(var i=0;i<nn;i++){var n=nodes[i].nextSibling;while(n){if(n.nodeType==1){if(uid==n.spry$$uid){break;}if(token.match(n)){results.push(n);n.spry$$uid=uid;}}n=n.nextSibling;}}return results;}};Spry.$$.uniqueID=0;Spry.$$.pseudoFuncs={":first-child":function(arg,node,token){var n=node.previousSibling;while(n){if(n.nodeType==1){return false;
}n=n.previousSibling;}return true;},":last-child":function(arg,node,token){var n=node.nextSibling;while(n){if(n.nodeType==1){return false;}n=n.nextSibling;}return true;},":empty":function(arg,node,token){var n=node.firstChild;while(n){switch(n.nodeType){case 1:case 3:case 4:case 5:return false;}n=n.nextSibling;
}return true;},":nth-child":function(arg,node,token){return Spry.$$.nthChild(arg,node,token);},":nth-last-child":function(arg,node,token){return Spry.$$.nthChild(arg,node,token,true);},":nth-of-type":function(arg,node,token){return Spry.$$.nthChild(arg,node,token,false,true);},":nth-last-of-type":function(arg,node,token){return Spry.$$.nthChild(arg,node,token,true,true);
},":first-of-type":function(arg,node,token){var nodeName=token.getNodeNameIfTypeMatches(node);if(!nodeName){return false;}var n=node.previousSibling;while(n){if(n.nodeType==1&&nodeName==n.nodeName.toLowerCase()){return false;}n=n.previousSibling;}return true;},":last-of-type":function(arg,node,token){var nodeName=token.getNodeNameIfTypeMatches(node);
if(!nodeName){return false;}var n=node.nextSibling;while(n){if(n.nodeType==1&&nodeName==n.nodeName.toLowerCase()){return false;}n=n.nextSibling;}return true;},":only-child":function(arg,node,token){var f=Spry.$$.pseudoFuncs;return f[":first-child"](arg,node,token)&&f[":last-child"](arg,node,token);},":only-of-type":function(arg,node,token){var f=Spry.$$.pseudoFuncs;
return f[":first-of-type"](arg,node,token)&&f[":last-of-type"](arg,node,token);},":not":function(arg,node,token){var s=Spry.$$.tokenizeSequence(arg)[0];var t=s?s[0]:null;return !t||!t.match(node);},":enabled":function(arg,node,token){return !node.disabled;},":disabled":function(arg,node,token){return node.disabled;
},":checked":function(arg,node,token){return node.checked;},":root":function(arg,node,token){return node.parentNode&&node.ownerDocument&&node.parentNode==node.ownerDocument;}};Spry.$$.nthRegExp=/((-|[0-9]+)?n)?([+-]?[0-9]*)/;Spry.$$.nthCache={"even":{a:2,b:0,mode:1,invalid:false},"odd":{a:2,b:1,mode:1,invalid:false},"2n":{a:2,b:0,mode:1,invalid:false},"2n+1":{a:2,b:1,mode:1,invalid:false}};
Spry.$$.parseNthChildString=function(str){var o=Spry.$$.nthCache[str];if(!o){var m=str.match(Spry.$$.nthRegExp);var n=m[1];var a=m[2];var b=m[3];if(!a){a=n?1:0;}else{if(a=="-"){a=-1;}else{a=parseInt(a,10);}}b=b?parseInt(b,10):0;var mode=(a==0)?0:((a>0)?1:-1);var invalid=false;if(a>0&&b<0){b=b%a;b=((b=(b%a))<0)?a+b:b;
}else{if(a<0){if(b<0){invalid=true;}else{a=Math.abs(a);}}}o=new Object;o.a=a;o.b=b;o.mode=mode;o.invalid=invalid;Spry.$$.nthCache[str]=o;}return o;};Spry.$$.nthChild=function(arg,node,token,fromLastSib,matchNodeName){if(matchNodeName){var nodeName=token.getNodeNameIfTypeMatches(node);if(!nodeName){return false;
}}var o=Spry.$$.parseNthChildString(arg);if(o.invalid){return false;}var qidProp="spry$$ncQueryID";var posProp="spry$$ncPos";var countProp="spry$$ncCount";if(matchNodeName){qidProp+=nodeName;posProp+=nodeName;countProp+=nodeName;}var parent=node.parentNode;if(parent[qidProp]!=Spry.$$.queryID){var pos=0;
parent[qidProp]=Spry.$$.queryID;var c=parent.firstChild;while(c){if(c.nodeType==1&&(!matchNodeName||nodeName==c.nodeName.toLowerCase())){c[posProp]=++pos;}c=c.nextSibling;}parent[countProp]=pos;}pos=node[posProp];if(fromLastSib){pos=parent[countProp]-pos+1;}if(o.mode==0){return pos==o.b;}if(o.mode>0){return(pos<o.b)?false:(!((pos-o.b)%o.a));
}return(pos>o.b)?false:(!((o.b-pos)%o.a));};Spry.$$.processTokens=function(tokens,root){var numTokens=tokens.length;var nodeSet=[root];var combiFunc=null;for(var i=0;i<numTokens&&nodeSet.length>0;i++){var t=tokens[i];if(t.type==Spry.$$.Token.SELECTOR){if(combiFunc){nodeSet=combiFunc(nodeSet,t);combiFunc=null;
}else{nodeSet=Spry.$$.getMatchingElements(nodeSet,t);}}else{combiFunc=Spry.$$.combinatorFuncs[t.name];}}return nodeSet;};Spry.$$.getMatchingElements=function(nodes,token){var results=[];if(token.id){n=nodes[0];if(n&&n.ownerDocument){var e=n.ownerDocument.getElementById(token.id);if(e){if(token.match(e)){results.push(e);
}}return results;}}var nn=nodes.length;for(var i=0;i<nn;i++){var n=nodes[i];var ea=n.getElementsByTagName(token.name);var ne=ea.length;for(var j=0;j<ne;j++){var e=ea[j];if(token.match(e,true)){results.push(e);}}}return results;};Spry.$$.addExtensions=function(a){for(var f in Spry.$$.Results){a[f]=Spry.$$.Results[f];
}};Spry.$$.Results={};Spry.$$.Results.forEach=function(func){var n=this.length;for(var i=0;i<n;i++){func(this[i]);}return this;};Spry.$$.Results.setAttribute=function(name,value){return this.forEach(function(n){Spry.Utils.setAttribute(n,name,value);});};Spry.$$.Results.removeAttribute=function(name){return this.forEach(function(n){Spry.Utils.removeAttribute(n,name);
});};Spry.$$.Results.addClassName=function(className){return this.forEach(function(n){Spry.Utils.addClassName(n,className);});};Spry.$$.Results.removeClassName=function(className){return this.forEach(function(n){Spry.Utils.removeClassName(n,className);});};Spry.$$.Results.toggleClassName=function(className){return this.forEach(function(n){Spry.Utils.toggleClassName(n,className);
});};Spry.$$.Results.addEventListener=function(eventType,handler,capture,bindHandler){return this.forEach(function(n){Spry.Utils.addEventListener(n,eventType,handler,capture,bindHandler);});};Spry.$$.Results.removeEventListener=function(eventType,handler,capture){return this.forEach(function(n){Spry.Utils.removeEventListener(n,eventType,handler,capture);
});};Spry.$$.Results.setStyle=function(style){if(style){style=Spry.Utils.styleStringToObject(style);this.forEach(function(n){for(var p in style){try{n.style[p]=style[p];}catch(e){}}});}return this;};Spry.$$.Results.setProperty=function(prop,value){if(prop){if(typeof prop=="string"){var p={};p[prop]=value;
prop=p;}this.forEach(function(n){for(var p in prop){try{n[p]=prop[p];}catch(e){}}});}return this;};var Spry;if(!Spry){Spry={};}if(!Spry.Utils){Spry.Utils={};}Spry.Utils.submitForm=function(form,callback,opts){if(!form){return true;}if(typeof form=="string"){form=Spry.$(form)||document.forms[form];}var frmOpts={};
frmOpts.method=form.getAttribute("method");frmOpts.url=form.getAttribute("action")||document.location.href;frmOpts.enctype=form.getAttribute("enctype");Spry.Utils.setOptions(frmOpts,opts);var submitData=Spry.Utils.extractParamsFromForm(form,frmOpts.elements);if(frmOpts.additionalData){submitData+="&"+frmOpts.additionalData;
}if(!frmOpts.enctype||frmOpts.enctype.toLowerCase()!="multipart/form-data"){frmOpts.method=(frmOpts.method&&frmOpts.method.toLowerCase()=="post")?"POST":"GET";if(frmOpts.method=="GET"){if(frmOpts.url.indexOf("?")==-1){frmOpts.url+="?";}else{frmOpts.url+="&";}frmOpts.url+=submitData;}else{if(!frmOpts.headers){frmOpts.headers={};
}if(!frmOpts.headers["Content-Type"]||frmOpts.headers["Content-Type"].indexOf("application/x-www-form-urlencoded")==-1){frmOpts.headers["Content-Type"]="application/x-www-form-urlencoded";}frmOpts.postData=submitData;}Spry.Utils.loadURL(frmOpts.method,frmOpts.url,true,callback,frmOpts);return false;}return true;
};Spry.Utils.extractParamsFromForm=function(form,elements){if(!form){return"";}if(typeof form=="string"){form=document.getElementById(form)||document.forms[form];}var formElements;if(elements){formElements=","+elements.join(",")+",";}var compStack=new Array();var el;for(var i=0;i<form.elements.length;
i++){el=form.elements[i];if(el.disabled||!el.name){continue;}if(!el.type){continue;}if(formElements&&formElements.indexOf(","+el.name+",")==-1){continue;}switch(el.type.toLowerCase()){case"text":case"password":case"textarea":case"hidden":case"submit":compStack.push(encodeURIComponent(el.name)+"="+encodeURIComponent(el.value));
break;case"select-one":var value="";var opt;if(el.selectedIndex>=0){opt=el.options[el.selectedIndex];value=opt.value||opt.text;}compStack.push(encodeURIComponent(el.name)+"="+encodeURIComponent(value));break;case"select-multiple":for(var j=0;j<el.length;j++){if(el.options[j].selected){value=el.options[j].value||el.options[j].text;
compStack.push(encodeURIComponent(el.name)+"="+encodeURIComponent(value));}}break;case"checkbox":case"radio":if(el.checked){compStack.push(encodeURIComponent(el.name)+"="+encodeURIComponent(el.value));}break;default:break;}}return compStack.join("&");};if(!this.JSON){this.JSON={};}(function(){function f(n){return n<10?"0"+n:n;
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();
};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);
case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;
}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");
};}}());(function(){var o=this,A=o._,r=typeof StopIteration!=="undefined"?StopIteration:"__break__",k=Array.prototype,m=Object.prototype,i=k.slice,B=k.unshift,C=m.toString,p=m.hasOwnProperty,s=k.forEach,t=k.map,u=k.reduce,v=k.reduceRight,w=k.filter,x=k.every,y=k.some,n=k.indexOf,z=k.lastIndexOf;m=Array.isArray;
var D=Object.keys,b=function(a){return new l(a);};if(typeof exports!=="undefined"){exports._=b;}o._=b;b.VERSION="1.1.2";var j=b.each=b.forEach=function(a,c,d){try{if(s&&a.forEach===s){a.forEach(c,d);}else{if(b.isNumber(a.length)){for(var e=0,f=a.length;e<f;e++){c.call(d,a[e],e,a);}}else{for(e in a){p.call(a,e)&&c.call(d,a[e],e,a);
}}}}catch(g){if(g!=r){throw g;}}return a;};b.map=function(a,c,d){if(t&&a.map===t){return a.map(c,d);}var e=[];j(a,function(f,g,h){e[e.length]=c.call(d,f,g,h);});return e;};b.reduce=b.foldl=b.inject=function(a,c,d,e){if(u&&a.reduce===u){if(e){c=b.bind(c,e);}return a.reduce(c,d);}j(a,function(f,g,h){d=c.call(e,d,f,g,h);
});return d;};b.reduceRight=b.foldr=function(a,c,d,e){if(v&&a.reduceRight===v){if(e){c=b.bind(c,e);}return a.reduceRight(c,d);}a=(b.isArray(a)?a.slice():b.toArray(a)).reverse();return b.reduce(a,c,d,e);};b.find=b.detect=function(a,c,d){var e;j(a,function(f,g,h){if(c.call(d,f,g,h)){e=f;b.breakLoop();}});
return e;};b.filter=b.select=function(a,c,d){if(w&&a.filter===w){return a.filter(c,d);}var e=[];j(a,function(f,g,h){if(c.call(d,f,g,h)){e[e.length]=f;}});return e;};b.reject=function(a,c,d){var e=[];j(a,function(f,g,h){c.call(d,f,g,h)||(e[e.length]=f);});return e;};b.every=b.all=function(a,c,d){c=c||b.identity;
if(x&&a.every===x){return a.every(c,d);}var e=true;j(a,function(f,g,h){(e=e&&c.call(d,f,g,h))||b.breakLoop();});return e;};b.some=b.any=function(a,c,d){c=c||b.identity;if(y&&a.some===y){return a.some(c,d);}var e=false;j(a,function(f,g,h){if(e=c.call(d,f,g,h)){b.breakLoop();}});return e;};b.include=b.contains=function(a,c){if(n&&a.indexOf===n){return a.indexOf(c)!=-1;
}var d=false;j(a,function(e){if(d=e===c){b.breakLoop();}});return d;};b.invoke=function(a,c){var d=i.call(arguments,2);return b.map(a,function(e){return(c?e[c]:e).apply(e,d);});};b.pluck=function(a,c){return b.map(a,function(d){return d[c];});};b.max=function(a,c,d){if(!c&&b.isArray(a)){return Math.max.apply(Math,a);
}var e={computed:-Infinity};j(a,function(f,g,h){g=c?c.call(d,f,g,h):f;g>=e.computed&&(e={value:f,computed:g});});return e.value;};b.min=function(a,c,d){if(!c&&b.isArray(a)){return Math.min.apply(Math,a);}var e={computed:Infinity};j(a,function(f,g,h){g=c?c.call(d,f,g,h):f;g<e.computed&&(e={value:f,computed:g});
});return e.value;};b.sortBy=function(a,c,d){return b.pluck(b.map(a,function(e,f,g){return{value:e,criteria:c.call(d,e,f,g)};}).sort(function(e,f){var g=e.criteria,h=f.criteria;return g<h?-1:g>h?1:0;}),"value");};b.sortedIndex=function(a,c,d){d=d||b.identity;for(var e=0,f=a.length;e<f;){var g=e+f>>1;
d(a[g])<d(c)?e=g+1:f=g;}return e;};b.toArray=function(a){if(!a){return[];}if(a.toArray){return a.toArray();}if(b.isArray(a)){return a;}if(b.isArguments(a)){return i.call(a);}return b.values(a);};b.size=function(a){return b.toArray(a).length;};b.first=b.head=function(a,c,d){return c&&!d?i.call(a,0,c):a[0];
};b.rest=b.tail=function(a,c,d){return i.call(a,b.isUndefined(c)||d?1:c);};b.last=function(a){return a[a.length-1];};b.compact=function(a){return b.filter(a,function(c){return !!c;});};b.flatten=function(a){return b.reduce(a,function(c,d){if(b.isArray(d)){return c.concat(b.flatten(d));}c[c.length]=d;
return c;},[]);};b.without=function(a){var c=i.call(arguments,1);return b.filter(a,function(d){return !b.include(c,d);});};b.uniq=b.unique=function(a,c){return b.reduce(a,function(d,e,f){if(0==f||(c===true?b.last(d)!=e:!b.include(d,e))){d[d.length]=e;}return d;},[]);};b.intersect=function(a){var c=i.call(arguments,1);
return b.filter(b.uniq(a),function(d){return b.every(c,function(e){return b.indexOf(e,d)>=0;});});};b.zip=function(){for(var a=i.call(arguments),c=b.max(b.pluck(a,"length")),d=Array(c),e=0;e<c;e++){d[e]=b.pluck(a,""+e);}return d;};b.indexOf=function(a,c){if(n&&a.indexOf===n){return a.indexOf(c);}for(var d=0,e=a.length;
d<e;d++){if(a[d]===c){return d;}}return -1;};b.lastIndexOf=function(a,c){if(z&&a.lastIndexOf===z){return a.lastIndexOf(c);}for(var d=a.length;d--;){if(a[d]===c){return d;}}return -1;};b.range=function(a,c,d){var e=i.call(arguments),f=e.length<=1;a=f?0:e[0];c=f?e[0]:e[1];d=e[2]||1;e=Math.max(Math.ceil((c-a)/d),0);
f=0;for(var g=Array(e);f<e;){g[f++]=a;a+=d;}return g;};b.bind=function(a,c){var d=i.call(arguments,2);return function(){return a.apply(c||{},d.concat(i.call(arguments)));};};b.bindAll=function(a){var c=i.call(arguments,1);if(c.length==0){c=b.functions(a);}j(c,function(d){a[d]=b.bind(a[d],a);});return a;
};b.memoize=function(a,c){var d={};c=c||b.identity;return function(){var e=c.apply(this,arguments);return e in d?d[e]:d[e]=a.apply(this,arguments);};};b.delay=function(a,c){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(a,d);},c);};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)));
};b.wrap=function(a,c){return function(){var d=[a].concat(i.call(arguments));return c.apply(c,d);};};b.compose=function(){var a=i.call(arguments);return function(){for(var c=i.call(arguments),d=a.length-1;d>=0;d--){c=[a[d].apply(this,c)];}return c[0];};};b.keys=D||function(a){if(b.isArray(a)){return b.range(0,a.length);
}var c=[],d;for(d in a){if(p.call(a,d)){c[c.length]=d;}}return c;};b.values=function(a){return b.map(a,b.identity);};b.functions=b.methods=function(a){return b.filter(b.keys(a),function(c){return b.isFunction(a[c]);}).sort();};b.extend=function(a){j(i.call(arguments,1),function(c){for(var d in c){a[d]=c[d];
}});return a;};b.clone=function(a){return b.isArray(a)?a.slice():b.extend({},a);};b.tap=function(a,c){c(a);return a;};b.isEqual=function(a,c){if(a===c){return true;}var d=typeof a;if(d!=typeof c){return false;}if(a==c){return true;}if(!a&&c||a&&!c){return false;}if(a.isEqual){return a.isEqual(c);}if(b.isDate(a)&&b.isDate(c)){return a.getTime()===c.getTime();
}if(b.isNaN(a)&&b.isNaN(c)){return false;}if(b.isRegExp(a)&&b.isRegExp(c)){return a.source===c.source&&a.global===c.global&&a.ignoreCase===c.ignoreCase&&a.multiline===c.multiline;}if(d!=="object"){return false;}if(a.length&&a.length!==c.length){return false;}d=b.keys(a);var e=b.keys(c);if(d.length!=e.length){return false;
}for(var f in a){if(!(f in c)||!b.isEqual(a[f],c[f])){return false;}}return true;};b.isEmpty=function(a){if(b.isArray(a)||b.isString(a)){return a.length===0;}for(var c in a){if(p.call(a,c)){return false;}}return true;};b.isElement=function(a){return !!(a&&a.nodeType==1);};b.isArray=m||function(a){return !!(a&&a.concat&&a.unshift&&!a.callee);
};b.isArguments=function(a){return !!(a&&a.callee);};b.isFunction=function(a){return !!(a&&a.constructor&&a.call&&a.apply);};b.isString=function(a){return !!(a===""||a&&a.charCodeAt&&a.substr);};b.isNumber=function(a){return a===+a||C.call(a)==="[object Number]";};b.isBoolean=function(a){return a===true||a===false;
};b.isDate=function(a){return !!(a&&a.getTimezoneOffset&&a.setUTCFullYear);};b.isRegExp=function(a){return !!(a&&a.test&&a.exec&&(a.ignoreCase||a.ignoreCase===false));};b.isNaN=function(a){return b.isNumber(a)&&isNaN(a);};b.isNull=function(a){return a===null;};b.isUndefined=function(a){return typeof a=="undefined";
};b.noConflict=function(){o._=A;return this;};b.identity=function(a){return a;};b.times=function(a,c,d){for(var e=0;e<a;e++){c.call(d,e);}};b.breakLoop=function(){throw r;};b.mixin=function(a){j(b.functions(a),function(c){E(c,b[c]=a[c]);});};var F=0;b.uniqueId=function(a){var c=F++;return a?a+c:c;};b.templateSettings={evaluate:/<~%([\s\S]+?)%~>/g,interpolate:/<~%=([\s\S]+?)%~>/g};
b.template=function(a,c){var d=b.templateSettings;d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/'/g,"\\'").replace(d.interpolate,function(e,f){return"',"+f.replace(/\\'/g,"'")+",'";}).replace(d.evaluate||null,function(e,f){return"');"+f.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('";
}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";d=new Function("obj",d);return c?d(c):d;};var l=function(a){this._wrapped=a;};b.prototype=l.prototype;var q=function(a,c){return c?b(a).chain():a;},E=function(a,c){l.prototype[a]=function(){var d=i.call(arguments);
B.call(d,this._wrapped);return q(c.apply(b,d),this._chain);};};b.mixin(b);j(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var c=k[a];l.prototype[a]=function(){c.apply(this._wrapped,arguments);return q(this._wrapped,this._chain);};});j(["concat","join","slice"],function(a){var c=k[a];
l.prototype[a]=function(){return q(c.apply(this._wrapped,arguments),this._chain);};});l.prototype.chain=function(){this._chain=true;return this;};l.prototype.value=function(){return this._wrapped;};})();function registerNS(ns){var nsParts=ns.split(".");var root=window;for(var i=0;i<nsParts.length;i++){if(typeof root[nsParts[i]]=="undefined"){root[nsParts[i]]=new Object();
}root=root[nsParts[i]];}}function createInhertiance(subClass,superClass){var F=function(){};F.prototype=superClass.prototype;subClass.prototype=new F();subClass.prototype.constructor=subClass;subClass.superclass=superClass.prototype;if(superClass.prototype.constructor==Object.prototype.constructor){superClass.prototype.constructor=superClass;
}}Array.prototype.forEach=function(fn,thisObj){if(typeof fn==="undefined"){return;}var scope=thisObj||window;for(var i=0,j=this.length;i<j;++i){fn.call(scope,this[i],i,this);}};Array.prototype.filter=function(fn,thisObj){var scope=thisObj||window;var a=[];if(typeof fn==="undefined"){return a;}for(var i=0,j=this.length;
i<j;++i){if(!fn.call(scope,this[i],i,this)){continue;}a.push(this[i]);}return a;};function Observer(){}Observer.prototype={subscribe:function(f,scope){if(typeof this.subscribers==="undefined"){this.subscribers=[];}if(typeof scope==="object"){this.subscribers.push(_.bind(f,scope));}else{this.subscribers.push(f);
}},unsubscribe:function(f){if(typeof this.subscribers==="undefined"){this.subscribers=[];}this.subscribers=this.subscribers.filter(function(el){if(el!=f){return el;}});},fireEvent:function(event,data,thisObj){if(typeof this.subscribers==="undefined"){this.subscribers=[];}scope=thisObj||window;this.subscribers.forEach(function(el){el(event,data);
});}};registerNS("iv");iv={isMashup:false,isSmallMashup:false,setProperties:function(){if($(document.body)){if($(document.body).hasClass("iv-mashup-screen")){this.isMashup=true;if($(document.body).hasClass("iv-mashup-small")){this.isSmallMashup=true;}}}},fixSideBar:function(){if($("#side-bar-center")){$("#side-bar-center").height($("#global-menu-bar").height()+$("#main-container").height());
}},showAllTrainingVideos:function(){$("#training-panel .hidden-training-vids").show();$(".training-view-all").hide();},onLoadProcesses:[],onDomReadyProcesses:[],onAfterLoadProcessesTriggered:false,onAfterOnLoadProcesses:[],processAfterOnLoad:function(fn){if(!this.onAfterLoadProcessesTriggered){if(typeof fn==="function"){this.onAfterOnLoadProcesses[this.onAfterOnLoadProcesses.length]=fn;
}else{alert("you can register only functions as onload processes ");return false;}}else{if(this.onAfterLoadProcessesTriggered){if(typeof fn==="function"){fn();}else{alert("you can register only functions as onload processes ");return false;}}}},processOnLoad:function(fn){if(typeof fn==="function"){this.onLoadProcesses[this.onLoadProcesses.length]=fn;
}else{alert("you can register only functions as onload processes ");return false;}},processOnDomReady:function(fn){if(typeof fn==="function"){this.onDomReadyProcesses[this.onDomReadyProcesses.length]=fn;}else{alert("you can register only functions as dom ready processes ");return false;}},triggerAfterOnLoadProcesses:function(){_.each(this.onAfterOnLoadProcesses,function(fn){fn();
});this.onAfterLoadProcessesTriggered=true;},triggerOnLoadProcesses:function(){if(typeof timerData!="undefined"){timerData.onLoad_Time=new Date();}_.each(this.onLoadProcesses,function(fn){fn();});if(typeof timerData!="undefined"){timerData.onLoad_tasks_ends=new Date();iv.timer.collectData();}this.triggerAfterOnLoadProcesses();
},triggerDomReadyProcesses:function(){if(typeof timerData!="undefined"){timerData.domReady_event=new Date();}_.each(this.onDomReadyProcesses,function(fn){try{fn();}catch(e){if(typeof console!=="undefined"){console.info("issue in dom ready process");console.error(e);}}});if(typeof timerData!="undefined"){timerData.domReady_tasks_ends=new Date();
}},initIvSetup:function(){if(document.getElementById("ivSetup")&&iv.user.data.setupMap&&!_.isEmpty(iv.user.data.setupMap)){var theme="original";if(iv.user&&iv.user.data&&iv.user.data.theme&&iv.user.data.theme!=""){theme=iv.user.data.theme;}iv.util.require([iv.ui.getTemplate("commonRequires."+theme+".ivSetupCss"),iv.ui.getTemplate("commonRequires.ivSetupRenderer"),iv.ui.getTemplate("commonRequires.ivSetupController")],function(){iv.setup.controller.init({selector:"#ivSetup"});
});}},initMenus:function(){menuInstanceMap={};var menus=$("ul.menu");for(var i=menus.length-1;i>=0;i--){var elem=menus[i];menuInstanceMap[elem.id]=new menu.dd("menuInstanceMap."+elem.id);menuInstanceMap[elem.id].init(elem.id,"menuhover");}},setupBackToTop:function(){if(!iv.isMashup&&typeof $.fn.autoscroll!="undefined"){$(window).autoscroll({threshold:0,needBackToTop:true,scrollEventName:"DEFAULT_PAGE_SCROLL"});
}},ssoContextHandler:function(){var elem=$(this);if(!elem.data("ssoContextEnabled")){var newURL=iv.getSSOUrl(elem.attr("href"));elem.attr("href",newURL);elem.data("ssoContextEnabled",true);}},getSSOUrl:function(elemHref){try{if(elemHref.indexOf("javascript:")>=0||elemHref.indexOf("#")>=0){return elemHref;
}var hrefComponents=elemHref.split("#");var pathNameComponents=hrefComponents[0].split("?");var newURL=pathNameComponents[0];newURL+="?contextHash="+crmHashSuffix;if(pathNameComponents.length>1){for(var i=1;i<pathNameComponents.length;i++){if(i>1){newURL+="?";}if(i==1){newURL+="&";}newURL+=pathNameComponents[i];
}}if(hrefComponents.length>1){for(var i=1;i<hrefComponents.length;i++){newURL+="#"+pathNameComponents[i];}}return newURL;}catch(e){return elemHref;}},enableSSOContext:function(){if(typeof crmHashSuffix!="undefined"&&crmHashSuffix!=""){$("a").die("mousedown",iv.ssoContextHandler);$("a").live("mousedown",iv.ssoContextHandler);
if(typeof window.open_=="undefined"&&typeof iv.util!="undefined"){window.open_=window.open;window.open=function(url,name,props){var params=iv.util.getURLParams(url);if(typeof params["contextHash"]=="undefined"){url=iv.getSSOUrl(url);}return window.open_(url,name,props);};}}}};iv.processOnDomReady(function(){iv.fixSideBar();
iv.setProperties();});$(document).ready(function(){iv.triggerDomReadyProcesses();});$(window).load(function(){iv.triggerOnLoadProcesses();});var menuInstanceMap={};iv.processOnDomReady(iv.initMenus);iv.processOnLoad(iv.initIvSetup);iv.processOnDomReady(iv.setupBackToTop);iv.processOnDomReady(iv.enableSSOContext);
registerNS("iv.user.data");registerNS("iv.hub");iv.hub={map:{},hasEvent:function(eventName){if(typeof this.map[eventName]==="undefined"){return false;}else{return true;}},addEvent:function(eventName){this.map[eventName]=[];},flushEvent:function(eventName){if(this.hasEvent(eventName)){this.map[eventName]=[];
}},registerNewEvent:function(eventName,enforceFlush){if(typeof enforceFlush!=="undefined"){if(enforceFlush===true){this.flushEvent(eventName);}}if(!this.hasEvent(eventName)){this.addEvent(eventName);}},addSubscription:function(eventName,eventSubscriber,subscriberScope){this.map[eventName].push({f:eventSubscriber,s:subscriberScope});
},subscribeToEvent:function(eventName,eventSubscriber,subscriberScope){if(!this.hasEvent(eventName)){this.addEvent(eventName);}var scope=this,cb;if(typeof subscriberScope!=="undefined"){scope=subscriberScope;}if(typeof eventSubscriber=="function"){cb=eventSubscriber;}else{if(typeof console!=="undefined"){if(typeof console.error!=="undefined"){console.error("pass a registeration callback function");
}}else{alert("pass a registeration callback function");}return false;}this.addSubscription(eventName,cb,scope);},publishEvent:function(eventName,eventData){if(!this.hasEvent(eventName)){this.addEvent(eventName);}if(this.hasEvent(eventName)){var eObj={"eventName":eventName,"eventData":eventData};var $this=this;
_.each(this.map[eventName],function(ev){$this.triggerEvent(eObj,ev);});}},triggerEvent:function(ev,targ){targ.f.call(targ.s,ev);}};var pipeClass=function(params){var $this=this;this.data=params.data;this.type=params.type;this.method=typeof params.method!="undefined"?params.method:"GET";this.dataSource=params.dataSource;
this.requestId=0;this.publishDataEvents=params.publishDataEvents;_.each(this.publishDataEvents,function(ev){iv.hub.registerNewEvent(ev);});this.eventData={};this.fetchDataEvents=params.fetchDataEvents;this.handleFetchDataEvent=function(){this.requestId++;var currentId=this.requestId;var config={resource:this.dataSource,urlParams:this.eventData,success:function(resp){if(currentId==$this.requestId){$this.publishEvent(resp);
}},error:function(resp){if(currentId==$this.requestId){$this.publishEvent(resp);}}};if(this.method=="POST"){config.responseType="json";iv.api.doPost(config);}else{iv.api.getJson(config);}};_.each(this.fetchDataEvents,function(obj,key){iv.hub.subscribeToEvent(obj.key,function(event){if(typeof obj.customHandler!=="undefined"){obj.customHandler.call(this,event);
}else{this.eventData=event.eventData;}this.handleFetchDataEvent();},$this);});this.publishEvent=function(eventData){_.each(this.publishDataEvents,function(event){iv.hub.publishEvent(event,eventData);});};};registerNS("iv.ui");iv.ui={templates:(new templateRepository).templates,getTemplate:function(k){var s=k.split(".");
var sl=s.length;var t=null;t=this.templates;for(var i=0;i<sl;i++){t=t[s[i]];if(typeof t==="undefined"){alert("Template undefined for key "+k);break;}}if(typeof t!=="null"&&typeof t!=="undefined"){return t;}},addTemplate:function(k,t){this.templates[k]=t;},setTemplate:function(k,t){this.templates[k]=t;
}};registerNS("iv.util");iv.util={AC_CACHE_SIZE:30,urls:{logActivity:"/iv/logActivity.do"},attachUpgradeLinkEvents:function(){$("body").delegate("a.upgradeStopPoint","click",function(){var key_name=$(this).attr("name");iv.stopPoint.logClickedPoints(key_name);});},logUserActivity:function(url,data){window.setTimeout(function(){iv.util._logActivity(url,data);
},200);},trackToMarketo:function(type,url){window.setTimeout(function(){mktoMunchkinFunction(type,{"href":url});},200);},_logActivity:function(url,data){var logUrls=[];if(typeof url==="string"){logUrls.push(url);}else{logUrls=url;}var urlParams={};urlParams.URL="";if(typeof url!=="undefined"){urlParams.URL=logUrls.join("|");
}if(typeof data!=="undefined"&&typeof data==="object"){if(typeof urlParams.URL!="undefined"){$.extend(urlParams,data);}else{urlParams=data;}}urlParams._now=(new Date()).getTime();iv.api.userAction.getContent({resource:this.urls.logActivity,urlParams:urlParams});},encodeSingleQuotes:function(str){str=str.replace(/'/g,"%27");
return str;},encodeAngledBracesInText:function(str){str=str.replace(/\<b/g,"&lt;b").replace(/\<\/b/g,"&lt;/b").replace(/\<a href/g,"&lt;a href").replace(/\<a target/g,"&lt;a target").replace(/\<a style/g,"&lt;a style").replace(/\<\/a/g,"&lt;/a").replace(/</g,"-");str=iv.util.decodeHTML(str);return str;
},encodeHTML:function(text){$("body").append('<div id="utilDiv" style="display:none;"></div>');var encodedText=$("#utilDiv").text(text).html();$("#utilDiv").remove();return encodedText;},decodeHTML:function(text){$("body").append('<div id="utilDiv" style="display:none;"></div>');var decodedText=$("#utilDiv").html(text).text();
$("#utilDiv").remove();return decodedText;},trackIt:function(id,url){iv.api.userAction.getHtmlContent({resource:url,target:$("#add_"+id),postLoad:function(){iv.initMenus();}});},idCounter:0,getUniqueId:function(){this.idCounter++;return this.idCounter;},capitalize:function(str){return str.charAt(0).toUpperCase()+str.slice(1);
},setCaretToPos:function(input,pos){this.setSelectionRange(input,pos,pos);},setSelectionRange:function(input,selectionStart,selectionEnd){if(input.setSelectionRange){input.focus();input.setSelectionRange(selectionStart,selectionEnd);}else{if(input.createTextRange){var range=input.createTextRange();range.collapse(true);
range.moveEnd("character",selectionEnd);range.moveStart("character",selectionStart);range.select();}}},doOpenExtWindow:function(URL,tWidth,tHeight,track,trackUrl){URL=URL.replace(/&amp;/g,"&");URL=URL.replace(/"/g,"%22");var name="extWindow";if(arguments[3]=="newwindow"){name=arguments[3];}var attributes="toolbar=no,location=no,directories=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+tWidth+",height="+tHeight;
extWindow=window.open(URL,name,attributes);if(typeof track==="boolean"){if(track){iv.util.logUserActivity(trackUrl);}}extWindow.focus();},getFieldOperatorMap:function(){return{"boolean":[{"label":"Equals","value":"eq"}],"datetime":[{"label":"Greater than","value":"gt"},{"label":"Greater than or equal to","value":"gte"},{"label":"Less than","value":"lt"},{"label":"Less than or equal to","value":"lte"}],"date":[{"label":"Greater than","value":"gt"},{"label":"Greater than or equal to","value":"gte"},{"label":"Less than","value":"lt"},{"label":"Less than or equal to","value":"lte"}],"number":[{"label":"Equals","value":"eq"},{"label":"Does not equal","value":"noteq"},{"label":"Greater than","value":"gt"},{"label":"Greater than or equal to","value":"gte"},{"label":"Less than","value":"lt"},{"label":"Less than or equal to","value":"lte"}],"currency":[{"label":"Equals","value":"eq"},{"label":"Does not equal","value":"noteq"},{"label":"Greater than","value":"gt"},{"label":"Greater than or equal to","value":"gte"},{"label":"Less than","value":"lt"},{"label":"Less than or equal to","value":"lte"}],"multipicklist":[{"label":"Equals","value":"eq"},{"label":"Does not equal","value":"noteq"},{"label":"Contains","value":"multipicklist_con"},{"label":"Does not contain","value":"multipicklist_notcon"}],"string":[{"label":"Equals","value":"eq"},{"label":"Does not equal","value":"noteq"},{"label":"Begins with","value":"beg"},{"label":"Does not begin with","value":"notbeg"},{"label":"Ends with","value":"end"},{"label":"Does not end with","value":"notend"},{"label":"Contains","value":"con"},{"label":"Does not contain","value":"notcon"}],"reference":[{"label":"Equals","value":"eq"},{"label":"Does not equal","value":"noteq"},{"label":"Begins with","value":"beg"},{"label":"Does not begin with","value":"notbeg"},{"label":"Ends with","value":"end"},{"label":"Does not end with","value":"notend"},{"label":"Contains","value":"con"},{"label":"Does not contain","value":"notcon"}]};
},getURLParams:function(URL){var params=URL.toString();params=params.split("?");var paramMap={};if(params.length>1){paramMap=this.parseParamString(params[1]);}return paramMap;},parseParamString:function(paramString){var paramMap={};var param=paramString.split("&");for(var i=0;i<param.length;i++){var paramPair=param[i].split("=");
if(paramPair.length>1){paramMap[paramPair[0]]=paramPair[1];}}return paramMap;},convertToQueryString:function(queryMap){var q="";var first=true;for(var a in queryMap){if(!first){q+="&";}first=false;q+=a;q+="=";q+=queryMap[a];}return q;},getBrowserHeight:function(){var intViewH=0;var intW=0;if(typeof window.innerWidth=="number"){intViewH=window.innerHeight;
intW=window.innerWidth;}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){intViewH=document.documentElement.clientHeight;intW=document.documentElement.clientWidth;}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){intViewH=document.body.clientHeight;
intW=document.body.clientWidth;}}}var D=document;var intH=Math.max(Math.max(D.body.scrollHeight,D.documentElement.scrollHeight),Math.max(D.body.offsetHeight,D.documentElement.offsetHeight),Math.max(D.body.clientHeight,D.documentElement.clientHeight));return{width:parseInt(intW),height:parseInt(intH),viewPortHeight:parseInt(intViewH)};
},getElementMetrics:function(target){var rect=target.getBoundingClientRect();return{"top":parseInt(rect.top),"left":parseInt(rect.left),"right":parseInt(rect.right),"bottom":parseInt(rect.bottom),"height":parseInt(rect.bottom-rect.top),"width":parseInt(rect.right-rect.left)};},getScrollPosition:function(){var scrollX,scrollY;
if(typeof window.pageYOffset!="undefined"){scrollX=window.pageXOffset;scrollY=window.pageYOffset;scrollWidth=window.innerWidth;}else{scrollX=document.documentElement.scrollLeft;scrollY=document.documentElement.scrollTop;scrollWidth=document.documentElement.scrollWidth;}return{scrollX:scrollX,scrollY:scrollY};
},setCookie:function(c_name,value,exdays){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);var c_value=escape(value)+((exdays==null)?"":"; expires="+exdate.toUTCString());document.cookie=c_name+"="+c_value;},getCookie:function(name){var cookieArray=document.cookie.split(";");for(var i=0;
i<cookieArray.length;i++){var x=cookieArray[i].substr(0,cookieArray[i].indexOf("="));var y=cookieArray[i].substr(cookieArray[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==name){return unescape(y);}}},isEmail:function(email){var reg=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
return reg.test(email);},setDefaultFocus:function(container){var elemArray=container.find("input:visible,select:visible,textarea:visible");if(elemArray.length>0){elemArray[0].focus();}},setStorageItem:function(key,value,type){var userId=iv.user.data.userId;if(typeof(Storage)=="undefined"){return false;
}var isLocal=true;if(typeof type!="undefined"&&type==false){isLocal=false;}if(isLocal){var tempValue={};if(localStorage.getItem(userId)!=null){tempValue=JSON.parse(localStorage.getItem(userId));}tempValue[key]=value;localStorage.removeItem(userId);try{localStorage.setItem(userId,JSON.stringify(tempValue));
}catch(err){iv.util.printToConsole("Error while writing to local storage:"+err);localStorage.removeItem(userId);localStorage.setItem(userId,JSON.stringify(tempValue));}}else{var tempValue={};if(sessionStorage.getItem(userId)!=null){tempValue=JSON.parse(sessionStorage.getItem(userId));}tempValue[key]=value;
sessionStorage.removeItem(userId);try{sessionStorage.setItem(userId,JSON.stringify(tempValue));}catch(err){iv.util.printToConsole("Error while writing to session storage:"+err);sessionStorage.removeItem(userId);sessionStorage.setItem(userId,JSON.stringify(tempValue));}}},isStoragePresent:function(){if(typeof(Storage)=="undefined"){return false;
}return true;},getStorageItem:function(key,type){var userId=iv.user.data.userId;if(!iv.util.isStoragePresent()){return false;}localStorage.removeItem("11");if(typeof type!="undefined"&&type==false){var tempValue=sessionStorage.getItem(userId);}else{var tempValue=localStorage.getItem(userId);}if(tempValue!=null){tempValue=JSON.parse(tempValue);
if(tempValue[key]){return tempValue[key];}else{return null;}}},removeStorageItem:function(key,type){var userId=iv.user.data.userId;if(typeof(Storage)=="undefined"){return false;}if(typeof type!="undefined"&&type==false){var tempValue=sessionStorage.getItem(userId);}else{var tempValue=localStorage.getItem(userId);
}if(tempValue!=null){tempValue=JSON.parse(tempValue);delete tempValue[key];}try{localStorage.setItem(userId,JSON.stringify(tempValue));}catch(err){iv.util.printToConsole("Error while removing item from local storage:"+err);localStorage.removeItem(userId);localStorage.setItem(userId,JSON.stringify(tempValue));
}},clearStorage:function(type){var userId=iv.user.data.userId;if(typeof(Storage)=="undefined"){return false;}if(typeof type!="undefined"&&type==false){sessionStorage.removeItem(userId);}else{localStorage.removeItem(userId);}},flushAllStorage:function(type){var userId=iv.user.data.userId;if(typeof(Storage)=="undefined"){return false;
}if(typeof type!="undefined"&&type==false){sessionStorage.clear();}else{localStorage.clear();}},applyLRUOnACCache:function(){var items=iv.util.getStorageItem("ac_data");var key="",tVal="";var bufList={};_.each(items,function(item,k){if(key===""){key=k;tVal=item.ts;}else{if(tVal>item.ts){tVal=item.ts;
key=k;}}});_.each(items,function(item,k){if(key!==k){bufList[k]=item;}});return bufList;},updateLastAccessOnACCacheItem:function(key){iv.util.getStorageItem("ac_data")[key].ts=(new Date()).getTime();},newACCacheItem:function(data){return{"ts":(new Date()).getTime(),"data":data};},setACCache:function(cData,cDataCt){iv.util.setStorageItem("ac_data",cData);
iv.util.setStorageItem("ac_count",cDataCt);},clearACCache:function(){iv.util.setStorageItem("ac_data",{});iv.util.setStorageItem("ac_count",0);},readFromACCache:function(obj){var cData=iv.util.getStorageItem("ac_data");if(cData!==null){if(typeof cData!=="undefined"){if(typeof cData[obj]!=="undefined"&&typeof cData[obj]!=="null"){iv.util.updateLastAccessOnACCacheItem(obj);
return cData[obj].data;}}}return false;},writeToACCache:function(filterString,data){var cData=iv.util.getStorageItem("ac_data");var cDataCt=iv.util.getStorageItem("ac_count");var lastRefresh=iv.util.getStorageItem("ac_last_refresh");if(typeof cData==="undefined"){cData={};cDataCt=0;iv.util.setACCache(cData,cDataCt);
}if(iv.user.data.autoCompleteRefreshTime!==lastRefresh){cData={};cDataCt=0;iv.util.clearACCache();iv.util.setStorageItem("ac_last_refresh",iv.user.data.autoCompleteRefreshTime);}if(cDataCt>=iv.util.AC_CACHE_SIZE){cData=iv.util.applyLRUOnACCache();cDataCt--;iv.util.printToConsole("decreased ct to"+cDataCt);
iv.util.setACCache(cData,cDataCt);}cData[filterString]=iv.util.newACCacheItem(data);cDataCt++;iv.util.setACCache(cData,cDataCt);},setupGlobalAutoComplete:function(options){var targ=$("#global_search");if(targ.length<1){return;}var resource="/iv/autoCompleteCompany.do?callFunction=globalAutoComplete";
var placeholder="Search for company, person, or news";targ.val(placeholder);targ.css({"color":"#666666"});targ.focus(function(){var sb=targ,st=placeholder;if(sb.val()===st){sb.val("");}});targ.blur(function(){var sb=targ,st=placeholder;if(sb.val()===""){sb.val(st);sb.css({"color":"#666666"});}});targ.keydown(function(e){var sb=targ,st=placeholder;
if(sb.val()===st){sb.val("").css({"color":"#333333"});}});var config={minChars:1,max:12,autoFill:false,mustMatch:false,matchContains:false,useCache:true,resultsClass:"global_acResults",selectClass:"global_ac_select",sortResults:false,scrollHeight:220,paramName:"searchString",filterResults:false,url:resource};
if(iv.util.isStoragePresent()){config.readExternalCache=iv.util.readFromACCache;config.writeToExternalCache=iv.util.writeToACCache;}config.onItemSelect=function(item){window.location.href=$("#auto_"+item.data.id).attr("href");};config.showResult=function(value,data){var filter=$.trim(data.filterString);
var filterWords=filter.split(" ");var newValue=[];var words=data.value.split(" ");while(words.length>0){var word=words[0];var hflag=false;var kf=0;while(filterWords.length>kf){var keyword=filterWords[kf];var ptr=word.toUpperCase().indexOf(keyword.toUpperCase());if(ptr===0){newValue.push('<span style="color:#969696;">'+word.slice(0,keyword.length)+"</span>"+'<span style="color:black;">'+word.slice(keyword.length)+"</span>");
hflag=true;break;}kf++;}if(!hflag){newValue.push('<span style="color:#333333;">'+word+"</span>");}words=_.reject(words,function(v){return v==word;});}data.highLightedValue=newValue.join(" ");return _.template(iv.ui.getTemplate("autocompleteSearch"),data);};targ.autocomplete(config);},formatNumber:function(num){var str="";
var index=0;num=Number(num);if(num<=0){return num;}while(num>0){var t1=num%10;num=Math.floor(num/10);str=t1+(index>0&&(index)%3==0?",":"")+str;index++;}return str;},setupAutoComplete:function(options){var placeholder="Search for company, person, or news";if(typeof options.placeholder!="undefined"){placeholder=options.placeholder;
}var config={minChars:1,max:12,autoFill:false,mustMatch:false,matchContains:false,useCache:false,sortResults:false,scrollHeight:220,paramName:"searchString",filterResults:false};if(typeof options.url!="undefined"){config.url=options.url;}if(typeof options.data!="undefined"){config.data=options.data;}var template="autocompleteSearch";
if(typeof options.template!="undefined"){template=options.template;if($("#"+options.id).parents("form").length>0){var form=$("#"+options.id).parents("form");if(form.find("input[name=companyId]").length>0){config.onItemSelect=function(item){var companyId=$("#"+options.id).parents("form").find("input[name=companyId]");
if(typeof item.data!="undefined"&&typeof item.data.id!="undefined"){companyId.val(item.data.id);}};}}}else{config.onItemSelect=function(item){window.location.href=$("#auto_"+item.data.id).attr("href");};}config.showResult=function(value,data){return _.template(iv.ui.getTemplate(template),data);};$("#"+options.id).autocomplete(config);
},setupNestedAutoComplete:function(options){var config={minChars:1,max:12,resultsClass:"acResultsIndustry",autoFill:false,mustMatch:false,matchContains:false,useCache:false,sortResults:false,paramName:"searchString"};if(typeof options.url!="undefined"){config.url=options.url;}if(typeof options.data!="undefined"){config.data=options.data;
}var template="autocompleteIndustry";if(typeof options.template!="undefined"){template=options.template;}else{config.onItemSelect=function(item){window.location.href=$("#auto_"+item.data.id).attr("href");};}config.showResult=function(value,id,subLevel){return _.template(iv.ui.getTemplate(template),{"data":id,"value":value,"subLevel":subLevel});
};config.filterResults=function(results,filter,options){var filtered=[];var id,subId,value,i,type,include,subValue,subInclude,firstChar,subfirstChar,filterSmallerCase,listValueSmallCase,sublistValueSmallCase;var regex,pattern,attributes="";var headLevel=true;var specials=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");
filter=filter.replace(/^\s+|\s+$/g,"");for(var i=1;i<results.length;i++){headLevel=true;id=results[i].id;value=results[i].name;value=String(value);listValueSmallCase=value.toLowerCase();if(value>""){include=!options.filterResults;if(!include){pattern=String(filter);pattern=pattern.replace(specials,"\\$&");
if(!options.matchInside){pattern="^"+pattern;}if(!options.matchCase){attributes="i";}regex=new RegExp(pattern,attributes);include=regex.test(value);if(include){firstChar=listValueSmallCase.replace(/^\s+|\s+$/g,"");if(firstChar.indexOf(filterSmallerCase)==0){include=true;}}}if(include){headLevel=false;
filtered.push({data:id,value:value});}}for(var j=0;j<results[i].industries.length;j++){subId=results[i].industries[j].id;subValue=results[i].industries[j].name;subValue=String(subValue);sublistValueSmallCase=subValue.toLowerCase();if(subValue>""){subInclude=!options.filterResults;if(!subInclude){pattern=String(filter);
pattern=pattern.replace(specials,"\\$&");if(!options.matchInside){pattern="^"+pattern;}if(!options.matchCase){attributes="i";}regex=new RegExp(pattern,attributes);subInclude=regex.test(subValue);if(subInclude){subfirstChar=sublistValueSmallCase.replace(/^\s+|\s+$/g,"");if(subfirstChar.indexOf(filterSmallerCase)==0){subInclude=true;
}}}if(subInclude){if(headLevel){filtered.push({data:id,value:value});headLevel=false;}filtered.push({data:subId,value:subValue,subLevel:true});}}}}if(options.sortResults){filtered=this.sortResults(filtered,filter);}if(options.maxItemsToShow>0&&options.maxItemsToShow<filtered.length){filtered.length=options.maxItemsToShow;
}if(filtered.length===0){$(".acResultsIndustry").css("height","0px");$(".acResultsIndustry").val("");}else{$(".acResultsIndustry").css("height","200px");}return filtered;};$("#"+options.id).autocomplete(config);},initTooltip:function(){this.setupDelegateEvents();},isiOSdevice:function(){if((navigator.userAgent.match(/iPad/i))||(navigator.userAgent.match(/iPhone/i))){return true;
}else{return false;}},setupDelegateEvents:function(){if(iv.util.isiOSdevice()){$("#wrapper").delegate("#mainContent,#head","tap",function(){if(isMenuOpen){if(typeof $(this).parents(".menu")==="undefined"){$(this).parents(".menu").children().find("ul").hide();}}});}else{$("body").delegate(".company-hover","mouseenter",function(){var element=$(this);
iv.util.showCompanyTooltip(element);});$("body").delegate(".contact-hover","mouseenter",function(){var element=$(this);iv.util.showContactTooltip(element);});}},showCompanyTooltip:function(elem){var eventHover="mouseenter";if(!elem.hasClass("hover-set")){var nameStr=elem.attr("name");var parts=nameStr.split("_");
if(parts.length>=2){var isSmallerFrame=parts[0]=="SMALL";var companyId=parts[1];iv.util.initCompanyHover(elem,isSmallerFrame,companyId);elem.addClass("hover-set").removeClass("company-hover").trigger(eventHover);}else{iv.util.printToConsole(nameStr+" does not match pattern of company hover initialization.");
}}},showContactTooltip:function(elem){var eventHover="mouseenter";if(!elem.hasClass("hover-set")){var nameStr=elem.attr("name");var parts=nameStr.split("_");if(parts.length>=3){var isSmallerFrame=parts[0]=="SMALL";var companyId=parts[1];var employmentId=parts[2];iv.util.initContactHover(elem,isSmallerFrame,companyId,employmentId);
elem.addClass("hover-set").removeClass("contact-hover").trigger(eventHover);}else{iv.util.printToConsole(nameStr+" does not match pattern of contact hover initialization.");}}},printToConsole:function(msg){if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(msg);}},enablePlaceholder:function(inputElem){if($.browser.msie&&$.browser.version<=9){inputElem.bind("focus",function(){var elem=$(this);
if($.trim(elem.val())==elem.attr("placeholder")){elem.val("");elem.removeClass("placeholder");}});inputElem.bind("blur",function(){var elem=$(this);if($.trim(elem.val())==""){elem.val(elem.attr("placeholder"));elem.addClass("placeholder");}}).trigger("blur");}},setMaxTextLength:function(elem,limit){elem.bind("keydown",function(e){if($(this).val().length>=limit){if(e.which!=8&&e.which!=46&&e.which!=16&&(e.which<37||e.which>40)){e.stopPropagation();
return false;}}$(this).data("VAL",$(this).val());});elem.bind("keyup",function(e){var oldValue=$(this).data("VAL");var newValue=$(this).val();if(oldValue.length<=limit&&newValue.length>limit){$(this).val(oldValue);}else{$(this).data("VAL",$(this).val());}});},initCompanyHover:function(target,isSmallerFrame,companyId){var companyUrl="/iv/sourceData"+"?id="+companyId+"&source=familyTree"+"&isMashup="+(typeof iv.isMashup!="undefined"?iv.isMashup:false);
companyUrl=encodeURI(companyUrl);var tt=new ivTooltip({"target":target[0],"delay":400,"timeOut":200,"width":565,"displayCallback":function(){if(iv.util.isiOSdevice()){target.attr("href",target.attr("data-hoverurl"));}iv.util.fixHeader();},"prefetch":false,"dataSource":companyUrl,"smallerFrame":isSmallerFrame,"tracking":{url:"/iv/incrementPopularity.do?methodName=incrementCompanyPageView&companyId="+companyId,duration:3}});
return tt;},initContactHover:function(target,isSmallerFrame,companyId,employmentId){var contactUrl="/iv/companyinfo.do"+"?methodToCall=getBusinessCard"+"&companyId="+companyId+"&empId="+employmentId+"&isMashup="+(typeof iv.isMashup!="undefined"?iv.isMashup:false);contactUrl=encodeURI(contactUrl);var tt=new ivTooltip({"target":target[0],"delay":400,"timeOut":200,"width":465,"displayCallback":function(){if(iv.util.isiOSdevice()){target.attr("href",target.attr("data-hoverurl"));
}},"prefetch":false,"dataSource":contactUrl,"smallerFrame":isSmallerFrame,"tracking":{url:"/iv/executiveHover.do?methodName=pageView&employmentId="+employmentId,duration:3}});return tt;},getWidths:function(selector){var targ=$(selector)[0];if(targ){var rect=targ.getBoundingClientRect();return parseInt(rect.right-rect.left);
}else{return 0;}},fixHeader:function(){var statusLength=0;var companyWidth=this.getWidths("#tt-head-name");var companyStatusWidth=this.getWidths("#tt-head-status");var locationWidth=this.getWidths("#tt-head-location");var urlWidth=this.getWidths("#tt-head-url");if(companyStatusWidth>0){statusLength=1;
}if(companyWidth+locationWidth+urlWidth+companyStatusWidth>=530){if(companyWidth+companyStatusWidth<530){if(companyWidth+companyStatusWidth+locationWidth<530){$("#tt-head-url").css("clear","both");$($(".header-pipe-to-hide")[statusLength+1]).css("display","none");}else{$("#tt-head-location").css("clear","both");
$($(".header-pipe-to-hide")[statusLength+0]).css("display","none");}}else{if(companyStatusWidth>0){$("#tt-head-status").css("clear","both");$($(".header-pipe-to-hide")[0]).css("display","none");}if(companyStatusWidth+locationWidth+urlWidth>=530){if(locationWidth+urlWidth>530){$("#tt-head-location").css("clear","both");
$("#tt-head-url").css("clear","both");$(".header-pipe-to-hide").forEach(function(el){el.css("display","none");});}else{$("#tt-head-url").css("clear","both");$($(".header-pipe-to-hide")[1]).css("display","none");}}}}},addUserData:function(key,data){if(typeof iv.user.data!=="undefined"){if(typeof iv.user.data[key]!=="undefined"){iv.user.data[key]=data;
}}else{if(typeof console!=="undefined"){if(typeof console.error!=="undefined"){console.error("cant find iv.user.data");}}}},require:function(fileArray,callBack,callBackParams){var jsFilesArray=[];_.each(fileArray,function(fileName){if(fileName.match(/.*\.css/)){iv.util.loadCss(fileName);}else{jsFilesArray.push(fileName);
}});require(jsFilesArray,function(file,css){callBack(callBackParams);});},getCompanyTrackedByWatchlist:function(companyId){var trackedByWL=[];var companyId=companyId.toString();_.each(iv.user.data.genericWatchlistInfo,function(watchlist){if($.inArray(companyId,watchlist.companies)>=0){trackedByWL.push(watchlist.id);
}});return trackedByWL;},getExecTrackedByWatchlist:function(executiveId){var trackedByWL=[];var executiveId=executiveId.toString();_.each(iv.user.data.genericWatchlistInfo,function(watchlist){if($.inArray(executiveId,watchlist.executives)>=0){trackedByWL.push(watchlist.id);}});return trackedByWL;},getShortifiedString:function(str,length){var originalString=str;
var shortString=str.substring(0,length);if(originalString.length>shortString.length){shortString+="...";}return shortString;},getShortifiedTitle:function(str,length){var originalString=str;var shortString=str.substring(0,length);if(originalString.length>shortString.length){return str;}else{return"";}},setupMarketo:function(){var $this=this;
$.ajax({url:document.location.protocol+"//munchkin.marketo.net/munchkin.js",dataType:"script",cache:true,success:function(){Munchkin.init("970-YGT-940");$this.associateLead();}});},associateLead:function(){try{if(typeof iv.user.data!=="undefined"){if(typeof iv.user.data.marketoHash!=="undefined"){mktoMunchkinFunction("associateLead",{Email:iv.user.data.userEmail,FirstName:iv.user.data.firstName,LastName:iv.user.data.lastName},iv.user.data.marketoHash);
}}}catch(e){console.log("error in trying to associate lead");}},loadCss:function(url){var link=document.createElement("link");link.type="text/css";link.rel="stylesheet";link.href=url;document.getElementsByTagName("head")[0].appendChild(link);},initUserLocale:function(){var userLocale=iv.util.getStorageItem("locale");
if(userLocale!==null||typeof userLocale!=="undefined"){if(userLocale!==iv.user.data.locale){iv.util.clearStorage();iv.util.setStorageItem("locale",iv.user.data.locale);}}else{iv.util.setStorageItem("locale",iv.user.data.locale);}},getValidId:function(str){return str.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-");
},reloadTopPage:function(path){top.location.href=path;},referrer:null,setupCRMGrandChild:function(){if(!iv.isMashup){return false;}this.referrer=document.referrer;var p=this.getURLParams(window.location.href);var purl;if(typeof p["connect"]!=="undefined"){purl=decodeURIComponent(p["connect"]);}var chost=this.getCookie("mscrmbridge");
if(typeof purl!=="undefined"){this.referrer=purl;if(typeof chost!=="undefined"){if(purl!==chost){this.setCookie("mscrmbridge",purl,1);}else{this.referrer=chost;}}else{this.setCookie("mscrmbridge",purl,1);}}else{if(chost!=="undefined"){this.referrer=chost;}else{return;}}$("body").append('<iframe href="javascript:return false;" name="ivconnectbridge"  id="ivconnectbridge" style="display:none;" ></iframe>');
},transmitRefreshMessageToConnector:function(){var message="refresh";$("#ivconnectbridge").attr("src",this.referrer.split("?")[0]+"#"+message);return false;},showSingularOrPlural:function(num,singular,plural){return num+" "+(num===1?singular:plural);}};iv.processOnDomReady(function(){iv.util.initTooltip();
iv.util.attachUpgradeLinkEvents();iv.util.initUserLocale();});iv.processOnDomReady(function(){iv.util.setupGlobalAutoComplete();});iv.processAfterOnLoad(function(){iv.util.setupMarketo();iv.util.setupCRMGrandChild();});function openWebsitePopup(companyURL,track){if(companyURL.substring(0,4)!="http"){var tCompanyURL="http://"+companyURL;
companyURL=tCompanyURL;}var extWindow=window.open(companyURL);if(typeof track==="boolean"){if(track){iv.util.logUserActivity("/company-url");}}extWindow.focus();}if(typeof jQuery!="undefined"){if($(".mailToLink").length>0){$(".mailToLink").each(function(){var elem=$(this);var href=elem.attr("href");href=href.replace("%3C%3CREFERRING_URL_GOES_HERE%3E%3E",encodeURIComponent(window.location.href));
elem.attr("href",href);});}}else{var elems=Spry.$$(".mailToLink");if(elems.length>0){for(var i=0;i<elems.length;i++){var elem=elems[i];var href=elem.href;href=href.replace("%3C%3CREFERRING_URL_GOES_HERE%3E%3E",encodeURIComponent(window.location.href));elem.href=href;}}}registerNS("iv.api");jQuery.ajaxSetup({cache:false});
iv.api.getContent=function(params){var q="";if(params.urlParams){q=iv.api.constructQueryString(params.urlParams,params.resource,false);}var success=function(data){};var error=function(){};if(params.success){success=params.success;}if(params.error){error=params.error;}var dataType="html";if(typeof params.dataType!=="undefined"){dataType=params.dataType;
}$.get(params.resource+q,function(data,textStatus,jQXHR){try{if(textStatus==="success"){success(data);}else{error();}}catch(e){if(typeof console!=="undefined"){console.info("Error caught in iv.api.getContent");}}},dataType);};iv.api.getHtmlContent=function(params){var q="";if(params.urlParams){q=iv.api.constructQueryString(params.urlParams,params.resource,false);
}var success=function(data){};var error=function(){};if(params.success){success=params.success;}if(params.error){error=params.error;}var preLoad=function(){};var postLoad=function(){};var preLoadParams={};var postLoadParams={};if(typeof params.preLoad==="function"){preLoad=params.preLoad;}else{if(typeof params.preLoad!=="function"&&typeof params.preLoad!=="undefined"){alert("pre load specified is not a function");
}}if(typeof params.postLoad==="function"){postLoad=params.postLoad;}else{if(typeof params.postLoad!=="function"&&typeof params.postLoad!=="undefined"){alert("post load specified is not a function");}}if(typeof params.preLoadParams!="undefined"){preLoadParams=params.preLoadParams;}if(typeof params.postLoadParams!="undefined"){postLoadParams=params.postLoadParams;
}if(typeof params.target!=="undefined"){preLoad(preLoadParams);params.target.load(params.resource+q,function(responseText,textStatus){try{if(textStatus==="success"){success(responseText);postLoad(postLoadParams);}else{error();}}catch(e){if(typeof console!=="undefined"){console.info("Error caught in iv.api.getHTMLContent");
console.error(e);}}});}else{iv.api.getContent(params);}};iv.api.constructQueryString=function(params,url,isPostCall){var q="";var appendQueryMarker=true;if(url.indexOf("?")!==-1){appendQueryMarker=false;}_.each(params,function(value,key){if(!isPostCall){key=encodeURIComponent(key);value=encodeURIComponent(value);
}if(q===""&&!isPostCall){if(appendQueryMarker){q+="?";}else{q+="&";}q+=key+"="+value;}else{q+="&"+key+"="+value;}});return q;};iv.api.getJSONP=function(params){var dataType="jsonp";$.ajax({url:params.resource,dataType:dataType});};iv.api.getJson=function(params){var q="";if(params.urlParams){q=iv.api.constructQueryString(params.urlParams,params.resource,false);
}var success=function(data){};var error=function(){};if(params.success){success=params.success;}if(params.error){error=params.error;}var dataType="json";$.get(params.resource+q,function(data,textStatus,jQXHR){try{if(textStatus==="success"){if(data.error){var sessionError=session.validate(data.errorType);
if(!sessionError){error(data);}}else{success(data);}}else{error();}}catch(e){if(typeof console!=="undefined"){console.info("Error caught in iv.api.getJson");console.log(e);}}},dataType);};iv.api.validateSession=function(resp){};iv.api.resourceCallback=function(){};iv.api.doPost=function(params){var success=function(data){};
var error=function(){};if(params.success){success=params.success;}if(params.error){error=params.error;}var responseType="html";if(params.responseType){responseType=params.responseType.toLowerCase();}$.post(params.resource,params.urlParams,function(resp,textStatus,jqXHR){try{if(textStatus==="success"){if(responseType==="json"){if(resp.error){var sessionError=session.validate(resp.errorType);
if(!sessionError){error(resp);}}else{success(resp);}}else{if(responseType==="html"){success(resp);}}}else{error(resp);}}catch(e){if(typeof console!=="undefined"){console.info("Error caught in iv.api.doPost");}}},responseType);};iv.api.submitForm=function(params){if(typeof params.form!="undefined"){var form=params.form;
var text=form.serialize();var xhr=$.post(form.attr("action"),text,function(){if(typeof params.success!="undefined"&&typeof params.successParams!="undefined"){params.success(xhr,params.successParams);}else{if(typeof params.success!="undefined"){params.success(xhr);}}});}};iv.api.submitJsonForm=function(params){if(typeof params.form!="undefined"){var form=params.form;
var text=form.serialize();form.submit(function(){$.post(form.attr("action"),text,function(resp){if(typeof params.success!="undefined"&&typeof params.successParams!="undefined"){params.success(resp,params.successParams);}else{if(typeof params.success!="undefined"){params.success(resp);}}},"json");return false;
});}};registerNS("iv.api.userAction");iv.api.userAction.enableActionTracking=function(params){if(typeof params.urlParams!=="undefined"){params.urlParams.LOG_USER_ACTION=true;}else{params.urlParams={};params.urlParams.LOG_USER_ACTION=true;}return params;};iv.api.userAction.doPost=function(params){iv.api.doPost(iv.api.userAction.enableActionTracking(params));
};iv.api.userAction.getJson=function(params){iv.api.getJson(iv.api.userAction.enableActionTracking(params));};iv.api.userAction.getHtmlContent=function(params){iv.api.getHtmlContent(iv.api.userAction.enableActionTracking(params));};iv.api.userAction.getContent=function(params){iv.api.getContent(iv.api.userAction.enableActionTracking(params));
};iv.api.userAction.submitForm=function(params){if(typeof params.form!="undefined"){var logUserAction=params.form.find("input[name=LOG_USER_ACTION]");if(logUserAction.length>0){logUserAction.val(true);}else{params.form.append('<input type="hidden" name="LOG_USER_ACTION" value="true"/>');}}iv.api.submitForm(params);
};if(registerNS){registerNS("iv.session");}var session={config:{SESSION_TIMED_OUT:"/iv/welcome.do"},validate:function(response){if(response==="SESSION_TIMED_OUT"){window.location.href=this.config.SESSION_TIMED_OUT;return true;}}};if(iv.session){iv.session=session;}var menu=function(){var t=15,z=9999,s=6,a;
function dd(n){this.n=n;this.h=[];this.c=[];this.timer=[];}dd.prototype.init=function(p,c){isMenuOpen=false;a=c;var w=document.getElementById(p);w.style.zIndex=z;var lis=w.getElementsByTagName("li");for(var j=0;j<lis.length;j++){lis[j].style.zIndex=z;}z++;var s=w.getElementsByTagName("ul");var l=s.length;
var i=0;for(i;i<l;i++){var h=s[i].parentNode;this.h[i]=h;this.c[i]=s[i];this.timer[i]=null;s[i].style.zIndex=z;var lis=s[i].getElementsByTagName("li");for(var j=0;j<lis.length;j++){lis[j].style.zIndex=z;}z++;h.onmouseover=new Function("event",this.n+".st(event,"+i+",true)");h.onmouseout=new Function("event",this.n+".st(event,"+i+")");
}};dd.prototype.st=function(event,x,f){var c=this.c[x];var h=this.h[x];var p=h.getElementsByTagName("a")[0];var timer=this.timer[x];if(f){if(timer){clearInterval(timer);this.timer[x]=null;}clearInterval(c.t);if(p.className.indexOf(a)==-1){p.className+=" "+a;}c.style.display="block";if(!c.mh){c.style.height="";
c.mh=c.offsetHeight;c.style.height=0;}if(c.mh==c.offsetHeight){c.style.filter="";c.style.opacity=1;c.style.overflow="visible";}else{c.t=setInterval(function(){sl(c,1);},t);}}else{if(c.className.indexOf("sub")!=-1){this.timer[x]=setTimeout(function(){clearInterval(c.t);var re=new RegExp(a,"g");p.className=p.className.replace(re,"");
c.t=setInterval(function(){sl(c,-1);},t);},10);}else{this.timer[x]=setTimeout(function(){clearInterval(c.t);var re=new RegExp(a,"g");p.className=p.className.replace(re,"");c.t=setInterval(function(){sl(c,-1);},t);},500);}}isMenuOpen=true;};function sl(c,f){var h=c.offsetHeight;if((h<=0&&f!=1)||(h>=c.mh&&f==1)){if(f==1){c.style.filter="";
c.style.opacity=1;c.style.overflow="visible";}clearInterval(c.t);return;}if(f==-1){c.style.opacity=0;c.style.filter="alpha(opacity=0)";c.style.height="0px";c.style.display="none";clearInterval(c.t);isMenuOpen=false;return;}else{var d=(f==1)?Math.ceil((c.mh-h)/s):Math.ceil(h/s);var o=h/c.mh;c.style.opacity=o;
c.style.filter="alpha(opacity="+(o*100)+")";c.style.height=h+(d*f)+"px";}}return{dd:dd};}();registerNS("iv.analytics");iv.analytics={tracker:null,ENABLE:true,mouseOverHash:{},init:function(){if(!this.ENABLE){return;}if(this.tracker===null){this.tracker=_gat._getTracker("UA-XXXXX-X");}},trackEvent:function(category,action,label,value){if(!this.ENABLE){return;
}if(typeof category==="undefined"||typeof action==="undefined"||typeof label==="undefined"){alert("iv.analytics - one or more required fields are not provided");return false;}if(typeof value!=="undefined"){_gaq.push(["_trackEvent",category,action,label,value]);return true;}_gaq.push(["_trackEvent",category,action,label]);
},getKey:function(arr){if(!this.ENABLE){return;}return arr.join("|");},hasKey:function(key){if(!this.ENABLE){return;}if(typeof this.mouseOverHash[key]==="undefined"){return false;}else{return true;}},setHash:function(key){if(!this.ENABLE){return;}this.mouseOverHash[key]=true;},trackMouseOver:function(category,action,label,value){if(!this.ENABLE){return;
}if(typeof category==="undefined"||typeof action==="undefined"||typeof label==="undefined"){alert("iv.analytics - one or more required fields are not provided");return false;}if(typeof value!=="undefined"){var key=this.getKey([category,action,label,value]);if(this.hasKey(key)){return false;}_gaq.push(["_trackEvent",category,action,label,value]);
this.setHash(key);return true;}var key=this.getKey([category,action,label]);if(this.hasKey(key)){return false;}_gaq.push(["_trackEvent",category,action,label]);this.setHash(key);},trackPageView:function(pagePath){if(!this.ENABLE){return;}if(typeof pagePath==="undefined"){if(typeof console!==undefined){console.log("PagePath is missing for analytics.");
}return false;}_gaq.push(["_trackPageview",pagePath]);},url:"",activePassiveUrls:{"showSfHomePage":function(){iv.analytics.hookSFHomePage();},"analyseAccount":function(){iv.analytics.hookAnalyzeAccount();},"analyseExecutive":function(){iv.analytics.hookAnalyzeExecutive();}},isMashup:function(){return(window.location.href.indexOf("/crm/",0)!==-1);
},urlToMap:"",screenType:"",initActivePassiveHooks:function(){if(!this.isMashup()){return;}this.url=window.location.href;_.each(this.activePassiveUrls,function(val,key){if(this.url.indexOf(key,0)!==-1){val();this.screenType=key;}},this);},isActive:false,threshHold:4000,timerDump:{mouseIn:0,mouseLeave:0},checkUserActivity:function(){if(this.timerDump.mouseLeave>this.timerDump.mouseIn){var dif=this.timerDump.mouseLeave-this.timerDump.mouseIn;
if(dif>this.threshHold){this.logActivityAndUnbind();}}},logActivityAndUnbind:function(){if(this.isActive){return;}this.isActive=true;this.unbindHooks();this.urlToMap=this.url.substring(this.url.indexOf("/crm/",0)+5,this.url.indexOf("?",0));iv.util.logUserActivity(this.urlToMap+"-active");},resetTimerDump:function(){this.timerDump.mouseIn=0;
this.timerDump.mouseLeave=0;},unbindHooks:function(){if(this.screenType==="showSfHomePage"){$(".analysisConsole").unbind("mouseenter",this.mouseIn);$(".analysisConsole").unbind("mouseleave",this.mouseOut);$(".analysisConsole").unbind("click",this.clickHandler);}else{if(this.screenType!=="showSfHomePage"){$("#outerBox").unbind("mouseenter",this.mouseIn);
$("#outerBox").unbind("mouseleave",this.mouseOut);$("#outerBox").unbind("click",this.clickHandler);}}},mouseIn:function(e){var $this=iv.analytics;if(!$this.isActive){if($this.timerDump.mouseIn===0){$this.timerDump.mouseIn=(new Date()).getTime();}}},mouseOut:function(e){var $this=iv.analytics;if(!$this.isActive){if($this.timerDump.mouseIn!==0){$this.timerDump.mouseLeave=(new Date()).getTime();
$this.checkUserActivity();$this.resetTimerDump();}}},clickHandler:function(e){var $this=iv.analytics;$this.logActivityAndUnbind();},hookAnalyzeAccount:function(){$("#outerBox").bind("mouseenter",this.mouseIn);$("#outerBox").bind("mouseleave",this.mouseOut);$("#outerBox").bind("click",this.clickHandler);
},hookAnalyzeExecutive:function(){$("#outerBox").bind("mouseenter",this.mouseIn);$("#outerBox").bind("mouseleave",this.mouseOut);$("#outerBox").bind("click",this.clickHandler);},hookSFHomePage:function(){$(".analysisConsole").bind("mouseenter",this.mouseIn);$(".analysisConsole").bind("mouseleave",this.mouseOut);
$(".analysisConsole").bind("click",this.clickHandler);}};iv.processOnDomReady(function(){iv.analytics.initActivePassiveHooks();});(function($){var ivGrid=function(elem,options){this.gridContainer=elem;this.config={gridType:"static",data:[],pageData:[],colConfig:[],dataSource:null,dataSourceParams:{sortType:"",sortOrder:"",searchTerm:""},dataSuffix:"",pager:{pageNum:1,totalPages:-1,resultsPerPage:10,startRecord:-1,endRecord:-1,totalRecords:-1,type:"linear",rowsCountMultiplier:2},liveFilter:true,filter:true,overflowRows:{enabled:false,overflowHeight:"300px",overflowClass:"ivgrid_overflow"},renderCallback:function(data){},preRenderCallback:function(resp){return resp;
},selectedIndex:-1,defaultSearchTemplate:'<div class="search">'+'<div class="searchBoxLabel"><~%=label%~></div>'+'<div class="searchBoxLeftNoIcon">'+'	<div class="searchBoxRight">'+'		<div class="searchBoxCenter">'+'			<input type="text" class="searchBox" style="color: #666666;" value="<~%=defaultText%~>">'+"		</div>"+"	</div>"+"</div>"+'<img class="searchBoxRightImage" alt="Search" src="/iv/common/styles/images/icn_find.png">'+'<div class="searchLinkSpan">&nbsp;&nbsp;<a class="bluefont_11px searchLink" href="javascript:void(0)">View all</a></div>'+'<div style="clear:both;"></div>'+"</div>",liveSearchTemplate:'<div class="search">'+'<div class="searchBoxLabel"><~%=label%~></div>'+'<div class="searchBoxLeft">'+'	<div class="searchBoxRight">'+'		<div class="searchBoxCenter">'+'			<input type="text" class="searchBox" style="color: #666666;" value="<~%=defaultText%~>">'+"		</div>"+"	</div>"+"</div>"+'<img class="searchBoxRightImage" alt="Search" src="/iv/common/styles/images/icn_find.png">'+'<div class="searchLinkSpan">&nbsp;&nbsp;<a class="bluefont_11px searchLink" href="javascript:void(0)">View all</a></div>'+'<div style="clear:both;"></div>'+"</div>",headerTemplate:'<div class="white-overlay">'+'<img style="margin-top:100px;" src="/iv/common/styles/images/LoadingAnimation.gif">'+"<h1>Loading...</h1>"+"</div>"+'<div class="rows-header">'+'<~% if (className != "") { %~> '+'	<div class="fillerLeft"></div>'+"<~% } %~>"+"<~% _.each(colConfigs, function(col) { %~>"+'	<~% if(typeof col.sortable != "undefined" && col.sortable == false) { %~>'+'		<div class="not-sortable" name="<~%=col.name%~>" style="float:left;width:<~%=col.widthInPercent%~>%;"><span class="header-text" style="float:left;"><~%=col.displayName%~></span></div>'+"	<~% } else { %~>"+'		<div class="sortable-column"  name="<~%=col.name%~>" style="float:left;width:<~%=col.widthInPercent%~>%;"><span class="header-text" style="float:left;"><~%=col.displayName%~></span><span class="common_sprites"></span></div>'+"	<~% } %~>"+"<~%});%~>"+'<~% if (className != "") { %~> '+'	<div class="fillerRight"></div>'+"<~% } %~>"+"</div>",rowTemplate:'<~% if (className != "") { %~> '+'	<div class="fillerLeft">&nbsp;</div>'+"<~% } %~>"+"	<~% _.each(colConfigs, function(col) { %~>"+'	<div class="data '+"	<~% if(hasCustomHandler) { %~>"+"cursorpointer"+"<~% } %~>"+'" name="<~%=col.name%~>" style="width:<~%=col.widthInPercent%~>%;"><span class="row-text"><~%=col.template%~></span></div>'+"<~%});%~>"+'<~% if (className != "") { %~> '+'	<div class="fillerRight"></div>'+"<~% } %~>",dataTemplate:"",pagerTemplate:"<~% if(pager.totalPages > 0 && pager.pageNum > 0) { %~>"+'<div class="pages">'+"<~% if(pager.totalRecords > 0) { %~>"+'<span style="font-weight:bold;"><~%=pager.startRecord%~>-<~%=pager.endRecord%~> of <~%=pager.totalRecords%~> </span>'+"<~% } %~>"+"<span>"+"<~% if(pager.pageNum > 10) { %~>"+'	<label class="page pageprev"> &laquo; Prev</label> '+"<~% } %~>"+"<~% var startPage = (pager.pageNum % 10 == 0) ? (pager.pageNum - 9)	: pager.pageNum - (pager.pageNum % 10) + 1; %~>"+"<~% var endPage = startPage + 9; %~>"+"<~% endPage = endPage > pager.totalPages ? pager.totalPages : endPage; %~>"+"<~% for ( var i = startPage; i <= endPage; i++) {%~>"+"	<~% if (i == pager.pageNum) { %~>"+'		<label name="page-<~%=i%~>" class="page active-page"><~%=i%~></label>'+"	<~% } else  {%~>"+'		<label name="page-<~%=i%~>" class="page"><~%=i%~></label>'+"	<~% } %~>"+"<~% } %~>"+"<~% if ((startPage + 10) <= pager.totalPages) { %~>"+'	<label id="page-next" class="page pagenext">Next &raquo;</label>'+"<~% } %~>"+"</span>"+"</div>"+"<~% } %~>",loadMoreTemplate:'<div class="loadMoreLink" align="center">'+'	<a href="javascript:void(0);" class="loadMoreMessage">'+'		<img src="/iv/common/styles/images/loadmore.png"/>'+"		<span>Load more</span>"+"	</a>"+'	<div class="loadingIcon" style="display: none; ">'+'		<img src="/iv/common/styles/images/indicator.gif" style="display:inline;"/><span>Loading</span>'+"	</div>"+"</div>",emptyMessage:"No records found.",searchLabel:"Search:",searchDefaultText:""};
if(typeof options!="undefined"){$.extend(true,this.config,options);}this.prepareDataTemplate();this.setStaticContent();this.getData(true);this.delegatePageEvents();this.delegateSearchEvents();this.delegateSortEvents();this.delegateSelectionEvents();};ivGrid.prototype.prepareDataTemplate=function(){if(!this.gridContainer.hasClass("iv-grid")&&typeof this.config.gridClass!="undefined"){this.gridContainer.addClass(this.config.gridClass);
}else{this.gridContainer.addClass("iv-grid");}var colConfig=this.config.colConfig;for(var i=0;i<colConfig.length;i++){var col=colConfig[i];var defaultValue=typeof col.defaultValue!="undefined"?col.defaultValue:"&nbsp;";if(typeof col.template=="undefined"||col.template==null||jQuery.trim(col.template)==""){col.template='<~% if($.trim(row["'+col.name+'"]) != "") { %~><~%=row["'+col.name+'"]%~><~% } else {%~>'+defaultValue+"<~%}%~>";
}else{if(col.checkbox){var checkboxHtml="<input type='checkbox' name="+col.checkboxName+" id="+col.checkboxValue+" class="+col.checkboxClass+" value="+col.checkboxValue+" />";col.template=checkboxHtml+col.template;}var value='<~% if(row["$1"] != null && row["$1"].toString() != ""){%~><~%=row["$1"]%~><~% }else{%~>'+defaultValue+"<~%}%~>";
col.template=col.template.replace(/<~%=((\S)*?)%~>/gm,value);}colConfig[i]=col;}if(typeof this.config.onSelectHandler!="undefined"){this.config.hasCustomHandler=true;}else{this.config.hasCustomHandler=false;this.config.onSelectHandler=function(obj){if(typeof console!="undefined"){console.log(obj);}};
}this.config.dataTemplate="";if(this.config.overflowRows.enabled){this.config.dataTemplate+='<div class="'+this.config.overflowRows.overflowClass+'"  style="max-height:'+this.config.overflowRows.overflowHeight+';" >';}this.config.dataTemplate+='<div class="dataSet">'+"<~% _.each(data, function(row) { if (row != null) { %~>"+'	<div class="rows">'+_.template(this.config.rowTemplate,{colConfigs:colConfig,hasCustomHandler:this.config.hasCustomHandler,className:typeof this.config.gridClass!="undefined"?this.config.gridClass:""})+"   </div>"+"<~%}});%~>"+"</div>";
if(this.config.overflowRows.enabled){this.config.dataTemplate+="</div>";}};ivGrid.prototype.setStaticContent=function(){if(this.config.gridType=="static"){var pager=this.config.pager;pager.totalPages=Math.ceil(this.config.data.length/pager.resultsPerPage);this.config.pager=pager;}this.config.headerHtml=_.template(this.config.headerTemplate,{colConfigs:this.config.colConfig,className:typeof this.config.gridClass!="undefined"?this.config.gridClass:""});
this.config.searchHtml=_.template((typeof this.config.liveFilter!="undefined"&&this.config.liveFilter)?this.config.liveSearchTemplate:this.config.defaultSearchTemplate,{label:this.config.searchLabel,defaultText:this.config.searchDefaultText});var html=(this.config.filter==false)?"":this.config.searchHtml;
html+=this.config.headerHtml;this.gridContainer.append(html);};ivGrid.prototype.getData=function(isDefaultLoad,resetStartIndexFlag){var isUserAction=true;if(typeof isDefaultLoad!=="undefined"){if(isDefaultLoad){isUserAction=false;}}var resetStartIndex=false;if(typeof resetStartIndexFlag!=="undefined"){if(resetStartIndexFlag){resetStartIndex=true;
}}var config=this.config;this.gridContainer.find(".white-overlay").show();if(config.gridType=="static"){this.getDataCallback();}else{if(config.gridType=="dynamic"&&isDefaultLoad&&config.data.length>0){this.getDataCallback(config.data,isDefaultLoad);}else{var $this=this;config.dataSourceParams.pageNum=$this.config.pager.pageNum;
if(resetStartIndex){config.dataSourceParams.startIndex=0;}else{config.dataSourceParams.startIndex=$this.gridContainer.find(".dataSet .rows").length;}config.dataSourceParams.resultsPerPage=$this.config.pager.resultsPerPage;var postParams={resource:config.dataSource,urlParams:config.dataSourceParams,success:function(resp){$this.getDataCallback(resp);
},error:function(resp){$this.getDataCallback(resp);},responseType:"json"};if(isUserAction){iv.api.userAction.doPost(postParams);}else{iv.api.doPost(postParams);}}}};ivGrid.prototype.delegatePageEvents=function(){var $this=this;$this.gridContainer.undelegate(".page","click");$this.gridContainer.undelegate(".loadMoreLink a","click");
$this.gridContainer.delegate(".page","click",function(){var page=$(this);if(!page.hasClass("active-page")){var pageNum=parseInt($this.config.pager.pageNum);var resultsPerPage=parseInt($this.config.pager.resultsPerPage);if(page.hasClass("pageprev")){if(pageNum%resultsPerPage==0){pageNum=pageNum-resultsPerPage;
}else{pageNum-=(pageNum%resultsPerPage);}}else{if(page.hasClass("pagenext")){if(pageNum%resultsPerPage==0){pageNum++;}else{pageNum=pageNum-(pageNum%resultsPerPage)+resultsPerPage+1;}}else{pageNum=parseInt(page.attr("name").replace("page-",""));$this.gridContainer.find(".active-page").removeClass("active-page");
page.addClass("active-page");}}$this.config.pager.pageNum=pageNum;$this.getData();}return false;});$this.gridContainer.delegate(".loadMoreLink a","click",function(){$(this).find("span").text("Loading more");var pager=$this.config.pager;var pageNum=parseInt(pager.pageNum);if(pageNum==1){pager.firstCount=parseInt(pager.resultsPerPage);
}var rowsCountMultiplier=parseInt(pager.rowsCountMultiplier);pager.resultsPerPage=pager.firstCount*Math.pow(rowsCountMultiplier,(pageNum));pager.pageNum=pageNum+1;$this.getData();});},ivGrid.prototype.delegateSearchEvents=function(){var $this=this;$this.gridContainer.undelegate("input.searchBox","keyup");
$this.gridContainer.undelegate("input.searchBox","click");$this.gridContainer.undelegate("input.searchBox","blur");$this.gridContainer.undelegate(".searchBoxRightImage","click");$this.gridContainer.undelegate(".searchLink","click");if($this.config.filter!="false"){$this.gridContainer.delegate("input.searchBox","keyup",function(){if($(this).val()==$this.config.searchDefaultText||$(this).val()==""){$(this).css("color","#666666");
}else{$(this).css("color","#333333");}});$this.gridContainer.delegate("input.searchBox","click",function(){if($(this).val()==$this.config.searchDefaultText){$(this).val("").css("color","#333333");}});$this.gridContainer.delegate("input.searchBox","blur",function(){if(jQuery.trim($(this).val())==""){$(this).val($this.config.searchDefaultText).css("color","#666666");
}});$this.gridContainer.delegate(".searchBoxRightImage","click",function(){var value=$this.gridContainer.find("input.searchBox").val();if(jQuery.trim(value)!=$this.config.searchDefaultText){$this.config.dataSourceParams.searchTerm=jQuery.trim(value);$this.config.pager.pageNum=1;$this.config.pageData=[];
$this.getData(false,true);}});$this.gridContainer.delegate(".searchLink","click",function(){$this.gridContainer.find("input.searchBox").val($this.config.searchDefaultText).css("color","#666666");$this.config.dataSourceParams.searchTerm="";$this.config.pageData=[];$this.getData();});$this.gridContainer.delegate("input.searchBox","keyup",function(event){if((!_.isUndefined($this.config.liveFilter)&&$this.config.liveFilter)||event.which==13){var value=$this.gridContainer.find("input.searchBox").val();
if($this.config.searchDefaultText==""||jQuery.trim(value)!=$this.config.searchDefaultText){$this.config.dataSourceParams.searchTerm=jQuery.trim(value);$this.config.pageData=[];$this.getData();}}});setTimeout(function(){$this.gridContainer.find("input.searchBox").click().focus();},10);}},ivGrid.prototype.delegateSortEvents=function(){var $this=this;
$this.gridContainer.delegate(".rows-header > div","click",function(){var col=$(this);if(col.hasClass("not-sortable")||col.hasClass("fillerRight")||col.hasClass("fillerLeft")){return;}var span=col.find("span.common_sprites");if(span.hasClass("ascending_arrow")){$this.config.dataSourceParams.sortOrder="desc";
span.removeClass("ascending_arrow").addClass("descending_arrow");}else{if(span.hasClass("descending_arrow")){$this.config.dataSourceParams.sortOrder="asc";span.removeClass("descending_arrow").addClass("ascending_arrow");}else{$this.config.dataSourceParams.sortOrder="asc";span.removeClass("descending_arrow_disabled").addClass("ascending_arrow");
$this.config.dataSourceParams.sortType=col.attr("name");}}$this.getData();});},ivGrid.prototype.delegateSelectionEvents=function(){var $this=this;$this.gridContainer.delegate(".data","click",function(){$this.config.selectedIndex=$this.gridContainer.find(".rows").index($(this).parent());if($this.config.gridType=="static"){var pager=$this.config.pager;
$this.config.selectedIndex+=(pager.pageNum-1)*pager.resultsPerPage;}var selectedObj=$this.getSelectedObject();$this.config.onSelectHandler(selectedObj);});},ivGrid.prototype.getDataCallback=function(resp,isDefaultLoad){this.gridContainer.find(".white-overlay").hide();this.gridContainer.find("a.loadMoreMessage span").text("Load more");
if(typeof resp!="undefined"&&typeof resp.error!="undefined"&&resp.error){return;}if(typeof isDefaultLoad=="undefined"){isDefaultLoad=false;}var config=this.config;if(config.gridType!="static"&&!isDefaultLoad){if(config.dataSuffix!=""){this.config.data=resp.data[config.dataSuffix];var pager=this.config.pager;
if(typeof resp.data.pagingParams!="undefined"){var pagingParams=resp.data.pagingParams;if(typeof pagingParams.pageNum!="undefined"&&pagingParams.pageNum>0){pager.pageNum=pagingParams.pageNum;}if(typeof pagingParams.totalPages!="undefined"&&pagingParams.totalPages>=0){pager.totalPages=pagingParams.totalPages;
}if(typeof pagingParams.totalRecords!="undefined"&&pagingParams.totalRecords>=0){pager.totalRecords=pagingParams.totalRecords;}}pager.startRecord=((pager.pageNum-1)*pager.resultsPerPage)+1;var endRecord=pager.pageNum*pager.resultsPerPage;endRecord=endRecord>pager.totalRecords?pager.totalRecords:endRecord;
pager.endRecord=endRecord;this.config.pager=pager;pager=null;}else{var newResp=resp.data;if(typeof this.config.preRenderCallback!="undefined"){newResp=this.config.preRenderCallback(resp.data);}this.config.data=newResp;}}this.applyData();this.config.renderCallback(this.config.data);};ivGrid.prototype.applyData=function(){var sortType=this.config.dataSourceParams.sortType;
var sortOrder=this.config.dataSourceParams.sortOrder;var searchTerm=jQuery.trim(this.config.dataSourceParams.searchTerm);var searchFields=[this.config.colConfig[0].name];if(typeof this.config.dataSourceParams.searchFields!="undefined"){searchFields=this.config.dataSourceParams.searchFields;}var html="";
if(this.config.gridType=="static"){var data=this.config.data;data=_.sortBy(data,function(row){if(typeof row[sortType]!="undefined"){if(typeof row[sortType]=="string"){return String(row[sortType]).toLowerCase();}else{return row[sortType];}}return 1;});if(sortOrder=="desc"){data=data.reverse();}$("body").append('<div id="utilDiv" style="display:none;"></div>');
var encodedText=$("#utilDiv").text(searchTerm.toLowerCase()).html();data=_.select(data,function(row){var dataString="";for(var i=0;i<searchFields.length;i++){dataString+=(typeof row[searchFields[i]]!="undefined"?row[searchFields[i]]:"");}return(searchTerm!="")?dataString.toLowerCase().indexOf(encodedText)>=0:true;
});$("#utilDiv").remove();var pager=this.config.pager;if(data.length!=this.config.pageData.length||data.length==0){pager.totalPages=Math.ceil(data.length/pager.resultsPerPage);pager.pageNum=1;pager.totalRecords=data.length;}this.config.pageData=data;pager.startRecord=((pager.pageNum-1)*pager.resultsPerPage)+1;
var endRecord=pager.pageNum*pager.resultsPerPage;endRecord=endRecord>pager.totalRecords?pager.totalRecords:endRecord;pager.endRecord=endRecord;this.config.pager=pager;if(this.config.pager.type=="non-linear"&&typeof this.config.pager.firstCount!="undefined"){var a=this.config.pager.firstCount;var r=this.config.pager.rowsCountMultiplier;
var n=pager.pageNum;var start=a*(Math.pow(r,n-1)-1)/(r-1);}else{var start=((pager.pageNum-1)*pager.resultsPerPage);}if(this.config.pager.type=="non-linear"&&typeof this.config.pager.firstCount!="undefined"&&pager.pageNum==1){pager.resultsPerPage=pager.firstCount;}var end=start+pager.resultsPerPage;if(pager.type=="non-linear"){pager.totalShownRecords=end;
}data=data.slice(start,end);html=_.template(this.config.dataTemplate,{colConfigs:this.config.colConfig,data:data});if(this.config.pager.type=="non-linear"&&this.config.pager.pageNum!=1){var loadedHTML=html;loadedHTML=loadedHTML.substring(21,loadedHTML.length-6);}if(data.length==0){html='<div class="dataSet"><div class="rows"><div class="fillerLeft"></div><div class="row-text">'+this.config.emptyMessage+"</div></div></div>";
}}else{html=_.template(this.config.dataTemplate,{colConfigs:this.config.colConfig,data:this.config.data});if(this.config.data.length==0){html='<div class="dataSet"><div class="rows"><div class="row-text">'+this.config.emptyMessage+"</div></div></div>";}}var pager=this.config.pager;if(pager.type=="linear"&&pager.totalPages>1){html+=_.template(this.config.pagerTemplate,{pager:this.config.pager});
}if(pager.type=="non-linear"&&pager.totalRecords>pager.resultsPerPage&&pager.pageNum==1){html+=_.template(this.config.loadMoreTemplate,{});}this.gridContainer.find(".ascending_arrow").removeClass("ascending_arrow");this.gridContainer.find(".descending_arrow").removeClass("descending_arrow");this.gridContainer.find(".descending_arrow_disabled").removeClass("descending_arrow_disabled");
this.gridContainer.find(".sortable-column  span.common_sprites").addClass("descending_arrow_disabled");this.gridContainer.find("div[name="+sortType+"] span.common_sprites").removeClass("descending_arrow_disabled").addClass(sortOrder+"ending_arrow");if(pager.type=="non-linear"&&pager.pageNum!=1&&typeof pager.totalShownRecords!="undefined"){if(pager.totalRecords<=pager.totalShownRecords){this.gridContainer.find("div.loadMoreLink").hide();
}this.gridContainer.find("div.dataSet").append(loadedHTML);}else{if(pager.type=="non-linear"&&pager.pageNum!=1&&this.config.type!="static"){html=$(html).html();this.gridContainer.find("div.dataSet").append(html);if(pager.totalRecords<=this.gridContainer.find(".rows").length){this.gridContainer.find("div.loadMoreLink").hide();
}}else{this.gridContainer.find("div.dataSet, div.pages, div.loadMoreLink , div."+this.config.overflowRows.overflowClass).remove();this.gridContainer.append(html);}}if(searchTerm==""||searchTerm==this.config.searchDefaultText){$("a.searchLink").hide();}else{$("a.searchLink").show();}if(typeof this.config.customHandler!="undefined"){this.config.customHandler(this);
}};ivGrid.prototype.getContainer=function(){return this.gridContainer;};ivGrid.prototype.getSelectedObject=function(){if(this.config.gridType=="static"){return this.config.pageData[this.config.selectedIndex];}else{return this.config.data[this.config.selectedIndex];}};$.fn.setupIvGrid=function(options){var grid=new ivGrid(this,options);
return grid;};})(jQuery);registerNS("iv.userExperiments");iv.userExperiments={exptList:[],exptObjs:{},eventTrigger:{},registerForEventTrigger:function(expId,eventTrigger,cb){if(typeof eventTrigger==="boolean"&&eventTrigger){this.eventTrigger[expId]={"eventTrigger":eventTrigger,"callback":cb};}},init:function(exptConfig){this.exptList=exptConfig;
var len=this.exptList.length;for(var i=0;i<len;i++){this.processExpt(this.exptList[i]);if(typeof this.eventTrigger[this.exptList[i].expId]==="undefined"||!this.eventTrigger[this.exptList[i].expId].eventTrigger){if(!this.exptObjs[this.exptList[i].expId].isRunning&&!this.exptObjs[this.exptList[i].expId].isDisabled){this.exptObjs[this.exptList[i].expId].isRunning=true;
this.initHandler(this.exptObjs[this.exptList[i].expId]);}}else{var c=_.bind(this.eventTrigger[this.exptList[i].expId].callback,this,this.exptList[i]);c();}}},triggerExperiment:function(expId){if(typeof this.exptObjs[expId]!=="undefined"){if(this.exptObjs[expId].isRunning||this.exptObjs[expId].isDisabled){return;
}this.exptObjs[expId].isRunning=true;this.initHandler(this.exptObjs[expId]);}},processExpt:function(expt){expt.template=this.getExptTemplate(expt);this.exptObjs[expt.expId]=expt;this.exptObjs[expt.expId].isRunning=false;this.exptObjs[expt.expId].isDisabled=false;},getExptTemplate:function(expt){return iv.ui.getTemplate("userExperiments.exp"+expt.expId+"grp"+expt.grpId);
},initHandler:function(expt){if(expt.expId==="0"){this.showFirstUse(expt);this.exp0AttachEvents(expt);}else{if(expt.expId==="1"){this.showOnGoingUse(expt);this.exp1AttachEvents(expt);}}},exp0AttachEvents:function(expt){var $this=this;$(".firstUseBg,#FUE-Learn-More").bind("click",function(){$this.triggerFUEEvent(expt,this.id);
});$(".start-using-iv").click(function(){var action=this.id;$this.hideFirstUse();$this.trackEvent(action,expt);$this.disableFeature(expt);return false;});},exp1AttachEvents:function(expt){var $this=this;$(".crossOue,.closeTip").click(function(){var action="OUE-expId"+expt.expId+"-grp"+expt.grpId+"-"+this.id;
$this.trackEvent(action,expt);$this.disableFeature(expt);$this.hideOnGoingUse();return false;});},showFirstUse:function(expt){var opaqueLayer='<div id="fue-opaqueLayer" class="opaqueLayer" style="width:100%;bottom:0;display:block;height:100%;position:fixed;"></div>';var fueContainer='<div style="position:absolute;z-index:100004;top:50%;left:50%;margin:-190px 0 0 -372px;" id="firstUseContainer">';
var fueContainerEnd="</div>";var html=opaqueLayer+fueContainer+iv.ui.getTemplate("userExperiments.firstUseHeader");html+=this.exptObjs[expt.expId].template;html+=iv.ui.getTemplate("userExperiments.firstUseFooter");html+=fueContainerEnd;$(document.body).append(html);},ieSevenHandleForOUE:function(){if(iv.isMashup){if($("#oue-container").css("display")!=="none"){this.fixPositionForIeSevenInOue();
}}},fixPositionForIeSevenInOue:function(){if(iv.isMashup){var left=$(".smart-agent-tabs").offset().left+$(".smart-agent-tabs").width();var top="65px";$(".smart-agent-tabs").css("position","static");$("#oue-container").css("position","fixed");$("#oue-container").css({"top":top,"left":left+"px"});$(".lt_arrow").css("height","35px");
}},showOnGoingUse:function(expt){var oueHtml=_.template(expt.template,{grp:expt.grpId});if(expt.grpId==="0"||expt.grpId==="1"){$(".smart-agent-tabs").append(oueHtml);$(".smart-agent-tabs").css("position","relative");$("#oue-container").css("left","125px");$("#oue-container").css("top","-90px");if($.browser.msie){if($.browser.version==="7.0"){this.fixPositionForIeSevenInOue();
if($("#content_panel")){}}}}else{if(expt.grpId==="2"){$("#tabPeople").append(oueHtml);$("#tabPeople").css("position","relative");$("#oue-container").css("left","-52px");$("#oue-container").css("top","20px");}else{if(expt.grpId==="3"){}}}$("#oue-container").fadeIn();},triggerFUEEvent:function(expt,action){if(action==="FUE-firstUse_findProspects"){iv.userExperiments.trackEvent(action,expt);
window.open("http://community.insideview.com/t5/Getting-Started/Find-Better-Prospects/ta-p/1119");}else{if(action==="FUE-firstUse_qualify"){iv.userExperiments.trackEvent(action,expt);window.open("http://community.insideview.com/t5/Getting-Started/Qualify-your-Leads-and-Opportunities-Quickly/ta-p/1125");
}else{if(action==="FUE-firstUse_engage"){iv.userExperiments.trackEvent(action,expt);window.open("http://community.insideview.com/t5/Getting-Started/Engage-Prospects-and-Customers/ta-p/1127");}else{if(action==="FUE-firstUse_findOppor"){iv.userExperiments.trackEvent(action,expt);window.open("http://community.insideview.com/t5/Getting-Started/Find-Opportunities-to-Reach-Out-to-Customers/ta-p/1133");
}else{if(action==="FUE-firstUse_referrals"){iv.userExperiments.trackEvent(action,expt);window.open("http://community.insideview.com/t5/Getting-Started/Get-Referrals-to-Key-Decision-Makers/ta-p/1141");}else{if(action==="FUE-firstUse_startConver"){iv.userExperiments.trackEvent(action,expt);window.open("http://community.insideview.com/t5/Getting-Started/Start-Conversations-with-Prospects-and-Customers/ta-p/1091");
}else{iv.userExperiments.trackEvent(action,expt);}}}}}}return false;},trackEvent:function(url,expt){if(typeof expt!=="undefined"){if(this.exptObjs[expt.expId].isDisabled){return false;}iv.util.logUserActivity(url);}else{if(typeof console!=="undefined"){if(typeof console.log!=="undefined"){console.log("WE CANT FIND EXPT OBJECT TO TRACK > PLEASE PASS THE SAME TO TRACK EVENT API");
}}}},disableFeature:function(expt){if(typeof expt!=="undefined"){if(this.exptObjs[expt.expId].isDisabled){return false;}this.exptObjs[expt.expId].isRunning=false;this.exptObjs[expt.expId].isDisabled=true;iv.api.userAction.getContent({resource:"/iv/productMessage.do",urlParams:{methodName:"messageShown",featureId:expt.featureId},success:function(){},error:function(){}});
}else{if(typeof console!=="undefined"){if(typeof console.log!=="undefined"){console.log("WE CANT FIND EXPT OBJECT TO TRACK > PLEASE PASS THE SAME TO DISABLE FEATURE API");}}}},hideFirstUse:function(){$("#fue-opaqueLayer").hide();$("#firstUseContainer").hide();$("#outer").show();},hideOnGoingUse:function(){$("#oue-container").hide();
$(".smart-agent-tabs").removeAttr("position");}};registerNS("iv.stopPoint");iv.stopPoint={data:null,templates:{},init:function(config){this.data=config;this.templates=config.templates;this.baseTemplate=iv.ui.getTemplate("stopPoint.baseTemplate");},applyBaseTemplate:function(key){var obj=$.extend(this.templates[key],{"stopPointKey":key});
return _.template(this.baseTemplate,obj);},getTemplate:function(key){if(typeof(this.templates[key])!=="undefined"){return this.applyBaseTemplate(key);}else{return false;}},mod:null,show:function(key){this.initModal(this.getTemplate(key));iv.util.logUserActivity("stop_point_"+key+"_exposed");iv.util.trackToMarketo("clickLink","stop_point_"+key+"_exposed");
return false;},attachStopPointEvents:function(){},logClickedPoints:function(key){iv.util.logUserActivity("upgrade_flow_"+key+"_clicked");iv.util.trackToMarketo("clickLink","upgrade_flow_"+key+"_clicked");},initModal:function(msg){var m=false,s=false,d=false;if(typeof(this.data.isMashup)==="boolean"&&this.data.isMashup){m=true;
}if(m){s=this.data.crmSize;d=true;}this.mod=new modal();this.mod.initModalDialog({metrics:{width:420},content:msg,callback:_.bind(this.attachStopPointEvents,this),mashup:m,crmSize:s,displayOverlayMashup:d,controlsEnabled:true,moveControlEnabled:false});this.mod.displayModal();}};function modal(){this.container=document.getElementById("container");
this.overlay=document.getElementById("overlay");this.contentDiv=document.getElementById("modal-content");this.autoResize=false;this.content="";this.data=null;this.metrics=null;this.controlsEnabled=false;this.moveControl=false;this.mashup=false;this.staticTopPosition=null;this.disableOverlay=false;this.displayOverlayMashup=false;
this.showOverlayMashup=false;this.crmSize="full";this.screenMetrics=null;this.showModal=true;this.callback=null;var that=this;function showLayer(){if(that.disableOverlay){that.overlay.style.display="none";return;}if(that.overlay!=null&&!that.mashup){that.overlay.style.display="block";that.showOverlayMashup=true;
}else{if(that.displayOverlayMashup&&that.mashup){that.overlay.style.display="block";}that.showOverlayMashup=true;}setLayerPosition();}function setLayerPosition(){if(that.showModal){if(that.overlay!=null&&that.showOverlayMashup){if(that.screenMetrics.height<=that.metrics.height){that.screenMetrics.height=that.metrics.height+50;
}else{if(that.screenMetrics.height<=(that.metrics.height+40)){that.screenMetrics.height=that.metrics.height+50;}}that.overlay.style.width=(that.screenMetrics.width-20)+"px";that.overlay.style.height=(that.screenMetrics.height-5)+"px";}}}function getBrowserHeight(){var intViewH=0;var intW=0;if(typeof window.innerWidth=="number"){intViewH=window.innerHeight;
intW=window.innerWidth;}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){intViewH=document.documentElement.clientHeight;intW=document.documentElement.clientWidth;}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){intViewH=document.body.clientHeight;
intW=document.body.clientWidth;}}}var D=document;var intH=Math.max(Math.max(D.body.scrollHeight,D.documentElement.scrollHeight),Math.max(D.body.offsetHeight,D.documentElement.offsetHeight),Math.max(D.body.clientHeight,D.documentElement.clientHeight));var docH=$(document).height();if(parseInt(docH)>parseInt(intH)){intH=docH;
}return{width:parseInt(intW),height:parseInt(intH),viewPortHeight:parseInt(intViewH)};}this.controls="";function fillContainer(content){if(that.showModal){if(!that.controlsEnabled){if(iv.isMashup){if(iv.isSmallMashup){that.controlsEnabled=true;}}}if(that.controlsEnabled){that.controls='<div class="modal_controls">';
if(that.moveControl){that.controls+='<div title="Move" class="modal_move"></div>';}else{that.controls+='<div title="Move" class="modal_move" style="background:transparent; cursor: auto;"></div>';}that.controls+='<div title="Close" class="modal_close close"></div>';that.controls+="</div>";}that.contentDiv.innerHTML=that.controls+content;
if(that.container!=null){that.container.style.display="block";}that.setPosition();}}this.setScreenMetrics=function(){this.screenMetrics=getBrowserHeight();};this.getBoundingRect=function(node){var r=node.getBoundingClientRect();var contentHeight,contentWidth;if($.browser.msie){contentHeight=parseInt(r.bottom-r.top);
contentWidth=parseInt(r.right-r.left);}else{contentHeight=parseInt(r.height);contentWidth=parseInt(r.width);}return{"contentHeight":contentHeight,"contentWidth":contentWidth};};function setModalConfig(){var contentHeight,contentWidth;if(that.autoResize){var bounding=that.getBoundingRect(that.contentDiv.children[0]);
contentWidth=bounding.contentWidth;}if(that.metrics==null){alert("Metrics are missing for modal");that.showModal=false;return;}var m=that.metrics;if(that.autoResize){m={width:contentWidth};}var twid=m.width;that.container.style.width=twid+85+"px";that.contentDiv.style.width=twid+"px";}this.setPosition=function(){var contentHeight,contentWidth;
var bounding=this.container.getBoundingClientRect();if(!this.autoResize){contentHeight=bounding.bottom-bounding.top;var contentWidth=this.metrics.width;}if(this.autoResize){var bounding=this.contentDiv.getBoundingClientRect();if($.browser.msie){contentHeight=bounding.bottom-bounding.top;contentWidth=bounding.right-bounding.left;
}else{contentHeight=bounding.height;contentWidth=bounding.width;}}if(this.container!=null){var x=parseInt((this.screenMetrics.width-(contentWidth+70))/2);this.container.style.left=x+"px";if(this.screenMetrics.viewPortHeight<=contentHeight){this.screenMetrics.viewPortHeight=contentHeight;}var scrollTop=0;
if(typeof document.body.scrollTop!="undefined"&&document.body.scrollTop>0){scrollTop=document.body.scrollTop;}if(typeof document.documentElement!="undefined"&&typeof document.documentElement.scrollTop!="undefined"&&document.documentElement.scrollTop>0){scrollTop=document.documentElement.scrollTop;}if(that.mashup&&that.staticTopPosition!=null){this.container.style.top=that.staticTopPosition;
}else{this.container.style.top=parseInt(scrollTop+((this.screenMetrics.viewPortHeight-(contentHeight+20))/2))+"px";}if(that.crmSize=="small"){this.container.style.top=0+"px";}}};this.resizeEvent=function(){this.setScreenMetrics();this.setPosition();setLayerPosition();};this.initModalDialog=function(params){this.showModal=true;
if(params){if(params.metrics){this.metrics=params.metrics;}else{if(params.autoResize){this.metrics={width:100};}else{alert("Metrics are missing.");this.showModal=false;}}if(params.content){this.content=params.content;}if(params.contentLocation){this.content=document.getElementById(params.contentLocation).innerHTML;
}if(params.callback){this.callback=params.callback;}else{alert("no callback");}if(params.autoResize===true){this.autoResize=params.autoResize;}if(params.data){this.data=params.data;}if(params.mashup){this.mashup=params.mashup;}if(params.displayOverlayMashup){this.displayOverlayMashup=params.displayOverlayMashup;
}if(params.crmSize){this.crmSize=params.crmSize;}if(params.disableOverlay){this.disableOverlay=params.disableOverlay;}if(typeof params.controlsEnabled==="boolean"){this.controlsEnabled=params.controlsEnabled;this.moveControl=true;if(typeof params.moveControlEnabled==="boolean"){this.moveControl=params.moveControlEnabled;
}}if(typeof params.staticTopPosition!="undefined"){this.staticTopPosition=params.staticTopPosition;}}else{alert("Params are missing. Cannot show modal.");this.showModal=false;return;}};this.displayModal=function(oneTimeData){this.setScreenMetrics();showLayer();fillContainer(this.content);setModalConfig();
var ref=this;window.onresize=function(){ref.resizeEvent();};if(this.data){if(oneTimeData!==undefined||oneTimeData!==null){this.data["oneTimeData"]=oneTimeData;}this.callback(this.data);}else{if(oneTimeData!==undefined||oneTimeData!==null){this.callback(oneTimeData);}else{this.callback();}}setModalConfig();
this.setPosition();if(this.controlsEnabled){this.controlEvents(this.moveControl);}$(document).bind("scroll",function(){var hgt=$(document).height();$(".opaqueLayer").css("height",hgt);});};this.controlEvents=function(enableMove){if(enableMove){$("#container").drag(function(ev,dd){$(this).css({top:dd.offsetY,left:dd.offsetX});
$(this).find("input").trigger("blur");},{handle:".modal_move"});}$(".modal_close").click(_.bind(this.hideModal,this));};this.hideModal=function(){this.container.style.display="none";this.contentDiv.innerHTML="";this.overlay.style.display="none";window.onresize=null;$(document).unbind("scroll");};}var myModal=new modal();
/* 
 * jquery.event.drag - v 2.0.0 
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
(function(f){f.fn.drag=function(b,a,d){var e=typeof b=="string"?b:"",k=f.isFunction(b)?b:f.isFunction(a)?a:null;if(e.indexOf("drag")!==0){e="drag"+e;
}d=(b==k?a:d)||{};return k?this.bind(e,d,k):this.trigger(e);};var i=f.event,h=i.special,c=h.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(b){var a=f.data(this,c.datakey),d=b.data||{};a.related+=1;if(!a.live&&b.selector){a.live=true;
i.add(this,"draginit."+c.livekey,c.delegate);}f.each(c.defaults,function(e){if(d[e]!==undefined){a[e]=d[e];}});},remove:function(){f.data(this,c.datakey).related-=1;},setup:function(){if(!f.data(this,c.datakey)){var b=f.extend({related:0},c.defaults);f.data(this,c.datakey,b);i.add(this,"mousedown",c.init,b);
this.attachEvent&&this.attachEvent("ondragstart",c.dontstart);}},teardown:function(){if(!f.data(this,c.datakey).related){f.removeData(this,c.datakey);i.remove(this,"mousedown",c.init);i.remove(this,"draginit",c.delegate);c.textselect(true);this.detachEvent&&this.detachEvent("ondragstart",c.dontstart);
}},init:function(b){var a=b.data,d;if(!(a.which>0&&b.which!=a.which)){if(!f(b.target).is(a.not)){if(!(a.handle&&!f(b.target).closest(a.handle,b.currentTarget).length)){a.propagates=1;a.interactions=[c.interaction(this,a)];a.target=b.target;a.pageX=b.pageX;a.pageY=b.pageY;a.dragging=null;d=c.hijack(b,"draginit",a);
if(a.propagates){if((d=c.flatten(d))&&d.length){a.interactions=[];f.each(d,function(){a.interactions.push(c.interaction(this,a));});}a.propagates=a.interactions.length;a.drop!==false&&h.drop&&h.drop.handler(b,a);c.textselect(false);i.add(document,"mousemove mouseup",c.handler,a);return false;}}}}},interaction:function(b,a){return{drag:b,callback:new c.callback,droppable:[],offset:f(b)[a.relative?"position":"offset"]()||{top:0,left:0}};
},handler:function(b){var a=b.data;switch(b.type){case !a.dragging&&"mousemove":if(Math.pow(b.pageX-a.pageX,2)+Math.pow(b.pageY-a.pageY,2)<Math.pow(a.distance,2)){break;}b.target=a.target;c.hijack(b,"dragstart",a);if(a.propagates){a.dragging=true;}case"mousemove":if(a.dragging){c.hijack(b,"drag",a);if(a.propagates){a.drop!==false&&h.drop&&h.drop.handler(b,a);
break;}b.type="mouseup";}case"mouseup":i.remove(document,"mousemove mouseup",c.handler);if(a.dragging){a.drop!==false&&h.drop&&h.drop.handler(b,a);c.hijack(b,"dragend",a);}c.textselect(true);if(a.click===false&&a.dragging){jQuery.event.triggered=true;setTimeout(function(){jQuery.event.triggered=false;
},20);a.dragging=false;}break;}},delegate:function(b){var a=[],d,e=f.data(this,"events")||{};f.each(e.live||[],function(k,j){if(j.preType.indexOf("drag")===0){if(d=f(b.target).closest(j.selector,b.currentTarget)[0]){i.add(d,j.origType+"."+c.livekey,j.origHandler,j.data);f.inArray(d,a)<0&&a.push(d);}}});
if(!a.length){return false;}return f(a).bind("dragend."+c.livekey,function(){i.remove(this,"."+c.livekey);});},hijack:function(b,a,d,e,k){if(d){var j={event:b.originalEvent,type:b.type},n=a.indexOf("drop")?"drag":"drop",l,o=e||0,g,m;e=!isNaN(e)?e:d.interactions.length;b.type=a;b.originalEvent=null;d.results=[];
do{if(g=d.interactions[o]){if(!(a!=="dragend"&&g.cancelled)){m=c.properties(b,d,g);g.results=[];f(k||g[n]||d.droppable).each(function(q,p){l=(m.target=p)?i.handle.call(p,b,m):null;if(l===false){if(n=="drag"){g.cancelled=true;d.propagates-=1;}if(a=="drop"){g[n][q]=null;}}else{if(a=="dropinit"){g.droppable.push(c.element(l)||p);
}}if(a=="dragstart"){g.proxy=f(c.element(l)||g.drag)[0];}g.results.push(l);delete b.result;if(a!=="dropinit"){return l;}});d.results[o]=c.flatten(g.results);if(a=="dropinit"){g.droppable=c.flatten(g.droppable);}a=="dragstart"&&!g.cancelled&&m.update();}}}while(++o<e);b.type=j.type;b.originalEvent=j.event;
return c.flatten(d.results);}},properties:function(b,a,d){var e=d.callback;e.drag=d.drag;e.proxy=d.proxy||d.drag;e.startX=a.pageX;e.startY=a.pageY;e.deltaX=b.pageX-a.pageX;e.deltaY=b.pageY-a.pageY;e.originalX=d.offset.left;e.originalY=d.offset.top;e.offsetX=b.pageX-(a.pageX-e.originalX);e.offsetY=b.pageY-(a.pageY-e.originalY);
e.drop=c.flatten((d.drop||[]).slice());e.available=c.flatten((d.droppable||[]).slice());return e;},element:function(b){if(b&&(b.jquery||b.nodeType==1)){return b;}},flatten:function(b){return f.map(b,function(a){return a&&a.jquery?f.makeArray(a):a&&a.length?c.flatten(a):a;});},textselect:function(b){f(document)[b?"unbind":"bind"]("selectstart",c.dontstart).attr("unselectable",b?"off":"on").css("MozUserSelect",b?"":"none");
},dontstart:function(){return false;},callback:function(){}};c.callback.prototype={update:function(){h.drop&&this.available.length&&f.each(this.available,function(b){h.drop.locate(this,b);});}};h.draginit=h.dragstart=h.dragend=c;})(jQuery);(function($){$.Autocompleter=function($elem,options){this.cacheData_={};
this.cacheLength_=0;this.selectClass_="jquery-autocomplete-selected-item";this.keyTimeout_=null;this.lastKeyPressed_=null;this.lastProcessedValue_=null;this.lastSelectedValue_=null;this.active_=false;this.finishOnBlur_=true;if(!$elem||!($elem instanceof jQuery)||$elem.length!==1||$elem.get(0).tagName.toUpperCase()!=="INPUT"){alert("Invalid parameter for jquery.Autocompleter, jQuery object with one element with INPUT tag expected");
return;}if(typeof options==="string"){this.options={url:options};}else{this.options=options;}this.options.maxCacheLength=parseInt(this.options.maxCacheLength,10);if(isNaN(this.options.maxCacheLength)||this.options.maxCacheLength<1){this.options.maxCacheLength=1;}this.options.minChars=parseInt(this.options.minChars,10);
if(isNaN(this.options.minChars)||this.options.minChars<1){this.options.minChars=1;}this.dom={};this.dom.$elem=$elem;if(this.options.inputClass){this.dom.$elem.addClass(this.options.inputClass);}this.dom.$results=$("<div></div>").hide();if(this.options.resultsClass){this.dom.$results.addClass(this.options.resultsClass);
}this.dom.$results.css({position:"absolute"});$("body").append(this.dom.$results);var self=this;$elem.keyup(function(e){if(this.value==""){if(self.active_){e.preventDefault();self.finish();return false;}}});$elem.keydown(function(e){self.lastKeyPressed_=e.keyCode;switch(self.lastKeyPressed_){case 38:e.preventDefault();
if(self.active_){self.focusPrev();}else{self.activate();}return false;break;case 40:e.preventDefault();if(self.active_){self.focusNext();}else{self.activate();}return false;break;case 9:case 13:var hasResults=self.dom.$results.find("li").length>0;var selectedItems=$("li."+self.selectClass_,self.dom.$results);
if(self.active_&&hasResults&&selectedItems.length>0){e.preventDefault();self.selectCurrent();return false;}else{return true;}break;case 27:if(self.active_){e.preventDefault();self.finish();return false;}break;default:self.activate();}});$elem.blur(function(){if(self.finishOnBlur_){setTimeout(function(){self.finish();
},200);}});$(window).resize(function(e){if(self.active_){e.preventDefault();self.finish();return false;}});};$.Autocompleter.prototype.position=function(){var offset=this.dom.$elem.offset();this.dom.$results.css({top:offset.top+this.dom.$elem.outerHeight(),left:offset.left});};$.Autocompleter.prototype.cacheRead=function(filter){var filterLength,searchLength,search,maxPos,pos;
if(this.options.useCache){if(typeof this.options.readExternalCache==="function"){return this.options.readExternalCache(filter);}else{filter=String(filter);filterLength=filter.length;if(this.options.matchSubset){searchLength=1;}else{searchLength=filterLength;}while(searchLength<=filterLength){if(this.options.matchInside){maxPos=filterLength-searchLength;
}else{maxPos=0;}pos=0;while(pos<=maxPos){search=filter.substr(0,searchLength);if(this.cacheData_[search]!==undefined){return this.cacheData_[search];}pos++;}searchLength++;}}}return false;};$.Autocompleter.prototype.cacheWrite=function(filter,data){if(this.options.useCache){if(typeof this.options.writeToExternalCache==="function"){return this.options.writeToExternalCache(filter,data);
}else{if(this.cacheLength_>=this.options.maxCacheLength){this.cacheFlush();}filter=String(filter);if(this.cacheData_[filter]!==undefined){this.cacheLength_++;}return this.cacheData_[filter]=data;}}return false;};$.Autocompleter.prototype.cacheFlush=function(){this.cacheData_={};this.cacheLength_=0;};
$.Autocompleter.prototype.callHook=function(hook,data){var f=this.options[hook];if(f&&$.isFunction(f)){return f(data,this);}return false;};$.Autocompleter.prototype.activate=function(){var self=this;var activateNow=function(){self.activateNow();};var delay=parseInt(this.options.delay,10);if(isNaN(delay)||delay<=0){delay=250;
}if(this.keyTimeout_){clearTimeout(this.keyTimeout_);}this.keyTimeout_=setTimeout(activateNow,delay);};$.Autocompleter.prototype.activateNow=function(){var value=this.dom.$elem.val();if(value!==this.lastProcessedValue_&&value!==this.lastSelectedValue_){if(value.length>=this.options.minChars){this.active_=true;
this.lastProcessedValue_=value;this.fetchData(value);}}};$.Autocompleter.prototype.fetchData=function(value){if(this.options.data){this.filterAndShowResults(this.options.data,value);}else{var self=this;this.fetchRemoteData(value,function(remoteData){self.filterAndShowResults(remoteData,value);});}};$.Autocompleter.prototype.fetchRemoteData=function(filter,callback){var data=this.cacheRead(filter);
if(data){callback(data);}else{var self=this;this.dom.$elem.addClass(this.options.loadingClass);var ajaxCallback=function(data){var parsed=false;if(data!==false){parsed=self.parseRemoteData(data);self.cacheWrite(filter,parsed);}self.dom.$elem.removeClass(self.options.loadingClass);callback(parsed);};$.ajax({url:this.makeUrl(filter),success:ajaxCallback,error:function(){ajaxCallback(false);
}});}};$.Autocompleter.prototype.setExtraParam=function(name,value){var index=$.trim(String(name));if(index){if(!this.options.extraParams){this.options.extraParams={};}if(this.options.extraParams[index]!==value){this.options.extraParams[index]=value;this.cacheFlush();}}};$.Autocompleter.prototype.makeUrl=function(param){var self=this;
var paramName=this.options.paramName||"q";var url=this.options.url;var params=$.extend({},this.options.extraParams);if(this.options.paramName===false){url+=encodeURIComponent(param);}else{params[paramName]=param;}var urlAppend=[];$.each(params,function(index,value){urlAppend.push(self.makeUrlParam(index,value));
});if(urlAppend.length){url+=url.indexOf("?")==-1?"?":"&";url+=urlAppend.join("&");}return url;};$.Autocompleter.prototype.makeUrlParam=function(name,value){return String(name)+"="+encodeURIComponent(value);};$.Autocompleter.prototype.parseRemoteData=function(remoteData){var results=[];if(typeof remoteData=="object"){for(var i=0;
i<remoteData.length;i++){results[results.length]={value:remoteData[i].value,data:remoteData[i]};}return results;}var text=String(remoteData).replace("\r\n","\n");var i,j,data,line,lines=text.split("\n");var value;for(i=0;i<lines.length;i++){line=lines[i].split("|");data=[];for(j=0;j<line.length;j++){data.push(unescape(line[j]));
}value=data.shift();results.push({value:unescape(value),data:data});}return results;};$.Autocompleter.prototype.filterAndShowResults=function(results,filter){if($.isFunction(this.options.filterResults)){this.showResults(this.options.filterResults(results,filter,this.options),filter);}else{this.showResults(this.filterResults(results,filter),filter);
}};$.Autocompleter.prototype.filterResults=function(results,filter){var filtered=[];var value,data,i,result,type,include;var regex,pattern,attributes="";var specials=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");for(i=0;i<results.length;i++){result=results[i];type=typeof result;if(type==="string"){value=result;
data={};}else{if($.isArray(result)){value=result[0];data=result.slice(1);}else{if(type==="object"){value=result.value;data=result.data;}}}value=String(value);if(value>""){if(typeof data!=="object"){data={};}include=!this.options.filterResults;if(!include){pattern=String(filter);pattern=pattern.replace(specials,"\\$&");
if(!this.options.matchInside){pattern="^"+pattern;}if(!this.options.matchCase){attributes="i";}regex=new RegExp(pattern,attributes);include=regex.test(value);}if(include){filtered.push({value:value,data:data});}}}if(this.options.sortResults){filtered=this.sortResults(filtered,filter);}if(this.options.maxItemsToShow>0&&this.options.maxItemsToShow<filtered.length){filtered.length=this.options.maxItemsToShow;
}return filtered;};$.Autocompleter.prototype.sortResults=function(results,filter){var self=this;var sortFunction=this.options.sortFunction;if(!$.isFunction(sortFunction)){sortFunction=function(a,b,f){return self.sortValueAlpha(a,b,f);};}results.sort(function(a,b){return sortFunction(a,b,filter);});return results;
};$.Autocompleter.prototype.sortValueAlpha=function(a,b,filter){a=String(a.value);b=String(b.value);if(!this.options.matchCase){a=a.toLowerCase();b=b.toLowerCase();}if(a>b){return 1;}if(a<b){return -1;}return 0;};$.Autocompleter.prototype.showResults=function(results,filter){var self=this;var $ul=$("<ul></ul>");
var i,result,$li,extraWidth,first=false,$first=false;var numResults=results.length;for(i=0;i<numResults;i++){result=results[i];result.data.filterString=filter;$li=$("<li>"+this.showResult(result.value,result.data,result.subLevel)+"</li>");$li.data("value",result.value);$li.data("data",result.data);$li.click(function(){var $this=$(this);
self.selectItem($this);}).mousedown(function(){self.finishOnBlur_=false;}).mouseup(function(){self.finishOnBlur_=true;});$ul.append($li);if(first===false){first=String(result.value);$first=$li;$li.addClass(this.options.firstItemClass);}if(i==numResults-1){$li.addClass(this.options.lastItemClass);}}this.position();
this.dom.$results.html($ul).show();extraWidth=this.dom.$results.outerWidth()-this.dom.$results.width();this.dom.$results.width(this.dom.$elem.outerWidth()-extraWidth);$("li",this.dom.$results).hover(function(event){self.focusItem(this,event);},function(){});if(this.autoFill(first,filter)){this.focusItem($first);
}};$.Autocompleter.prototype.showResult=function(value,data,subLevel){if($.isFunction(this.options.showResult)){return this.options.showResult(value,data,subLevel);}else{return value;}};$.Autocompleter.prototype.autoFill=function(value,filter){var lcValue,lcFilter,valueLength,filterLength;if(this.options.autoFill&&this.lastKeyPressed_!=8){lcValue=String(value).toLowerCase();
lcFilter=String(filter).toLowerCase();valueLength=value.length;filterLength=filter.length;if(lcValue.substr(0,filterLength)===lcFilter){this.dom.$elem.val(value);this.selectRange(filterLength,valueLength);return true;}}return false;};$.Autocompleter.prototype.focusNext=function(){this.focusMove(+1);};
$.Autocompleter.prototype.focusPrev=function(){this.focusMove(-1);};$.Autocompleter.prototype.focusMove=function(modifier){var i,$items=$("li",this.dom.$results);modifier=parseInt(modifier,10);for(var i=0;i<$items.length;i++){if($($items[i]).hasClass(this.selectClass_)){this.focusItem(i+modifier);return;
}}this.focusItem(0);};$.Autocompleter.prototype.focusItem=function(item,event){var $item,$items=$("li",this.dom.$results);if($items.length){$items.removeClass(this.selectClass_).removeClass(this.options.selectClass);if(typeof item==="number"){item=parseInt(item,10);if(item<0){item=0;}else{if(item>=$items.length){item=$items.length-1;
}}$item=$($items[item]);}else{$item=$(item);}if($item){$item.addClass(this.selectClass_).addClass(this.options.selectClass);var selectedIndex=$item.index();if(selectedIndex>1&&typeof event=="undefined"){var scrollPos=$item.parent().parent().scrollTop();var expectedScrollPos=(selectedIndex-5)*19;$item.parent().parent().scrollTop(expectedScrollPos);
}}}};$.Autocompleter.prototype.selectCurrent=function(){var $item=$("li."+this.selectClass_,this.dom.$results);if($item.length==1){this.selectItem($item);}else{this.finish();}};$.Autocompleter.prototype.selectItem=function($li){var value=$li.data("value");var data=$li.data("data");var displayValue=this.displayValue(value,data);
this.lastProcessedValue_=displayValue;this.lastSelectedValue_=displayValue;this.dom.$elem.val(displayValue).focus();this.setCaret(displayValue.length);this.callHook("onItemSelect",{value:value,data:data});this.finish();};$.Autocompleter.prototype.displayValue=function(value,data){if($.isFunction(this.options.displayValue)){return this.options.displayValue(value,data);
}else{return value;}};$.Autocompleter.prototype.finish=function(){if(this.keyTimeout_){clearTimeout(this.keyTimeout_);}if(this.dom.$elem.val()!==this.lastSelectedValue_){if(this.options.mustMatch){this.dom.$elem.val("");}this.callHook("onNoMatch");}this.dom.$results.hide();this.lastKeyPressed_=null;this.lastProcessedValue_=null;
if(this.active_){this.callHook("onFinish");}this.active_=false;};$.Autocompleter.prototype.selectRange=function(start,end){var input=this.dom.$elem.get(0);if(input.setSelectionRange){input.focus();input.setSelectionRange(start,end);}else{if(this.createTextRange){var range=this.createTextRange();range.collapse(true);
range.moveEnd("character",end);range.moveStart("character",start);range.select();}}};$.Autocompleter.prototype.setCaret=function(pos){this.selectRange(pos,pos);};$.fn.autocomplete=function(options){if(typeof options==="string"){options={url:options};}var o=$.extend({},$.fn.autocomplete.defaults,options);
return this.each(function(){var $this=$(this);var ac=new $.Autocompleter($this,o);$this.data("autocompleter",ac);});};$.fn.autocomplete.defaults={paramName:"q",minChars:1,loadingClass:"acLoading",resultsClass:"acResults",inputClass:"acInput",selectClass:"acSelect",mustMatch:false,matchCase:false,matchInside:true,matchSubset:true,useCache:true,maxCacheLength:10,autoFill:false,filterResults:true,sortResults:true,sortFunction:false,onItemSelect:false,onNoMatch:false,maxItemsToShow:-1,readExternalCache:null,writeToExternalCache:null};
})(jQuery);
/*
 * JavaScript Linkify - v0.3 - 6/27/2009
 * http://benalman.com/projects/javascript-linkify/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 * 
 * Some regexps adapted from http://userscripts.org/scripts/review/7122
 */
window.linkify=(function(){var SCHEME="[a-z\\d.-]+://",IPV4="(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])",HOSTNAME="(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+",TLD="(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)",HOST_OR_IP="(?:"+HOSTNAME+TLD+"|"+IPV4+")",PATH="(?:[;/][^#?<>\\s]*)?",QUERY_FRAG="(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?",URI1="\\b"+SCHEME+"[^<>\\s]+",URI2="\\b"+HOST_OR_IP+PATH+QUERY_FRAG+"(?!\\w)",MAILTO="mailto:",EMAIL="(?:"+MAILTO+")?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@"+HOST_OR_IP+QUERY_FRAG+"(?!\\w)",URI_RE=new RegExp("(?:"+URI1+"|"+URI2+"|"+EMAIL+")","ig"),SCHEME_RE=new RegExp("^"+SCHEME,"i"),quotes={"'":"`",">":"<",")":"(","]":"[","}":"{","?":"?","?":"?"},default_options={formatter:function(text,href){return href?'<a href="'+href+'" title="'+href+'">'+text+"</a>":text;
},punct_regexp:/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/};return function(txt,options){options=options||{};var arr,i,link,href,html="",parts=[],idx_prev,idx_last,idx,link_last,matches_begin,matches_end,quote_begin,quote_end;for(i in default_options){if(options[i]===undefined){options[i]=default_options[i];
}}while(arr=URI_RE.exec(txt)){link=arr[0];idx_last=URI_RE.lastIndex;idx=idx_last-link.length;if(/[\/:]/.test(txt.charAt(idx-1))){continue;}do{link_last=link;quote_end=link.substr(-1);quote_begin=quotes[quote_end];if(quote_begin){matches_begin=link.match(new RegExp("\\"+quote_begin+"(?!$)","g"));matches_end=link.match(new RegExp("\\"+quote_end,"g"));
if((matches_begin?matches_begin.length:0)<(matches_end?matches_end.length:0)){link=link.substr(0,link.length-1);idx_last--;}}if(options.punct_regexp){link=link.replace(options.punct_regexp,function(a){idx_last-=a.length;return"";});}}while(link.length&&link!==link_last);href=link;if(!SCHEME_RE.test(href)){href=(href.indexOf("@")!==-1?(!href.indexOf(MAILTO)?"":MAILTO):!href.indexOf("irc.")?"irc://":!href.indexOf("ftp.")?"ftp://":"http://")+href;
}if(idx_prev!=idx){parts.push([txt.slice(idx_prev,idx)]);idx_prev=idx_last;}parts.push([link,href]);}parts.push([txt.substr(idx_prev)]);if(typeof options.returnMatches!="undefined"&&options.returnMatches){var partsArray=[];for(i=0;i<parts.length;i++){if(parts[i].length>1){partsArray[partsArray.length]=parts[i][0];
}}return partsArray;}else{for(i=0;i<parts.length;i++){html+=options.formatter.apply(window,parts[i]);}return html||txt;}};})();var requirejs,require,define;(function(Y){function H(b){return"[object Function]"===L.call(b);}function I(b){return"[object Array]"===L.call(b);}function x(b,c){if(b){var d;for(d=0;
d<b.length&&(!b[d]||!c(b[d],d,b));d+=1){}}}function M(b,c){if(b){var d;for(d=b.length-1;-1<d&&(!b[d]||!c(b[d],d,b));d-=1){}}}function r(b,c){return da.call(b,c);}function i(b,c){return r(b,c)&&b[c];}function E(b,c){for(var d in b){if(r(b,d)&&c(b[d],d)){break;}}}function Q(b,c,d,i){c&&E(c,function(c,h){if(d||!r(b,h)){i&&"string"!==typeof c?(b[h]||(b[h]={}),Q(b[h],c,d,i)):b[h]=c;
}});return b;}function t(b,c){return function(){return c.apply(b,arguments);};}function Z(b){if(!b){return b;}var c=Y;x(b.split("."),function(b){c=c[b];});return c;}function J(b,c,d,i){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+b);c.requireType=b;c.requireModules=i;d&&(c.originalError=d);return c;
}function ea(b){function c(a,g,v){var e,n,b,c,d,j,f,h=g&&g.split("/");e=h;var l=m.map,k=l&&l["*"];if(a&&"."===a.charAt(0)){if(g){e=i(m.pkgs,g)?h=[g]:h.slice(0,h.length-1);g=a=e.concat(a.split("/"));for(e=0;g[e];e+=1){if(n=g[e],"."===n){g.splice(e,1),e-=1;}else{if(".."===n){if(1===e&&(".."===g[2]||".."===g[0])){break;
}else{0<e&&(g.splice(e-1,2),e-=2);}}}}e=i(m.pkgs,g=a[0]);a=a.join("/");e&&a===g+"/"+e.main&&(a=g);}else{0===a.indexOf("./")&&(a=a.substring(2));}}if(v&&(h||k)&&l){g=a.split("/");for(e=g.length;0<e;e-=1){b=g.slice(0,e).join("/");if(h){for(n=h.length;0<n;n-=1){if(v=i(l,h.slice(0,n).join("/"))){if(v=i(v,b)){c=v;
d=e;break;}}}}if(c){break;}!j&&(k&&i(k,b))&&(j=i(k,b),f=e);}!c&&j&&(c=j,d=f);c&&(g.splice(0,d,c),a=g.join("/"));}return a;}function d(a){z&&x(document.getElementsByTagName("script"),function(g){if(g.getAttribute("data-requiremodule")===a&&g.getAttribute("data-requirecontext")===j.contextName){return g.parentNode.removeChild(g),!0;
}});}function y(a){var g=i(m.paths,a);if(g&&I(g)&&1<g.length){return d(a),g.shift(),j.require.undef(a),j.require([a]),!0;}}function f(a){var g,b=a?a.indexOf("!"):-1;-1<b&&(g=a.substring(0,b),a=a.substring(b+1,a.length));return[g,a];}function h(a,g,b,e){var n,u,d=null,h=g?g.name:null,l=a,m=!0,k="";a||(m=!1,a="_@r"+(L+=1));
a=f(a);d=a[0];a=a[1];d&&(d=c(d,h,e),u=i(p,d));a&&(d?k=u&&u.normalize?u.normalize(a,function(a){return c(a,h,e);}):c(a,h,e):(k=c(a,h,e),a=f(k),d=a[0],k=a[1],b=!0,n=j.nameToUrl(k)));b=d&&!u&&!b?"_unnormalized"+(M+=1):"";return{prefix:d,name:k,parentMap:g,unnormalized:!!b,url:n,originalName:l,isDefine:m,id:(d?d+"!"+k:k)+b};
}function q(a){var g=a.id,b=i(k,g);b||(b=k[g]=new j.Module(a));return b;}function s(a,g,b){var e=a.id,n=i(k,e);if(r(p,e)&&(!n||n.defineEmitComplete)){"defined"===g&&b(p[e]);}else{q(a).on(g,b);}}function C(a,g){var b=a.requireModules,e=!1;if(g){g(a);}else{if(x(b,function(g){if(g=i(k,g)){g.error=a,g.events.error&&(e=!0,g.emit("error",a));
}}),!e){l.onError(a);}}}function w(){R.length&&(fa.apply(F,[F.length-1,0].concat(R)),R=[]);}function A(a,g,b){var e=a.map.id;a.error?a.emit("error",a.error):(g[e]=!0,x(a.depMaps,function(e,c){var d=e.id,h=i(k,d);h&&(!a.depMatched[c]&&!b[d])&&(i(g,d)?(a.defineDep(c,p[d]),a.check()):A(h,g,b));}),b[e]=!0);
}function B(){var a,g,b,e,n=(b=1000*m.waitSeconds)&&j.startTime+b<(new Date).getTime(),c=[],h=[],f=!1,l=!0;if(!T){T=!0;E(k,function(b){a=b.map;g=a.id;if(b.enabled&&(a.isDefine||h.push(b),!b.error)){if(!b.inited&&n){y(g)?f=e=!0:(c.push(g),d(g));}else{if(!b.inited&&(b.fetched&&a.isDefine)&&(f=!0,!a.prefix)){return l=!1;
}}}});if(n&&c.length){return b=J("timeout","Load timeout for modules: "+c,null,c),b.contextName=j.contextName,C(b);}l&&x(h,function(a){A(a,{},{});});if((!n||e)&&f){if((z||$)&&!U){U=setTimeout(function(){U=0;B();},50);}}T=!1;}}function D(a){r(p,a[0])||q(h(a[0],null,!0)).init(a[1],a[2]);}function G(a){var a=a.currentTarget||a.srcElement,b=j.onScriptLoad;
a.detachEvent&&!V?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1);b=j.onScriptError;(!a.detachEvent||V)&&a.removeEventListener("error",b,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")};}function K(){var a;for(w();F.length;){a=F.shift();if(null===a[0]){return C(J("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));
}D(a);}}var T,W,j,N,U,m={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},map:{},config:{}},k={},X={},F=[],p={},S={},L=1,M=1;N={require:function(a){return a.require?a.require:a.require=j.makeRequire(a.map);},exports:function(a){a.usingExports=!0;if(a.map.isDefine){return a.exports?a.exports:a.exports=p[a.map.id]={};
}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return m.config&&i(m.config,a.map.id)||{};},exports:p[a.map.id]};}};W=function(a){this.events=i(X,a.id)||{};this.map=a;this.shim=i(m.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};
this.depCount=0;};W.prototype={init:function(a,b,c,e){e=e||{};if(!this.inited){this.factory=b;if(c){this.on("error",c);}else{this.events.error&&(c=t(this,function(a){this.emit("error",a);}));}this.depMaps=a&&a.slice(0);this.errback=c;this.inited=!0;this.ignore=e.ignore;e.enabled||this.enabled?this.enable():this.check();
}},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b);},fetch:function(){if(!this.fetched){this.fetched=!0;j.startTime=(new Date).getTime();var a=this.map;if(this.shim){j.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],t(this,function(){return a.prefix?this.callPlugin():this.load();
}));}else{return a.prefix?this.callPlugin():this.load();}}},load:function(){var a=this.map.url;S[a]||(S[a]=!0,j.load(this.map.id,a));},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var e=this.exports,n=this.factory;if(this.inited){if(this.error){this.emit("error",this.error);
}else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(H(n)){if(this.events.error){try{e=j.execCb(c,n,b,e);}catch(d){a=d;}}else{e=j.execCb(c,n,b,e);}this.map.isDefine&&((b=this.module)&&void 0!==b.exports&&b.exports!==this.exports?e=b.exports:void 0===e&&this.usingExports&&(e=this.exports));
if(a){return a.requireMap=this.map,a.requireModules=[this.map.id],a.requireType="define",C(this.error=a);}}else{e=n;}this.exports=e;if(this.map.isDefine&&!this.ignore&&(p[c]=e,l.onResourceLoad)){l.onResourceLoad(j,this.map,this.depMaps);}delete k[c];this.defined=!0;}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0);
}}}else{this.fetch();}}},callPlugin:function(){var a=this.map,b=a.id,d=h(a.prefix);this.depMaps.push(d);s(d,"defined",t(this,function(e){var n,d;d=this.map.name;var v=this.map.parentMap?this.map.parentMap.name:null,f=j.makeRequire(a.parentMap,{enableBuildCallback:!0,skipMap:!0});if(this.map.unnormalized){if(e.normalize&&(d=e.normalize(d,function(a){return c(a,v,!0);
})||""),e=h(a.prefix+"!"+d,this.map.parentMap),s(e,"defined",t(this,function(a){this.init([],function(){return a;},null,{enabled:!0,ignore:!0});})),d=i(k,e.id)){this.depMaps.push(e);if(this.events.error){d.on("error",t(this,function(a){this.emit("error",a);}));}d.enable();}}else{n=t(this,function(a){this.init([],function(){return a;
},null,{enabled:!0});}),n.error=t(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];E(k,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&delete k[a.map.id];});C(a);}),n.fromText=t(this,function(e,c){var d=a.name,u=h(d),v=O;c&&(e=c);v&&(O=!1);q(u);r(m.config,b)&&(m.config[d]=m.config[b]);
try{l.exec(e);}catch(k){throw Error("fromText eval for "+d+" failed: "+k);}v&&(O=!0);this.depMaps.push(u);j.completeLoad(d);f([d],n);}),e.load(a.name,f,n,m);}}));j.enable(d,this);this.pluginMaps[d.id]=d;},enable:function(){this.enabling=this.enabled=!0;x(this.depMaps,t(this,function(a,b){var c,e;if("string"===typeof a){a=h(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);
this.depMaps[b]=a;if(c=i(N,a.id)){this.depExports[b]=c(this);return;}this.depCount+=1;s(a,"defined",t(this,function(a){this.defineDep(b,a);this.check();}));this.errback&&s(a,"error",this.errback);}c=a.id;e=k[c];!r(N,c)&&(e&&!e.enabled)&&j.enable(a,this);}));E(this.pluginMaps,t(this,function(a){var b=i(k,a.id);
b&&!b.enabled&&j.enable(a,this);}));this.enabling=!1;this.check();},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b);},emit:function(a,b){x(this.events[a],function(a){a(b);});"error"===a&&delete this.events[a];}};j={config:m,contextName:b,registry:k,defined:p,urlFetched:S,defQueue:F,Module:W,makeModuleMap:h,nextTick:l.nextTick,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");
var b=m.pkgs,c=m.shim,e={paths:!0,config:!0,map:!0};E(a,function(a,b){e[b]?"map"===b?Q(m[b],a,!0,!0):Q(m[b],a,!0):m[b]=a;});a.shim&&(E(a.shim,function(a,b){I(a)&&(a={deps:a});if((a.exports||a.init)&&!a.exportsFn){a.exportsFn=j.makeShimExports(a);}c[b]=a;}),m.shim=c);a.packages&&(x(a.packages,function(a){a="string"===typeof a?{name:a}:a;
b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(ga,"").replace(aa,"")};}),m.pkgs=b);E(k,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=h(b));});if(a.deps||a.callback){j.require(a.deps||[],a.callback);}},makeShimExports:function(a){return function(){var b;a.init&&(b=a.init.apply(Y,arguments));
return b||a.exports&&Z(a.exports);};},makeRequire:function(a,d){function f(e,c,u){var i,m;d.enableBuildCallback&&(c&&H(c))&&(c.__requireJsBuild=!0);if("string"===typeof e){if(H(c)){return C(J("requireargs","Invalid require call"),u);}if(a&&r(N,e)){return N[e](k[a.id]);}if(l.get){return l.get(j,e,a);}i=h(e,a,!1,!0);
i=i.id;return !r(p,i)?C(J("notloaded",'Module name "'+i+'" has not been loaded yet for context: '+b+(a?"":". Use require([])"))):p[i];}K();j.nextTick(function(){K();m=q(h(null,a));m.skipMap=d.skipMap;m.init(e,c,u,{enabled:!0});B();});return f;}d=d||{};Q(f,{isBrowser:z,toUrl:function(b){var d=b.lastIndexOf("."),g=null;
-1!==d&&(g=b.substring(d,b.length),b=b.substring(0,d));return j.nameToUrl(c(b,a&&a.id,!0),g);},defined:function(b){return r(p,h(b,a,!1,!0).id);},specified:function(b){b=h(b,a,!1,!0).id;return r(p,b)||r(k,b);}});a||(f.undef=function(b){w();var c=h(b,a,!0),d=i(k,b);delete p[b];delete S[c.url];delete X[b];
d&&(d.events.defined&&(X[b]=d.events),delete k[b]);});return f;},enable:function(a){i(k,a.id)&&q(a).enable();},completeLoad:function(a){var b,c,d=i(m.shim,a)||{},h=d.exports;for(w();F.length;){c=F.shift();if(null===c[0]){c[0]=a;if(b){break;}b=!0;}else{c[0]===a&&(b=!0);}D(c);}c=i(k,a);if(!b&&!r(p,a)&&c&&!c.inited){if(m.enforceDefine&&(!h||!Z(h))){return y(a)?void 0:C(J("nodefine","No define call for "+a,null,[a]));
}D([a,d.deps||[],d.exportsFn]);}B();},nameToUrl:function(a,b){var c,d,h,f,j,k;if(l.jsExtRegExp.test(a)){f=a+(b||"");}else{c=m.paths;d=m.pkgs;f=a.split("/");for(j=f.length;0<j;j-=1){if(k=f.slice(0,j).join("/"),h=i(d,k),k=i(c,k)){I(k)&&(k=k[0]);f.splice(0,j,k);break;}else{if(h){c=a===h.name?h.location+"/"+h.main:h.location;
f.splice(0,j,c);break;}}}f=f.join("/");f+=b||(/\?/.test(f)?"":".js");f=("/"===f.charAt(0)||f.match(/^[\w\+\.\-]+:/)?"":m.baseUrl)+f;}return m.urlArgs?f+((-1===f.indexOf("?")?"?":"&")+m.urlArgs):f;},load:function(a,b){l.load(j,a,b);},execCb:function(a,b,c,d){return b.apply(d,c);},onScriptLoad:function(a){if("load"===a.type||ha.test((a.currentTarget||a.srcElement).readyState)){P=null,a=G(a),j.completeLoad(a.id);
}},onScriptError:function(a){var b=G(a);if(!y(b.id)){return C(J("scripterror","Script error",a,[b.id]));}}};j.require=j.makeRequire();return j;}var l,w,A,D,s,G,P,K,ba,ca,ia=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,ja=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,aa=/\.js$/,ga=/^\.\//;w=Object.prototype;
var L=w.toString,da=w.hasOwnProperty,fa=Array.prototype.splice,z=!!("undefined"!==typeof window&&navigator&&document),$=!z&&"undefined"!==typeof importScripts,ha=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,V="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),B={},q={},R=[],O=!1;
if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(H(requirejs)){return;}q=requirejs;requirejs=void 0;}"undefined"!==typeof require&&!H(require)&&(q=require,require=void 0);l=requirejs=function(b,c,d,y){var f,h="_";!I(b)&&"string"!==typeof b&&(f=b,I(c)?(b=c,c=d,d=y):b=[]);f&&f.context&&(h=f.context);
(y=i(B,h))||(y=B[h]=l.s.newContext(h));f&&y.configure(f);return y.require(b,c,d);};l.config=function(b){return l(b);};l.nextTick="undefined"!==typeof setTimeout?function(b){setTimeout(b,4);}:function(b){b();};require||(require=l);l.version="2.1.2";l.jsExtRegExp=/^\/|:|\?|\.js$/;l.isBrowser=z;w=l.s={contexts:B,newContext:ea};
l({});x(["toUrl","undef","defined","specified"],function(b){l[b]=function(){var c=B._;return c.require[b].apply(c,arguments);};});if(z&&(A=w.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])){A=w.head=D.parentNode;}l.onError=function(b){throw b;};l.load=function(b,c,d){var i=b&&b.config||{},f;
if(z){return f=i.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),f.type=i.scriptType||"text/javascript",f.charset="utf-8",f.async=!0,f.setAttribute("data-requirecontext",b.contextName),f.setAttribute("data-requiremodule",c),f.attachEvent&&!(f.attachEvent.toString&&0>f.attachEvent.toString().indexOf("[native code"))&&!V?(O=!0,f.attachEvent("onreadystatechange",b.onScriptLoad)):(f.addEventListener("load",b.onScriptLoad,!1),f.addEventListener("error",b.onScriptError,!1)),f.src=d,K=f,D?A.insertBefore(f,D):A.appendChild(f),K=null,f;
}$&&(importScripts(d),b.completeLoad(c));};z&&M(document.getElementsByTagName("script"),function(b){A||(A=b.parentNode);if(s=b.getAttribute("data-main")){return q.baseUrl||(G=s.split("/"),ba=G.pop(),ca=G.length?G.join("/")+"/":"./",q.baseUrl=ca,s=ba),s=s.replace(aa,""),q.deps=q.deps?q.deps.concat(s):[s],!0;
}});define=function(b,c,d){var i,f;"string"!==typeof b&&(d=c,c=b,b=null);I(c)||(d=c,c=[]);!c.length&&H(d)&&d.length&&(d.toString().replace(ia,"").replace(ja,function(b,d){c.push(d);}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c));if(O){if(!(i=K)){P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(b){if("interactive"===b.readyState){return P=b;
}}),i=P;}i&&(b||(b=i.getAttribute("data-requiremodule")),f=B[i.getAttribute("data-requirecontext")]);}(f?f.defQueue:R).push([b,c,d]);};define.amd={jQuery:!0};l.exec=function(b){return eval(b);};l(q);}})(this);(function($){$.fn.autoscroll=function(options){var settings={handler:function(event){},scrollEventName:"AUTOSCROLL_EVENT",maxHandleExecute:-1,executionCount:0,threshold:0,needBackToTop:false};
var setupBackToTop=function(container){var html=_.template(iv.ui.getTemplate("autoscroll.backtotop"),{});var backtotop=null;if(typeof container[0].scrollHeight!="undefined"){container.css("position","relative");container.append(html);var scrollHeight=String(container[0].scrollHeight).replace(/[px;]/gi,"");
backtotop=container.find(".autoscroll-backtop");backtotop.css("top",Number(scrollHeight-25)+"px");}else{container=$(document);container.css("position","relative");container.find("body").append(html);backtotop=container.find(".autoscroll-backtop");backtotop.css("top",(container.height()-25)+"px");}backtotop.bind("click",function(){container.scrollTop(0);
});};var setupAction=function(container,settings){if(settings.needBackToTop){setupBackToTop(container);}var timerId=-1;container.scroll(function(event){var scrollHeight=0;var height=$(this).height();if(typeof container[0].scrollHeight!="undefined"){scrollHeight=container[0].scrollHeight;}else{if(container[0]==window){scrollHeight=$(document).height();
}else{if(container[0]==document){scrollHeight=container.height();height=$(window).height();}else{scrollHeight=container.height();}}}scrollHeight=String(scrollHeight).replace(/[px;]/gi,"");var scrollTop=$(this).scrollTop();var diff=scrollHeight-(scrollTop+height);if(scrollHeight>0&&diff<=settings.threshold){if(settings.maxHandleExecute==-1||settings.executionCount<settings.maxHandleExecute){iv.hub.publishEvent(settings.scrollEventName,{container:container,settings:settings});
settings.executionCount++;}}var backtotop=container.find(".autoscroll-backtop");if(container[0]==window){backtotop=$(document).find(".autoscroll-backtop");}backtotop.hide();window.clearTimeout(timerId);timerId=window.setTimeout(function(){if(scrollTop>0){backtotop.show();backtotop.css("top",(scrollTop+Number(height)-25)+"px");
}else{backtotop.hide();}},500);}).trigger("scroll");return container;};return this.each(function(){if(options){return setupAction($(this),$.extend({},settings,options));}else{return setupAction($(this),$.extend({},settings));}});};})(jQuery);