registerNS("iv.toolTip");iv.toolTip={createToolTip:function(config){var selector=config.selector;if($(selector).length==0){return;}var position=_.isEmpty(config.position)?iv.toolTip.calculatePosition(selector):config.position;position["effect"]=false;var options={id:config.messageId,content:(config.hasCloseButton?'<div class="redCrossButton"></div>':"")+config.messageContent,show:{event:config.hasCloseButton?"click":"mouseover"},hide:{fixed:true,event:config.hasCloseButton?"unfocus":"mouseleave",delay:config.delay?config.delay:0},style:{classes:"ui-tooltip-shadow iv-toolTip "+config.classes,tip:{corner:position.corner,mimic:"center",width:15,height:10,offset:position.offset}},position:position,events:{show:function(event){if(config.preventDefaultShow&&config.preventDefaultShow!=""){if(config.preventDefaultShow.call()){try{event.preventDefault();
}catch(error){}}}},visible:function(){if(config.callBack&&config.callBack!=""){config.callBack($(this),config.callBackParams);config.callBack="";}}}};if(typeof config.events!="undefined"){options.events=$.extend(true,options.events,config.events);}var tooltip=$(selector).qtip(options);if(config.hasCloseButton&&!iv.toolTip.closeButtonActionsSet){iv.toolTip.closeButtonActionsSet=true;
$("body").delegate(".ui-tooltip-content .redCrossButton","click",function(){$(this).parent().parent().hide();});}},updateToolTipContent:function(tooltip,content,hasCloseButton){var api=$(tooltip).qtip("api");if(hasCloseButton){content=content+'<div class="redCrossButton"></div>';}api.set("content.text",content);
},calculatePosition:function(selector){var top=$(selector).position().top;var left=$(selector).position().left;var height=$(selector).height();var width=$(selector).width();var myY="";var myX="";var atY="";var atX="";var topPos=iv.isMashup?50:200;if(top>topPos){atY="top";myY="center";if(left<300){myX="left";
atX="right";}else{myX="right";atX="left";}}else{atY="bottom";myY="top";if(left<500){myX="left";atX="center";}else{myX="right";atX="center";}}var position={corner:myY+" "+myX,at:atY+" "+atX,my:myY+" "+myX,offset:myY=="center"||myX=="center"?0:15};return position;},init:function(config){var dependencies=[];
if(config.dependencies){dependencies=config.dependencies;}dependencies.push(iv.ui.getTemplate("commonRequires.qTip"));iv.util.require(dependencies,function(){iv.toolTip.createToolTip(config);});}};